(function(){"use strict";var e={90:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(252);function o(e,t,i,o,s,n){return(0,r.wg)(),(0,r.iD)("div",{onPointerdown:t[0]||(t[0]=t=>e.$emit("focus")),class:"focus-box-container"},[(0,r.WI)(e.$slots,"default")],32)}var s=(0,r.aZ)({name:"FocusBox",data(){return{onFocusOut:function(e){this.$el==e.target||this.$el.contains(e.target)||this.$emit("unfocus")}.bind(this)}},emits:["focus","unfocus"],mounted(){setTimeout((()=>{document.body.addEventListener("pointerdown",this.onFocusOut)}),0)},unmounted(){document.body.removeEventListener("pointerdown",this.onFocusOut)}}),n=i(744);const a=(0,n.Z)(s,[["render",o]]);var l=a},873:function(e,t,i){i.d(t,{Z:function(){return y}});var r=i(252),o=i(577),s=i(963);const n={class:"scrollbox-container"};function a(e,t,i,a,l,c){return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",{ref:"content",class:"scroll-content",onWheelPassive:t[0]||(t[0]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[(0,r.WI)(e.$slots,"default",{},void 0,!0)],544),(0,r.wy)((0,r._)("div",{class:"scroll-bar",style:(0,o.j5)(e.scroll.sty),onWheelPassive:t[3]||(t[3]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[(0,r.wy)((0,r._)("div",{class:"scroll-handle",style:(0,o.j5)(e.handle.sty),onPointerdown:t[1]||(t[1]=(...t)=>e.startDrag&&e.startDrag(...t)),onPointerup:t[2]||(t[2]=(...t)=>e.stopDrag&&e.stopDrag(...t))},null,36),[[s.F8,e.showScrollbar]])],36),[[s.F8,e.alwaysShowScrollBar||e.showScrollbar]])])}var l=i(209),c=i(749),d=i(262),u=(0,r.aZ)({name:"ScrollBox",setup(){return{content:(0,d.iH)(null)}},props:{resetScrollOnChange:{type:Boolean,default:!1},alwaysShowScrollBar:{type:Boolean,default:!1},propagateScroll:{type:Boolean,default:!0},handleColor:{type:String,default:"#333333"},scrollColor:{type:String,default:"none"},borderColor:{type:String,default:"#404040"},width:{type:Number,default:17}},data(){return{scrollTop:0,windowMax:0,scroll:{sty:{width:`${this.width}px`,background:this.scrollColor}},handle:{trk:(0,d.Xl)(new c.k),hei:0,max:0,pos:0,sty:{height:"0px",transform:"translateY(0px)",background:this.handleColor,borderColor:this.borderColor}},showScrollbar:!1,onResizeObserver:null,onMutateObserver:null}},methods:{startDrag(e){this.handle.trk.capture(e,this.onDrag),document.addEventListener("pointerup",this.stopDrag,{once:!0})},onDrag(e,t){this.moveScrollPosition(this.handleTopToTop(this.handle.pos+t.movementY))},stopDrag(e){this.handle.trk.release(e)},recalculateScrollState(e=!0){let t=this.showScrollbar,i=this.content;if(0===i.clientHeight)return void(this.showScrollbar=!1);let r=i.clientHeight/i.scrollHeight;this.handle.hei=Math.max(15,Math.round((i.clientHeight-4)*r)),this.handle.max=i.clientHeight-this.handle.hei-4,this.windowMax=i.scrollHeight-i.clientHeight,this.showScrollbar=1!==r,this.handle.sty.height=`${this.handle.hei}px`,this.moveScrollPosition(e?0:i.scrollTop),!t&&this.showScrollbar&&setTimeout((()=>this.recalculateScrollState(e)),0)},moveScrollPosition(e,t=null){let i=this.scrollTop;this.scrollTop=(0,l.uZ)(e,0,this.windowMax),this.handle.pos=this.topToHandleTop(this.scrollTop),this.handle.sty.transform=`translateY(${this.handle.pos}px)`,this.content.scrollTop=this.scrollTop;let r=i-this.scrollTop!==0,o=0<this.scrollTop&&this.scrollTop<this.windowMax;(!this.propagateScroll||r||o)&&(null===t||void 0===t||t.stopPropagation())},topToHandleTop(e){return e/this.windowMax*this.handle.max},handleTopToTop(e){return e/this.handle.max*this.windowMax}},mounted(){let e={childList:!0,characterData:!0,subtree:!0};this.onMutateObserver=new MutationObserver((()=>this.recalculateScrollState(this.resetScrollOnChange))),this.onResizeObserver=new ResizeObserver((()=>this.recalculateScrollState(!1))),this.onResizeObserver.observe(this.$el),this.onMutateObserver.observe(this.content,e)},unmounted(){this.onResizeObserver.disconnect(),this.onMutateObserver.disconnect()}}),h=i(744);const p=(0,h.Z)(u,[["render",a],["__scopeId","data-v-cf54a08c"]]);var y=p},523:function(e,t,i){i.d(t,{Z:function(){return me}});var r=i(252),o=i(577);const s={class:"dictionary-field-contents-control"},n={class:"field-name"};function a(e,t,i,a,l,c){return(0,r.wg)(),(0,r.iD)("div",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.fields,(([i,s])=>((0,r.wg)(),(0,r.iD)("div",{class:"field-item",key:i},[(0,r._)("p",n,(0,o.zw)(e.titleCase(i)),1),((0,r.wg)(),(0,r.j4)((0,r.LL)(e.getField(s.type)),{class:"field-value",property:s,onChange:t[0]||(t[0]=(...t)=>e.$emit("change",...t)),onCreate:t[1]||(t[1]=(...t)=>e.$emit("create",...t)),onDelete:t[2]||(t[2]=(...t)=>e.$emit("delete",...t))},null,40,["property"]))])))),128))])}var l=i(209),c=i(963);const d={class:"grid-container"},u={class:"placeholder"},h=["contenteditable"];function p(e,t,i,s,n,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["text-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[4]||(t[4]=t=>e.onFocus())},[(0,r._)("div",d,[(0,r.wy)((0,r._)("p",u," Null ",512),[[c.F8,e.showPlaceholder]]),(0,r._)("div",{ref:"field",class:"field",onInput:t[0]||(t[0]=(...t)=>e.onInput&&e.onInput(...t)),onKeyup:t[1]||(t[1]=(0,c.iM)((()=>{}),["stop"])),onKeydown:t[2]||(t[2]=(0,c.iM)((()=>{}),["stop"])),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),contenteditable:e.isEditable},(0,o.zw)(this.value),41,h)])],34)}var y=i(262),_=(0,r.aZ)({name:"TextField",setup(){return{field:(0,y.iH)(null)}},props:{property:{type:Object,required:!0},updateTimeout:{type:Number,default:300}},data(){return{sto:0,value:"",showPlaceholder:!0,activeProperty:(0,y.Xl)(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{onFocus(){this.$nextTick((()=>{this.field.focus()}))},onInput(){clearTimeout(this.sto),this.value=this.field.innerText,this.sto=setTimeout((()=>{this.updateProperty()}),this.updateTimeout),this.showPlaceholder=""===this.field.innerText},onBlur(){clearTimeout(this.sto),this.updateProperty()},updateProperty(){let e=this.value||null;this._property.toRawValue()!==e?this.$emit("change",this._property,e):this.refreshValue()},refreshValue(){this.value=this._property.toRawValue()||"",this.showPlaceholder=""===this.value}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=(0,y.Xl)(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}}),f=i(744);const g=(0,f.Z)(_,[["render",p],["__scopeId","data-v-cfce8e40"]]);var m=g;const v={class:"list-field-control"},b=["onPointerdown"],x=["onPointerdown"];function w(e,t,i,o,s,n){const a=(0,r.up)("Plus");return(0,r.wg)(),(0,r.iD)("div",v,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e._property.value,(([i,o])=>((0,r.wg)(),(0,r.iD)("div",{class:"field-item",key:i},["DictionaryField"===e.getField(o.type)?((0,r.wg)(),(0,r.j4)((0,r.LL)(e.getField(o.type)),{key:0,property:o,onChange:t[0]||(t[0]=(...t)=>e.$emit("change",...t)),onCreate:t[1]||(t[1]=(...t)=>e.$emit("create",...t)),onDelete:t[2]||(t[2]=(...t)=>e.$emit("delete",...t))},{default:(0,r.w5)((()=>[e.isEditable?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"delete-button",onPointerdown:t=>e.onDelete(i),tabindex:"-1"},"✗",40,b)):(0,r.kq)("",!0)])),_:2},1064,["property"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[((0,r.wg)(),(0,r.j4)((0,r.LL)(e.getField(o.type)),{property:o,onChange:t[3]||(t[3]=(...t)=>e.$emit("change",...t)),onCreate:t[4]||(t[4]=(...t)=>e.$emit("create",...t)),onDelete:t[5]||(t[5]=(...t)=>e.$emit("delete",...t))},null,40,["property"])),e.isEditable?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"delete-button",onPointerdown:t=>e.onDelete(i),tabindex:"-1"},"✗",40,x)):(0,r.kq)("",!0)],64))])))),128)),e.isEditable?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"create-button",onPointerdown:t[6]||(t[6]=t=>e.onCreate())},[(0,r._)("span",null,[(0,r.Wm)(a)]),(0,r.Uk)("Add ")],32)):(0,r.kq)("",!0)])}const S=["fill"],k=(0,r._)("path",{d:"m0.79375 0v0.79375h-0.79375v0.52917h0.79375v0.79375h0.52917v-0.79375h0.79375v-0.52917h-0.79375v-0.79375z"},null,-1),M=[k];function D(e,t,i,o,s,n){return(0,r.wg)(),(0,r.iD)("svg",{width:"8",height:"8",version:"1.1",viewBox:"0 0 2.1167 2.1167",xmlns:"http://www.w3.org/2000/svg",fill:e.color},M,8,S)}var j=(0,r.aZ)({name:"Plus",props:{color:{type:String,default:"#737373"}}});const C=(0,f.Z)(j,[["render",D]]);var B=C;const P={class:"grid-container"},T={class:"value-container"},O={key:0,class:"dropdown-arrow"},E={class:"dropdown-options"},L=["onMouseenter","onClick"];function A(e,t,i,s,n,a){const l=(0,r.up)("ScrollBox"),d=(0,r.up)("FocusBox");return(0,r.wg)(),(0,r.j4)(d,{class:(0,o.C_)(["enum-field-control",{disabled:!e.isEditable,open:e.showMenu}]),onFocus:e.openMenu,onUnfocus:e.closeMenu},{default:(0,r.w5)((()=>[(0,r._)("div",P,[(0,r._)("div",T,[(0,r._)("div",{class:(0,o.C_)(["value-text",{"is-null":e.isNull}])},(0,o.zw)(e._property.toString()),3),e.isEditable?((0,r.wg)(),(0,r.iD)("div",O,"▼")):(0,r.kq)("",!0)]),e.showMenu?((0,r.wg)(),(0,r.j4)(l,{key:0,propagateScroll:!1,style:(0,o.j5)(e.style)},{default:(0,r.w5)((()=>[(0,r._)("ul",E,[(0,r._)("li",{class:(0,o.C_)([{active:"null"===e.hovered},"null"]),onMouseenter:t[0]||(t[0]=t=>e.hovered="null"),onClick:t[1]||(t[1]=(0,c.iM)((t=>e.updateProperty(null)),["stop"]))}," Null ",34),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(([t,i])=>((0,r.wg)(),(0,r.iD)("li",{key:t,class:(0,o.C_)({active:e.hovered===t}),onMouseenter:i=>e.hovered=t,onClick:(0,c.iM)((i=>e.updateProperty(t)),["stop"])},(0,o.zw)(i.toString()),43,L)))),128))])])),_:1},8,["style"])):(0,r.kq)("",!0)])])),_:1},8,["class","onFocus","onUnfocus"])}var V=i(90),I=i(873),H=(0,r.aZ)({name:"EnumField",props:{property:{type:Object,required:!0},maxHeight:{type:Number,default:200}},data(){return{hovered:"",showMenu:!1}},computed:{_property(){this.property.trigger.value;return this.property},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e},options(){return this._property.options.value},isNull(){return null===this._property.toRawValue()},style(){return{maxHeight:`${this.maxHeight}px`}}},methods:{openMenu(){this.isEditable&&(this.showMenu=!0)},closeMenu(){this.showMenu=!1,this.refreshValue()},updateProperty(e){this._property.toRawValue()!==e?this.$emit("change",this._property,e):this.refreshValue(),this.showMenu=!1},refreshValue(){var e;this.hovered=null!==(e=this._property.toRawValue())&&void 0!==e?e:"null"}},emits:["change"],watch:{"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},components:{FocusBox:V.Z,ScrollBox:I.Z}});const F=(0,f.Z)(H,[["render",A],["__scopeId","data-v-2178b796"]]);var N=F;const R=["disabled"],z={key:0,class:"increment-arrows"};function W(e,t,i,s,n,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["number-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[6]||(t[6]=t=>e.onFocus())},[(0,r.wy)((0,r._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),type:"text",ref:"field",placeholder:"Null",onInput:t[1]||(t[1]=(...t)=>e.onInput&&e.onInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),disabled:!e.isEditable},null,40,R),[[c.nr,e.value]]),e.isEditable?((0,r.wg)(),(0,r.iD)("div",z,[(0,r._)("div",{class:"up-arrow",onClick:t[4]||(t[4]=t=>e.updateProperty(1))},"▲"),(0,r._)("div",{class:"down-arrow",onClick:t[5]||(t[5]=t=>e.updateProperty(-1))},"▼")])):(0,r.kq)("",!0)],34)}var $=(0,r.aZ)({name:"NumberField",setup(){return{field:(0,y.iH)(null)}},props:{property:{type:Object,required:!0}},data(){return{value:"",activeProperty:(0,y.Xl)(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{onFocus(){this.$nextTick((()=>{this.field.focus()}))},onInput(){""===this.value&&this.updateProperty(0)},onBlur(){this.updateProperty(0)},onKeyDown(e){switch(e.key){case"ArrowUp":e.preventDefault(),this.updateProperty(1);break;case"ArrowDown":e.preventDefault(),this.updateProperty(-1);break}},updateProperty(e=0){let t;if(""===this.value&&0===e)t=null;else{t=parseFloat(this.value),Number.isNaN(t)?t=0:t+=e;let{min:i,max:r}=this._property;t=(0,l.uZ)(t,i,r),this._property.type===l.uS.Int&&(t=Math.round(t))}this._property.toRawValue()!==t?this.$emit("change",this._property,t):this.refreshValue()},refreshValue(){var e;this.value=`${null!==(e=this._property.toRawValue())&&void 0!==e?e:""}`}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=(0,y.Xl)(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}});const Y=(0,f.Z)($,[["render",W],["__scopeId","data-v-9dabcc18"]]);var q=Y;const G=e=>((0,r.dD)("data-v-f049ed0a"),e=e(),(0,r.Cn)(),e),U={class:"grid-container"},Z={class:"value"},X={key:0,class:"null-value"},K={key:1,class:"date-value"},Q={class:"editor"},J=G((()=>(0,r._)("span",null,"/",-1))),ee=G((()=>(0,r._)("span",null,"/",-1))),te=G((()=>(0,r._)("span",{class:"space"},null,-1))),ie=G((()=>(0,r._)("span",null,":",-1))),re=G((()=>(0,r._)("span",null,":",-1))),oe=G((()=>(0,r._)("span",{class:"timezone"},"Z",-1)));function se(e,t,i,s,n,a){return(0,r.wg)(),(0,r.iD)("div",{class:(0,o.C_)(["datetime-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[18]||(t[18]=t=>e.enterEditMode())},[(0,r._)("div",U,[(0,r.wy)((0,r._)("div",Z,[null===e.value?((0,r.wg)(),(0,r.iD)("p",X," Null ")):((0,r.wg)(),(0,r.iD)("p",K,(0,o.zw)(e.prop_M)+" "+(0,o.zw)(e.prop_D)+", "+(0,o.zw)(e.prop_Y)+" - "+(0,o.zw)(e.prop_H)+":"+(0,o.zw)(e.prop_m)+":"+(0,o.zw)(e.prop_s),1))],512),[[c.F8,!e.showEditor]]),(0,r.wy)((0,r._)("div",Q,[(0,r.wy)((0,r._)("input",{type:"text",maxlength:"2",segment:"M",ref:"M",class:"M",placeholder:"MM",onBlur:t[0]||(t[0]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[1]||(t[1]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.value_M=t)},null,544),[[c.nr,e.value_M]]),J,(0,r.wy)((0,r._)("input",{type:"text",maxlength:"2",segment:"D",ref:"D",class:"D",placeholder:"DD",onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[4]||(t[4]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[5]||(t[5]=t=>e.value_D=t)},null,544),[[c.nr,e.value_D]]),ee,(0,r.wy)((0,r._)("input",{type:"text",maxlength:"4",segment:"Y",ref:"Y",class:"Y",placeholder:"YYYY",onBlur:t[6]||(t[6]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[7]||(t[7]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[8]||(t[8]=t=>e.value_Y=t)},null,544),[[c.nr,e.value_Y]]),te,(0,r.wy)((0,r._)("input",{type:"text",maxlength:"2",segment:"H",ref:"H",class:"H",placeholder:"HH",onBlur:t[9]||(t[9]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[10]||(t[10]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.value_H=t)},null,544),[[c.nr,e.value_H]]),ie,(0,r.wy)((0,r._)("input",{type:"text",maxlength:"2",segment:"m",ref:"m",class:"m",placeholder:"mm",onBlur:t[12]||(t[12]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[13]||(t[13]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[14]||(t[14]=t=>e.value_m=t)},null,544),[[c.nr,e.value_m]]),re,(0,r.wy)((0,r._)("input",{type:"text",maxlength:"2",segment:"s",ref:"s",class:"s",placeholder:"ss",onBlur:t[15]||(t[15]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[16]||(t[16]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[17]||(t[17]=t=>e.value_s=t)},null,544),[[c.nr,e.value_s]]),oe],512),[[c.F8,e.showEditor]])])],34)}const ne=["M","D","Y","H","m","s"],ae=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var le=(0,r.aZ)({name:"DateTimeField",setup(){return{M:(0,y.iH)(null),D:(0,y.iH)(null),Y:(0,y.iH)(null),H:(0,y.iH)(null),m:(0,y.iH)(null),s:(0,y.iH)(null)}},props:{property:{type:Object,required:!0}},data(){return{value_M:"",value_D:"",value_Y:"",value_H:"",value_m:"",value_s:"",showEditor:!1,activeProperty:(0,y.Xl)(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e},value(){let e=this._property.toRawValue();return null!==e?new Date(e):e},prop_M(){let e=this.value;return e?ae[e.getUTCMonth()]:"Null"},prop_D(){var e;let t=this.value;return`${null!==(e=null===t||void 0===t?void 0:t.getUTCDate())&&void 0!==e?e:"Null"}`},prop_Y(){var e;let t=this.value;return`${null!==(e=null===t||void 0===t?void 0:t.getUTCFullYear())&&void 0!==e?e:"Null"}`},prop_H(){let e=this.value;return e?`${e.getUTCHours()}`.padStart(2,"0"):"Null"},prop_m(){let e=this.value;return e?`${e.getUTCMinutes()}`.padStart(2,"0"):"Null"},prop_s(){let e=this.value;return e?`${e.getUTCSeconds()}`.padStart(2,"0"):"Null"}},methods:{onBlur(e){this.$el.contains(e.relatedTarget)||this.exitEditMode()},onKeyDown(e){let t=e.target;if(t.selectionStart===t.selectionEnd)switch(e.key){case"Backspace":0===t.selectionEnd&&this.shiftFocus(-1,!1);break;case"ArrowLeft":0===t.selectionEnd&&(this.shiftFocus(-1,!1),e.preventDefault());break;case"ArrowRight":t.selectionEnd===t.maxLength&&(this.shiftFocus(1,!0),e.preventDefault());break;default:t.selectionEnd===t.maxLength&&this.shiftFocus(1,!0)}},enterEditMode(){this.isEditable&&(this.showEditor=!0,this.$nextTick((()=>{let e;for(let t of ne)if(e=this[t],!e.value)break;e.focus(),e.selectionEnd=e.value.length})))},exitEditMode(){this.updateProperty(),this.showEditor=!1},shiftFocus(e,t=!0){let i=document.activeElement,r=ne.indexOf(i.getAttribute("segment"))+e;0<=r&&r<ne.length&&this.$nextTick((()=>{let e=this[ne[r]];e.focus(),e.selectionEnd=t?0:e.value.length}))},updateProperty(){var e;let t,i=`${this.value_Y.padStart(4,"0")}-${this.value_M.padStart(2,"0")}-${this.value_D.padStart(2,"0")}T${this.value_H.padStart(2,"0")}:${this.value_m.padStart(2,"0")}:${this.value_s.padStart(2,"0")}.000Z`,r=new Date(i);t="0000-00-00T00:00:00.000Z"===i||Number.isNaN(r.getTime())?null:r,(null===(e=this.value)||void 0===e?void 0:e.getTime())!==(null===t||void 0===t?void 0:t.getTime())?this.$emit("change",this._property,t):this.refreshValue()},refreshValue(){var e,t;let i=null!==(t=null===(e=this.value)||void 0===e?void 0:e.toISOString())&&void 0!==t?t:"--T::",[r,o,s,n,a,l]=i.split(/[-T:\.]/);this.value_Y=r,this.value_M=o,this.value_D=s,this.value_H=n,this.value_m=a,this.value_s=l}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=(0,y.Xl)(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}});const ce=(0,f.Z)(le,[["render",se],["__scopeId","data-v-f049ed0a"]]);var de=ce;const ue=(0,r.RC)((()=>i.e(985).then(i.bind(i,985))));var he=(0,r.aZ)({name:"ListField",props:{property:{type:Object,required:!0}},computed:{_property(){this.property.trigger.value;return this.property},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{getField(e){switch(e){case l.uS.Int:case l.uS.Float:return"NumberField";case l.uS.String:return"TextField";case l.uS.Date:return"DateTimeField";case l.uS.Enum:return"EnumField";case l.uS.List:return"ListField";case l.uS.Dictionary:return"DictionaryField"}},onCreate(){this.$emit("create",this._property)},onDelete(e){this.$emit("delete",this._property,e)}},emits:["change","create","delete"],components:{Plus:B,TextField:m,EnumField:N,NumberField:q,DateTimeField:de,DictionaryField:ue}});const pe=(0,f.Z)(he,[["render",w],["__scopeId","data-v-1f8ec412"]]);var ye=pe;const _e=(0,r.RC)((()=>i.e(985).then(i.bind(i,985))));var fe=(0,r.aZ)({name:"DictionaryFieldContents",props:{property:{type:Object,required:!0}},computed:{fields(){return[...this.property.value.entries()].filter((e=>{var t;return null===(t=e[1].descriptor.is_visible)||void 0===t||t}))}},methods:{getField(e){switch(e){case l.uS.String:return"TextField";case l.uS.Int:case l.uS.Float:return"NumberField";case l.uS.Date:return"DateTimeField";case l.uS.Enum:return"EnumField";case l.uS.List:return"ListField";case l.uS.Dictionary:return"DictionaryField"}},titleCase:l.Qs},emits:["change","create","delete"],components:{TextField:m,ListField:ye,EnumField:N,NumberField:q,DateTimeField:de,DictionaryField:_e}});const ge=(0,f.Z)(fe,[["render",a],["__scopeId","data-v-5181abbf"]]);var me=ge},55:function(e,t,i){i.d(t,{Z:function(){return p}});var r=i(252),o=i(577);const s=e=>((0,r.dD)("data-v-2d69016e"),e=e(),(0,r.Cn)(),e),n=["fill"],a=s((()=>(0,r._)("path",{d:"m2.1167 0-1.0583 1.3229-1.0583-1.3229z","stroke-width":"0"},null,-1))),l=[a];function c(e,t,i,s,a,c){return(0,r.wg)(),(0,r.iD)("svg",{width:"8",height:"5",fill:e.color,class:(0,o.C_)({collapsed:e.collapsed}),version:"1.1",viewBox:"0 0 2.1167 1.3229",xmlns:"http://www.w3.org/2000/svg"},l,10,n)}var d=(0,r.aZ)({name:"CollapseArrow",props:{collapsed:{type:Boolean,default:!1},color:{type:String,default:"#8c8c8c"}}}),u=i(744);const h=(0,u.Z)(d,[["render",c],["__scopeId","data-v-2d69016e"]]);var p=h},341:function(e,t,i){i.d(t,{CF:function(){return a},CQ:function(){return x},E7:function(){return l},KQ:function(){return f},MN:function(){return u},Oh:function(){return m},PM:function(){return n},Ph:function(){return g},TM:function(){return c},UL:function(){return _},W_:function(){return p},X6:function(){return h},Xi:function(){return b},f2:function(){return y},g_:function(){return d},v2:function(){return s}});var r=i(902),o=i(772);const s={Free:0,Grid:1},n=(0,r.dc)(s),a={Default:0,Pointer:2,Crosshair:4,Move:6,NotAllowed:8,Grab:10,Grabbing:12,N_Resize:14,E_Resize:16,S_Resize:18,W_Resize:20,EW_Resize:22,NS_Resize:24,Col_Resize:26,Row_Resize:28},l=(0,r.dc)(a),c={Off:0,Direct:32,Indirect:64},d=(0,r.dc)(c),u={False:0,True:128},h=(0,r.dc)(u),p={False:0,True:256},y=(0,r.dc)(p),_={Normal:512,High:1024},f=(0,r.dc)(_),g={False:0,True:2048},m=(0,r.dc)(g),v={None:o.VS.None,Node:o.VS.Node,Edge:o.VS.Edge,LinkSource:o.VS.LinkSource,LinkTarget:o.VS.LinkTarget},b=(0,r.dc)(v),x={[a.Default]:"default",[a.Pointer]:"pointer",[a.Crosshair]:"crosshair",[a.Move]:"move",[a.NotAllowed]:"not-allowed",[a.Grab]:"grab",[a.Grabbing]:"grabbing",[a.N_Resize]:"n-resize",[a.E_Resize]:"e-resize",[a.S_Resize]:"s-resize",[a.W_Resize]:"w-resize",[a.EW_Resize]:"ew-resize",[a.NS_Resize]:"ns-resize",[a.Col_Resize]:"col-resize",[a.Row_Resize]:"row-resize"}},899:function(e,t,i){i.d(t,{c:function(){return p}});var r=i(612),o=i(443),s=i(916),n=i(902),a=i(341);class l{constructor(e,t){this.dx=0,this.dy=0,this.ox=0,this.oy=0,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=0,this._cy=0,this._cdx=0,this._cdy=0,this._alignment=a.v2.Free,this._gridX=e,this._gridY=t,this._anchors=[]}reset(e,t,i,r,o,s){this.dx=0,this.dy=0,this.ox=r,this.oy=o,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=t,this._cy=i,this._cdx=0,this._cdy=0,this._alignment=e,this._anchors=null!==s&&void 0!==s?s:[]}updateDelta(e,t){this._cdx+=e,this._cdy+=t;let i,r,o,s,l=this._cx+this._cdx,c=this._cy+this._cdy;for(let n of this._anchors)if(s=n.boundingBox,i=n.radius,r=s.xMid-l,o=s.yMid-c,r*r+o*o<i*i)return this.dx=s.xMid-(this.ox+this.odx),this.dy=s.yMid-(this.oy+this.ody),this.odx+=this.dx,this.ody+=this.dy,void(this.anchor=n);switch(this.anchor=void 0,this._alignment){case a.v2.Grid:this.dx=(0,n.NM)(this._cdx,this._gridX)-this.odx,this.dy=(0,n.NM)(this._cdy,this._gridY)-this.ody;break;case a.v2.Free:default:this.dx=this._cdx-this.odx,this.dy=this._cdy-this.ody;break}this.odx+=this.dx,this.ody+=this.dy}}class c{constructor(){this.showGrid=!0,this.showShadows=!0,this.showDebug=!1,this.ssaaScale=1,this.shadowsDisableAt=0}}var d,u=i(184),h=i(878);class p extends n.vp{constructor(){super();let e=u.LM.createDummy(),t=new o.h;this._canvas=null,this._context=null,this._display=new c,this._elWidth=0,this._elHeight=0,this._mover=new l(...e.grid),this._layoutLocked=!1,this._page=e.createView(t),this._rafId=0,this._rasterCache=t,this._resizeObserver=null,this._transform=r.CRH,this._viewport=new s.N,this._ztoId=0,this._zoom=r.sPX().scaleExtent([1/8,6]).on("zoom",this.onCanvasZoom.bind(this)).on("end",(()=>this.onCanvasZoomEnd())),this._hovObj=null}inject(e){this._elWidth=e.clientWidth,this._elHeight=e.clientHeight,this._canvas=r.Ys(e).append("canvas").attr("style","display:block;").attr("width",this._elWidth).attr("height",this._elHeight).on("mousemove",(e=>{this.onHoverSubject(...r.cx$(e))})).on("contextmenu",(e=>e.preventDefault())),this._context=this._canvas.node().getContext("2d",{alpha:!1}),this._resizeObserver=new ResizeObserver((e=>this.onCanvasResize(e[0].target))),this._resizeObserver.observe(e),this._canvas.call(r.ohM().filter((()=>!0)).subject(this.onSelectSubject.bind(this)).on("start",this.onObjectDragStarted.bind(this)).on("drag",this.onObjectDragged.bind(this)).on("end",this.onObjectDragEnded.bind(this))).call(this._zoom)}destroy(){var e,t;null===(e=this._canvas)||void 0===e||e.remove(),this._canvas=null,this._context=null,this.removeAllListeners(),null===(t=this._resizeObserver)||void 0===t||t.disconnect()}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}removeAllListeners(e){super.removeAllListeners(e)}emit(e,...t){super.emit(e,...t)}setGridDisplay(e){this._display.showGrid=e}setShadowsDisplay(e){this._display.showShadows=e}setDebugDisplay(e){this._display.showDebug=e}setSsaaScale(e){this._display.ssaaScale=e,this._rasterCache.setScale(e)}setShadowsDisableAt(e){this._display.shadowsDisableAt=e}render(){0==this._rafId&&(this._rafId=requestAnimationFrame((()=>{this._rafId=0,this.executeRenderPipeline()})))}executeRenderPipeline(){if(null===this._context)return;let e=this._display;this._page.renderPageSurfaceTo(this._context,this._viewport,e.showGrid),e.showShadows&&e.shadowsDisableAt<=this._transform.k?this._page.renderTo(this._context,this._viewport):this._page.renderTo(this._context,this._viewport,0,0),e.showDebug&&this._page.renderDebugTo(this._context,this._viewport)}onHoverSubject(e,t,i){var r;e=this._transform.invertX(e),t=this._transform.invertY(t);let o=this._page.el.getObjectAt(e,t);this._hovObj!==o&&(this._hovObj=o,i=null!==(r=null!==i&&void 0!==i?i:null===o||void 0===o?void 0:o.getCursor())&&void 0!==r?r:a.CF.Default,this.emit("object-hover",o,i))}onSelectSubject(e){let t,i=e.sourceEvent,r=this._transform.invertX(e.x),o=this._transform.invertY(e.y),s=this._page.el.getObjectAt(r,o),a=i.button===n.zn.Right;if(s){if(s instanceof u.Bl){if(this.emit("canvas-click",i,e.x,e.y),a)return;let t=s.makeLine(),r=s.boundingBox.xMid,o=s.boundingBox.yMid;t.srcEnding.moveTo(r,o),t.trgEnding.moveTo(r,o);let n=t.createView(this._rasterCache).updateView();return{type:d.CreateLine,line:n,parent:this._page,anchor:s,obj:n.trgEnding}}if(s.parent instanceof u.eq){if(this.emit("object-click",i,s.parent,e.x,e.y),a)return;t=[this._page.lookup(s.id)]}else{if(this.emit("object-click",i,s,e.x,e.y),a)return;t=this._page.selects}return t[0]instanceof h.ib&&1===t.length?{type:d.MoveAnchorable,obj:t[0]}:{type:d.Move,objs:t}}this.emit("canvas-click",i,e.x,e.y)}onObjectDragStarted(e){setTimeout((()=>{this._layoutLocked=!0;let t,i=e.subject,r=this._transform.invertX(e.x),o=this._transform.invertY(e.y),s=0,n=0,l=a.v2.Free;switch(i.type){case d.Move:for(let e of i.objs)s+=e.x,n+=e.y,l=Math.max(l,e.el.getAlignment());s/=i.objs.length,n/=i.objs.length;break;case d.CreateLine:i.parent.children.push(i.line);case d.MoveAnchorable:s=i.obj.x,n=i.obj.y,l=i.obj.el.getAlignment(),t=this._page.el.anchorCache;break}this._mover.reset(l,r,o,s,n,t)}),0)}onObjectDragged(e){let t,i=e.subject;switch(this._mover.updateDelta(e.dx/this._transform.k,e.dy/this._transform.k),i.type){case d.Move:for(let e of i.objs)t=e.fakePositionSetByUser(a.W_.True),e.moveBy(this._mover.dx,this._mover.dy,t);break;case d.CreateLine:i.obj.el.moveBy(this._mover.dx,this._mover.dy);case d.MoveAnchorable:this.onHoverSubject(e.x,e.y,i.obj.el.getCursor()),t=i.obj.fakePositionSetByUser(a.W_.True),i.obj.moveBy(this._mover.dx,this._mover.dy,t);break}this.render()}onObjectDragEnded(e){this._layoutLocked=!1;let t=e.subject,i=this._mover.odx,r=this._mover.ody;switch(t.type){case d.Move:if(!i&&!r)return;let e=t.objs.map((e=>e.el));this.emit("object-move",e,i,r);break;case d.MoveAnchorable:if(!i&&!r)return;if(this._mover.anchor){let e=this._mover.anchor,i=t.obj.el;this.emit("object-attach",i,e)}else if(t.obj.el.isAttached()){let e=t.obj.el;this.emit("object-detach",e,i,r)}else{let e=[t.obj.el];this.emit("object-move",e,i,r)}break;case d.CreateLine:if((i||r)&&t.anchor!==this._mover.anchor){let e=t.line.el,i=t.parent.el,r=t.anchor,o=this._mover.anchor;this.emit("line-create",e,i,r,o)}else this.updateView(),this.render();break}}onCanvasZoom(e){var t;this._transform.k!==e.transform.k&&(clearTimeout(this._ztoId),this._ztoId=setTimeout((()=>{let e=this._transform.k*this._display.ssaaScale;this._rasterCache.getScale()!==e&&(this._rasterCache.setScale(e),this.render())}),p.RASTER_CACHE_UPDATE_DELAY)),this._transform=e.transform,this.updateViewportBounds(),null===(t=this._context)||void 0===t||t.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),null===e.sourceEvent?0===this._rafId&&this.executeRenderPipeline():this.render()}onCanvasZoomEnd(){this.emit("view-transform",this._transform.x,this._transform.y,this._transform.k,this._elWidth,this._elHeight)}onCanvasResize(e){var t,i,r;let o=e.clientWidth,s=e.clientHeight;this._transform.x+=(o-this._elWidth)/2,this._transform.y+=(s-this._elHeight)/2,this._elWidth=o,this._elHeight=s,null===(i=null===(t=this._canvas)||void 0===t?void 0:t.attr("width",this._elWidth))||void 0===i||i.attr("height",this._elHeight),this.updateViewportBounds(),null===(r=this._context)||void 0===r||r.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),this._context&&this.executeRenderPipeline()}updateViewportBounds(){let e=this._transform,t=p.VIEWPORT_PADDING;this._viewport.xMin=Math.round(e.invertX(-t)),this._viewport.xMax=Math.round(e.invertX(this._elWidth+t)),this._viewport.yMin=Math.round(e.invertY(-t)),this._viewport.yMax=Math.round(e.invertY(this._elHeight+t)),this._viewport.scale=e.k}setPage(e){this._page=e.createView(this._rasterCache),this._mover=new l(...e.grid)}updateView(){this._layoutLocked||this._page.updateView()}setCameraLocation(e,t=1e3){if(!this._canvas)return;let i=e.k,o=Math.round(this._elWidth/2-e.x*i),s=Math.round(this._elHeight/2-e.y*i);this._canvas.transition().duration(t).call(this._zoom.transform,r.CRH.translate(o,s).scale(i))}}p.VIEWPORT_PADDING=0,p.RASTER_CACHE_UPDATE_DELAY=100,function(e){e[e["Move"]=0]="Move",e[e["MoveAnchorable"]=1]="MoveAnchorable",e[e["CreateLine"]=2]="CreateLine"}(d||(d={}))},443:function(e,t,i){i.d(t,{h:function(){return r}});class r{constructor(){this._scale=1,this._cache=new Map}createRaster(e,t,i,r=0){let s=new o(t,i,r,this._scale);return this._cache.set(e,s),s}drawRaster(e,t,i,r){let o=this._cache.get(t);return!!o&&(e.drawImage(o.canvas,i-o.cx,r-o.cy,o.w,o.h),!0)}setScale(e){this._scale=e,this._cache.clear()}getScale(){return this._scale}}class o{constructor(e,t,i,r){let o=i<<1;this.canvas=document.createElement("canvas"),this.canvas.width=Math.round((e+o)*r),this.canvas.height=Math.round((t+o)*r),this.context=this.canvas.getContext("2d"),this.context.setTransform(r,0,0,r,0,0),this.h=t+o,this.w=e+o,this.cx=Math.round(this.w/2),this.cy=Math.round(this.h/2),this.p=i}set fillStyle(e){this.context.fillStyle=e}set font(e){this.context.font=e}set lineWidth(e){this.context.lineWidth=e}set strokeStyle(e){this.context.strokeStyle=e}set textBaseline(e){this.context.textBaseline=e}beginPath(){this.context.beginPath()}closePath(){this.context.closePath()}moveTo(e,t){this.context.moveTo(this.p+e,this.p+t)}lineTo(e,t){this.context.lineTo(this.p+e,this.p+t)}stroke(){this.context.stroke()}fill(){this.context.fill()}fillText(e,t,i){this.context.fillText(e,t,i)}drawRect(e,t,i,r,o,s=1){e+=this.p+s/2,t+=this.p+s/2,i-=s,r-=s,o="number"===typeof o?{tl:o,tr:o,br:o,bl:o}:Object.assign({tl:0,tr:0,br:0,bl:0},o);let n=this.context;n.beginPath(),n.moveTo(e+o.tl,t),n.lineTo(e+i-o.tr,t),n.quadraticCurveTo(e+i,t,e+i,t+o.tr),n.lineTo(e+i,t+r-o.br),n.quadraticCurveTo(e+i,t+r,e+i-o.br,t+r),n.lineTo(e+o.bl,t+r),n.quadraticCurveTo(e,t+r,e,t+r-o.bl),n.lineTo(e,t+o.tl),n.quadraticCurveTo(e,t,e+o.tl,t),n.closePath()}}},916:function(e,t,i){i.d(t,{N:function(){return r}});class r{constructor(){this.xMin=0,this.yMin=0,this.xMax=0,this.yMax=0,this.scale=1}}},823:function(e,t,i){i.d(t,{C:function(){return s},w:function(){return r}});const r={Blue:{fill_color:"#637bc9",stroke_color:"#708ce6"},Orange:{fill_color:"#c26130",stroke_color:"#e57339"},Green:{fill_color:"#2a9642",stroke_color:"#32b34e"},Red:{fill_color:"#c94040",stroke_color:"#dd5050"},Gray:{fill_color:"#737373",stroke_color:"#8c8c8c"}};class o{constructor(e){this._theme=e}AnchorPoint(e={}){return this.merge(e,structuredClone(this._theme.anchor))}BranchBlock(e={}){return this.merge(e,structuredClone(this._theme.branch))}DictionaryBlock(e={}){return this.merge(e,structuredClone(this._theme.dictionary))}Line(e={}){return this.merge(e,structuredClone(this._theme.line))}LineEnding(e={}){return this.merge(e,structuredClone(this._theme.lineEnding))}LineHandle(e={}){return this.merge(e,structuredClone(this._theme.lineHandle))}TextBlock(e={}){return this.merge(e,structuredClone(this._theme.text))}Page(e={}){return this.merge(e,structuredClone(this._theme.page))}merge(e,t){for(let i in e){if(!(i in t))throw new Error("Objects do not overlap.");if(typeof e[i]!==typeof t[i])throw new Error(`'${i}' has mismatching types.`);"object"===typeof e[i]?this.merge(e[i],t[i]):t[i]=e[i]}return t}}const s=new o({anchor:{color:"rgba(255, 255, 255, 0.25)"},branch:{max_width:320,head:{fill_color:"#000",stroke_color:"#000",one_title:{title:{font:{family:"Inter",size:"10.5pt",weight:800},color:"#d8d8d8"}},two_title:{title:{font:{family:"Inter",size:"8pt",weight:600},color:"#d8d8d8",padding:8},subtitle:{font:{family:"Inter",size:"13pt",weight:800},color:"#d8d8d8",line_height:23}},vertical_padding:14},body:{fill_color:"#1f1f1f",stroke_color:"#383838",field_name:{font:{family:"Inter",size:"8pt",weight:600},color:"#b3b3b3",padding:12},field_value:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",line_height:20,padding:22},vertical_padding:18},branch:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",vertical_padding:12,horizontal_padding:30},select_outline:{color:"#e6d845",padding:4,border_radius:9},anchor_markers:{color:"#ffffff",size:3},border_radius:5,horizontal_padding:20},dictionary:{max_width:320,head:{fill_color:"#000",stroke_color:"#000",one_title:{title:{font:{family:"Inter",size:"10.5pt",weight:800},color:"#d8d8d8"}},two_title:{title:{font:{family:"Inter",size:"8pt",weight:600},color:"#d8d8d8",padding:8},subtitle:{font:{family:"Inter",size:"13pt",weight:800},color:"#d8d8d8",line_height:23}},vertical_padding:14},body:{fill_color:"#1f1f1f",stroke_color:"#383838",field_name:{font:{family:"Inter",size:"8pt",weight:600},color:"#b3b3b3",padding:12},field_value:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",line_height:20,padding:22},vertical_padding:18},select_outline:{color:"#e6d845",padding:4,border_radius:9},anchor_markers:{color:"#ffffff",size:3},border_radius:5,horizontal_padding:20},line:{width:5,cap_size:16,color:"#646464",select_color:"#646464"},lineEnding:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5},lineHandle:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5},text:{max_width:320,fill_color:"#000",stroke_color:"#000",text:{font:{family:"Inter",size:"14pt",weight:800},color:"#d8d8d8",line_height:24},border_radius:13,select_outline:{color:"#e6d845",padding:4,border_radius:19},anchor_markers:{color:"#ffffff",size:3},vertical_padding:18,horizontal_padding:20},page:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}})},772:function(e,t,i){i.d(t,{W1:function(){return n},GD:function(){return d},Cs:function(){return a.C},m1:function(){return y},Sl:function(){return r},VS:function(){return s},WY:function(){return o}});class r extends Error{constructor(e){super(e)}}var o,s,n;(function(e){e[e["AnchorPoint"]=0]="AnchorPoint",e[e["BranchBlock"]=1]="BranchBlock",e[e["DictionaryBlock"]=2]="DictionaryBlock",e[e["LineEndingPoint"]=3]="LineEndingPoint",e[e["LineHandlePoint"]=4]="LineHandlePoint",e[e["LineHorizontalElbow"]=5]="LineHorizontalElbow",e[e["LineVerticalElbow"]=6]="LineVerticalElbow",e[e["Page"]=7]="Page",e[e["TextBlock"]=8]="TextBlock"})(o||(o={})),function(e){e[e["None"]=0]="None",e[e["Node"]=4096]="Node",e[e["Edge"]=8192]="Edge",e[e["LinkSource"]=12288]="LinkSource",e[e["LinkTarget"]=16384]="LinkTarget"}(s||(s={})),function(e){e[e["DEG_0"]=0]="DEG_0",e[e["DEG_90"]=1]="DEG_90"}(n||(n={}));var a=i(823),l=i(405);const c="@__builtin__",d=[{id:`${c}page`,type:o.Page,role:s.None,grid:[10,10],properties:{name:{type:l.uS.String,value:"Untitled Document",is_primary:!0}},style:a.C.Page()},{id:`${c}anchor`,type:o.AnchorPoint,role:s.None,radius:10,line_templates:{[n.DEG_0]:`${c}line_horizontal_elbow`,[n.DEG_90]:`${c}line_vertical_elbow`},style:a.C.AnchorPoint()},{id:`${c}line_handle`,type:o.LineHandlePoint,role:s.None,style:a.C.LineHandle()},{id:`${c}line_source`,type:o.LineEndingPoint,role:s.LinkSource,style:a.C.LineEnding()},{id:`${c}line_target`,type:o.LineEndingPoint,role:s.LinkTarget,style:a.C.LineEnding()},{id:`${c}line_horizontal_elbow`,namespace:"horizontal_elbow",type:o.LineHorizontalElbow,role:s.Edge,hitbox_width:20,line_handle_template:`${c}line_handle`,line_ending_template:{source:`${c}line_source`,target:`${c}line_target`},style:a.C.Line()},{id:`${c}line_vertical_elbow`,namespace:"vertical_elbow",type:o.LineVerticalElbow,role:s.Edge,hitbox_width:20,line_handle_template:`${c}line_handle`,line_ending_template:{source:`${c}line_source`,target:`${c}line_target`},style:a.C.Line()}];var u=i(655),h=i(902),p=i(184);class y{constructor(e,t,i){this.schema=e,this.templates=t,this._namespace=i}static createDummy(){return new this({page_template:"",templates:[]},new Map,new Map([["@",new Map]]))}static create(e){return(0,u.mG)(this,void 0,void 0,(function*(){let t=structuredClone(e),i=new Set;for(let e of t.templates){if(i.has(e.id))throw new r(`Template '${e.id}' can only be defined once.`);i.add(e.id)}let o=new Map;for(let e of[...d,...t.templates])o.set(e.id,e);let s=new Map([["@",new Map]]);for(let e of o.values()){if(void 0===e.namespace)continue;let t=["@",...e.namespace.split(".")];for(var n=0,a=s;n<t.length-1;n++)a.has(t[n])||a.set(t[n],new Map),a=a.get(t[n]);if(a.has(t[n]))throw new r(`Namespace '${t.join(".")}' is already defined.`);a.set(t[n],e.id)}let l=[];for(let e of o.values())l=l.concat(this.getFontDescriptorsFromTemplate(e));yield h.TI.loadFonts(l);for(let e of o.values())this.swapFontDescriptorsWithFonts(e);return new this(e,o,s)}))}getTemplate(e){return this.templates.get(e)}getNamespace(){return this._namespace}createObject(e){let t,i;e instanceof Object?(t=e.template,i=e):t=e;let s=this.templates.get(t);if(!s)throw new r(`Template '${t}' does not exist.`);switch(s.type){case o.Page:return new p.LM(this,s,i);case o.AnchorPoint:return new p.hU(this,s,i);case o.BranchBlock:return new p.bY(this,s,i);case o.DictionaryBlock:return new p.cg(this,s,i);case o.LineEndingPoint:return new p.uk(this,s,i);case o.LineHandlePoint:return new p.x2(this,s,i);case o.LineVerticalElbow:return new p.Kp(this,s,i);case o.LineHorizontalElbow:return new p.iN(this,s,i);case o.TextBlock:return new p.Si(this,s,i);default:throw new r(`Unknown template type: '${s.type}'.`)}}cloneObjects(...e){let t=new Map,i=new Map,r=e.map((e=>this.cloneObject(e,t,i)));for(let[o,s]of i)for(let e of s){let i=t.get(e);i&&o.addChild(i)}return r}cloneObject(e,t,i){if(e instanceof p.Bl){let r=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:[]}));return t.set(e.id,r),i.set(r,e.children.map((e=>e.id))),r}let r=[];for(let s of e.children)r.push(this.cloneObject(s,t,i));let o=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:r}));return t.set(e.id,o),o}static getFontDescriptorsFromTemplate(e){let t=[];switch(e.type){case o.BranchBlock:let{style:i}=e;t.push(i.branch.font);case o.DictionaryBlock:let{style:r}=e;t=t.concat([r.head.one_title.title.font,r.head.two_title.title.font,r.head.two_title.subtitle.font,r.body.field_name.font,r.body.field_value.font]);break;case o.TextBlock:let{style:s}=e;t.push(s.text.font);break;default:break}return t}static swapFontDescriptorsWithFonts(e){let t=h.TI.getFont.bind(h.TI);switch(e.type){case o.BranchBlock:let{branch:i}=e.style;i.font=t(i.font);case o.DictionaryBlock:let{head:r,body:s}=e.style;r.one_title.title.font=t(r.one_title.title.font),r.two_title.title.font=t(r.two_title.title.font),r.two_title.subtitle.font=t(r.two_title.subtitle.font),s.field_name.font=t(s.field_name.font),s.field_value.font=t(s.field_value.font);break;case o.TextBlock:let{text:n}=e.style;n.font=t(n.font);break;default:break}}getSchema(){let e=[];for(let t of this.templates.values()){let i=JSON.stringify(t,((e,t)=>t instanceof h.Zx?t.descriptor:t));e.push(JSON.parse(i))}return{page_template:this.schema.page_template,templates:e}}}},184:function(e,t,i){i.d(t,{hU:function(){return w},bY:function(){return k},Bl:function(){return d},Mb:function(){return u},eq:function(){return y},wg:function(){return n},W_:function(){return a},cg:function(){return S},X_:function(){return c},uk:function(){return g},x2:function(){return m},iN:function(){return b},Kp:function(){return x},LM:function(){return D},Si:function(){return M}});var r=i(405),o=i(772),s=i(341);class n{constructor(e,t,i){var n,a,c,d,u;if(this.id=null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:crypto.randomUUID(),this.attrs=null!==(a=null===i||void 0===i?void 0:i.attrs)&&void 0!==a?a:s.W_.False,this.setAlignment(s.v2.Free),this.setCursor(s.CF.Default),this.setInheritAlignment(s.MN.True),this.setSemanticRole(o.VS.None),this.children=[],this.factory=e,this.template=t,this.boundingBox=new l,this.boundingBox.xMid=null!==(c=null===i||void 0===i?void 0:i.x)&&void 0!==c?c:0,this.boundingBox.yMid=null!==(d=null===i||void 0===i?void 0:i.y)&&void 0!==d?d:0,this.props=new r.aO(this,null!==(u=null===t||void 0===t?void 0:t.properties)&&void 0!==u?u:{},null===i||void 0===i?void 0:i.properties),null===i||void 0===i?void 0:i.children)for(let r=0;r<i.children.length;r++)this.addChild(i.children[r],r,!1)}get root(){let e=this;while(e.parent)e=e.parent;return e}*getSubtree(e){let t=new Set([this.id]),i=[this];while(0!=i.length){let r=i.shift();if(e&&!e(r)||(yield r),!(r instanceof d))for(let e of r.children)t.has(e.id)||(t.add(e.id),i.push(e))}}addChild(e,t=this.children.length,i=!0){if(-1!==this.children.indexOf(e))throw new a(`Object already has a child with the id '${e.id}'.`,this);e.parent=this,this.children.splice(t,0,e),i&&this.updateLayout(c.ChildAdded)}removeChild(e,t=!0,i=!0){let r=this.children.indexOf(e);if(-1===r)throw new a(`'${e.id}' is not a child of '${this.id}'.`,e);if(i&&e.hasExternalAttachments())throw new a(`'${e.id}' still maintains external attachments.`,e);e.parent=void 0,this.children.splice(r,1),t&&this.updateLayout(c.ChildDeleted)}reorderChild(e,t){let i=this.children.findIndex((t=>t.id===e)),r=this.children[i];if(!r)throw new a(`Object has no child with the id '${e}'.`);this.children.splice(i,1),this.children.splice(t,0,r)}hasExternalAttachments(){let e=new Map;for(let t of this.getSubtree())(t instanceof d||t instanceof u)&&e.set(t.id,t);for(let t of e.values())if(t instanceof u){if(t.isAttached()&&!e.has(t.anchor.id))return!0}else if(t instanceof d)for(let i of t.children)if(!e.has(i.id))return!0;return!1}getIndexInParent(){var e,t;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}getObjectAt(e,t){let i,r;for(let o=this.children.length-1;0<=o;o--){let n=this.children[o];if(!(n instanceof u&&n.isAttached())&&(r=n.getObjectAt(e,t),r&&(!i||r.hasHigherPriorityThan(i))&&(i=r,i.getPriority()===s.UL.High)))break}return i}moveTo(e,t,i=!0){this.moveBy(e-this.boundingBox.xMid,t-this.boundingBox.yMid,i)}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;let r=!0;for(let o of this.children)o instanceof u&&o.isAttached()||(r=!1,o.moveBy(e,t));r&&this.updateLayout(c.Movement,i)}recalculateLayout(){let e=!0;for(let t of this.children)e=!1,t.recalculateLayout();e&&this.updateLayout(c.Initialization)}updateLayout(e,t=!0){var i;let r=this.boundingBox;r.xMin=1/0,r.yMin=1/0,r.xMax=-1/0,r.yMax=-1/0;let o=s.v2.Free;for(let s of this.children)r.xMin=Math.min(r.xMin,s.boundingBox.xMin),r.yMin=Math.min(r.yMin,s.boundingBox.yMin),r.xMax=Math.max(r.xMax,s.boundingBox.xMax),r.yMax=Math.max(r.yMax,s.boundingBox.yMax),o=Math.max(o,s.getAlignment());r.xMid=Math.floor((r.xMin+r.xMax)/2),r.yMid=Math.floor((r.yMin+r.yMax)/2),this.isAlignmentInherited()&&this.setAlignment(o),t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}getAlignment(e=this.attrs){return e&s.PM}getCursor(e=this.attrs){return e&s.E7}isHovered(e=this.attrs){return(e&s.g_)!==s.TM.Off}isHoveredOrSelected(e=this.attrs){return 0<(e&(s.Oh|s.g_))}isAlignmentInherited(e=this.attrs){return(e&s.X6)===s.MN.True}hasUserSetPosition(e=this.attrs){return(e&s.f2)===s.W_.True}getPositionSetByUser(e=this.attrs){return e&s.f2}getPriority(e=this.attrs){return e&s.KQ}hasHigherPriorityThan(e){return this.getPriority()>e.getPriority()}isSelected(e=this.attrs){return(e&s.Oh)===s.Ph.True}getSemanticRole(e=this.attrs){return e&s.Xi}hasRole(e,t=this.attrs){return(t&s.Xi)===e}setAlignment(e){this.attrs=this.attrs&~s.PM|e}setCursor(e){this.attrs=this.attrs&~s.E7|e}setHover(e){this.attrs=this.attrs&~s.g_|e}setInheritAlignment(e){this.attrs=this.attrs&~s.X6|e}setPositionSetByUser(e){this.attrs=this.attrs&~s.f2|e}setPriority(e){this.attrs=this.attrs&~s.KQ|e}setSelect(e){this.attrs=this.attrs&~s.Oh|e}setSemanticRole(e){this.attrs=this.attrs&~s.Xi|e}toExport(){return{id:this.id,x:this.boundingBox.xMid,y:this.boundingBox.yMid,attrs:this.getPositionSetByUser(),template:this.template.id,children:this.children.map((e=>e.id)),properties:this.props.toRawValue()}}}class a extends Error{constructor(e,t){super(e),this.subject=t}}class l{constructor(){this.xMin=0,this.yMin=0,this.xMid=0,this.yMid=0,this.xMax=0,this.yMax=0}}const c={Initialization:1,Movement:2,ChildAdded:4,ChildDeleted:8,PropUpdate:16};class d extends n{constructor(e,t,i){var r;super(e,t,i),this.radius=t.radius,this.template=t,this.lineTemplates=t.line_templates,this.angle=null!==(r=null===i||void 0===i?void 0:i.angle)&&void 0!==r?r:o.W1.DEG_0}addChild(e,t=this.children.length){if(!(e instanceof u)){let t=d.name;throw new a(`Child must be of type '${t}.'`,e)}if(e.isAttached())throw new a(`'${e.id}' is already anchored.`,e);e.anchor=this,this.children.splice(t,0,e)}removeChild(e){let t=this.children.indexOf(e);if(-1===t)throw new a(`'${e.id}' is not attached to the '${this.id}'.`,e);e.anchor=void 0,this.children.splice(t,1)}hasAttachments(){return 0<this.children.length}getObjectAt(e,t){let i,r;for(let l=this.children.length-1;0<=l;l--)if(r=this.children[l].getObjectAt(e,t),r&&(!i||r.hasHigherPriorityThan(i))&&(i=r,i.getPriority()===s.UL.High))break;let o=this.radius,n=e-this.boundingBox.xMid,a=t-this.boundingBox.yMid;return i&&i.getPriority()>s.UL.Normal?i:n*n+a*a<o*o?this:void 0}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;for(let r of this.children)r.isAttached(this)?r.moveTo(this.boundingBox.xMid,this.boundingBox.yMid):console.warn(`'${r.id}' incorrectly attached to anchor.`);this.updateLayout(c.Movement,i)}updateLayout(e,t=!0){var i;let r=this.boundingBox;r.xMin=r.xMid-this.radius,r.yMin=r.yMid-this.radius,r.xMax=r.xMid+this.radius,r.yMax=r.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}toExport(){return Object.assign(Object.assign({},super.toExport()),{angle:this.angle})}makeLine(){let e=this.lineTemplates[this.angle],t=this.factory.createObject(e);if(t instanceof y)return t;throw new a(`Template '${e}' is not a line.`,t)}}class u extends n{constructor(e,t,i){super(e,t,i),this.anchor=void 0}addChild(){throw new a("Anchorable objects cannot have children.",this)}removeChild(){throw new a("Anchorable objects cannot have children.",this)}reorderChild(){throw new a("Anchorable objects cannot be reordered.",this)}isAttached(e){return e?this.anchor===e:void 0!==this.anchor}getIndexInAnchor(){var e,t;return null!==(t=null===(e=this.anchor)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}}class h extends u{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,r=!1){var o;r?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.id,e,t,i)}}class p extends n{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,r=!1){var o;r?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.id,e,t,i)}}class y extends n{constructor(e,t,i){super(e,t,i),this.style=t.style,this.template=t,this.hitboxWidth=t.hitbox_width}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}addChild(e,t=this.children.length,i=!0){if(!(e instanceof h||e instanceof p)){let t=h.name,i=p.name;throw new a(`Child must be of type '${t}' or '${i}.'`,e)}super.addChild(e,t,i)}reorderChild(e,t,i=!0){throw new a("Line objects cannot be reordered.",this)}isAnchored(){for(let e of this.children)if(e instanceof h&&e.isAttached())return!0;return!1}setSelect(e){super.setSelect(e);let t=this.isSelected()?s.UL.High:s.UL.Normal;for(let i of this.children)i.setPriority(t)}}class _ extends n{constructor(e,t,i){super(e,t,i),this.anchorCache=[],this._objectCache=new Map([[this.id,this]])}lookup(e){return this._objectCache.get(e)}updateLayout(e){let{ChildAdded:t,ChildDeleted:i,Initialization:r}=c;if(super.updateLayout(e),e&(r|t|i)){this._objectCache.clear(),this.anchorCache.splice(0,this.anchorCache.length);for(let e of this.getSubtree())e instanceof d&&this.anchorCache.push(e),this._objectCache.set(e.id,e)}}}var f=i(878);class g extends h{constructor(e,t,i){super(e,t,i),this.setCursor(s.CF.Pointer),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,r=t-this.boundingBox.yMid,o=this.style.radius;return i*i+r*r<o*o?this:void 0}updateLayout(e,t=!0){var i;let r=this.boundingBox;r.xMin=r.xMid-this.style.radius,r.yMin=r.yMid-this.style.radius,r.xMax=r.xMid+this.style.radius,r.yMax=r.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new f.g6(this,e)}}class m extends p{constructor(e,t,i){super(e,t,i),this.setCursor(s.CF.Move),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,r=t-this.boundingBox.yMid,o=this.style.radius;return i*i+r*r<o*o?this:void 0}updateLayout(e,t=!0){var i;let r=this.boundingBox;r.xMin=r.xMid-this.style.radius,r.yMin=r.yMid-this.style.radius,r.xMax=r.xMid+this.style.radius,r.yMax=r.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new f.m6(this,e)}}var v=i(902);class b extends y{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(s.CF.Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,r=this.boundingBox.yMid,o=t.line_ending_template.source,s=t.line_handle_template,n=t.line_ending_template.target;this.addChild(e.createObject(o),0,!1),this.addChild(e.createObject(s),1,!1),this.addChild(e.createObject(n),2,!1);for(let e of this.children)e.moveTo(i,r);this.children[0].moveBy(-100,50),this.children[2].moveBy(100,-50)}this.updateLayout(c.Initialization)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let r=0;r<this.hitboxes.length;r++)if((0,v.mI)(e,t,this.hitboxes[r]))return 1===r?this.children[r]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if((0,v.mI)(e,t,i))return this}}moveChild(e,t,i,r=!0){let o=this.children.find((t=>t.id===e));if(!o)return;o instanceof g&&o.moveBy(t,i,r,!0);let[s,n,a]=this.children,l=s.boundingBox.xMid,c=s.boundingBox.yMid,d=a.boundingBox.xMid,u=a.boundingBox.yMid,h=n.boundingBox.xMid,p=n.boundingBox.yMid,y=(l+d)/2-h,_=(c+u)/2-p;n.hasUserSetPosition()?o===n&&n.moveBy(t,0,r,!0):n.moveBy(y,0,r,!0),n.moveBy(0,_,r,!0)}updateLayout(e,t=!0){let[i,r,o]=this.children.map((e=>e.boundingBox)),n=this.hitboxWidth;this.hitboxes[0]=(0,v.h7)(i.xMid,i.yMid,r.xMid,i.yMid,n),this.hitboxes[1]=(0,v.h7)(r.xMid,i.yMid,r.xMid,o.yMid,n),this.hitboxes[2]=(0,v.h7)(r.xMid,o.yMid,o.xMid,o.yMid,n),this.children[1].setCursor(s.CF.Col_Resize),super.updateLayout(e,t)}createView(e){return new f.wC(this,e)}}class x extends y{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(s.CF.Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,r=this.boundingBox.yMid,o=t.line_ending_template.source,s=t.line_handle_template,n=t.line_ending_template.target;this.addChild(e.createObject(o),0,!1),this.addChild(e.createObject(s),1,!1),this.addChild(e.createObject(n),2,!1);for(let e of this.children)e.moveTo(i,r);this.children[0].moveBy(-50,100),this.children[2].moveBy(50,-100)}this.updateLayout(c.Initialization)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let r=0;r<this.hitboxes.length;r++)if((0,v.mI)(e,t,this.hitboxes[r]))return 1===r?this.children[r]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if((0,v.mI)(e,t,i))return this}}moveChild(e,t,i,r=!0){let o=this.children.find((t=>t.id===e));if(!o)return;o instanceof g&&o.moveBy(t,i,r,!0);let[s,n,a]=this.children,l=s.boundingBox.xMid,c=s.boundingBox.yMid,d=a.boundingBox.xMid,u=a.boundingBox.yMid,h=n.boundingBox.xMid,p=n.boundingBox.yMid,y=(l+d)/2-h,_=(c+u)/2-p;n.hasUserSetPosition()?o===n&&n.moveBy(0,i,r,!0):n.moveBy(0,_,r,!0),n.moveBy(y,0,r,!0)}updateLayout(e,t=!0){let[i,r,o]=this.children.map((e=>e.boundingBox)),n=this.hitboxWidth;this.hitboxes[0]=(0,v.h7)(i.xMid,i.yMid,i.xMid,r.yMid,n),this.hitboxes[1]=(0,v.h7)(i.xMid,r.yMid,o.xMid,r.yMid,n),this.hitboxes[2]=(0,v.h7)(o.xMid,r.yMid,o.xMid,o.yMid,n),this.children[1].setCursor(s.CF.Row_Resize),super.updateLayout(e,t)}createView(e){return new f.xS(this,e)}}class w extends d{constructor(e,t,i){super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}updateLayout(e,t=!0){var i;let r=this.boundingBox;r.xMin=r.xMid-this.radius,r.yMin=r.yMid-this.radius,r.xMax=r.xMid+this.radius,r.yMax=r.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new f.pD(this,e)}}class S extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(s.MN.False),this.setAlignment(s.v2.Grid),this.setCursor(s.CF.Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i=t.anchor_template,r=[o.W1.DEG_90,o.W1.DEG_0];for(let t,o=0;o<12;o++)t=e.createObject(i),t.angle=r[Math.floor(o/3)%2],this.addChild(t,o,!1)}this.props.onUpdate((()=>{this.updateLayout(c.PropUpdate)})),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let r=this.boundingBox;return r.xMin<=e&&e<=r.xMax&&r.yMin<=t&&t<=r.yMax?this:void 0}updateLayout(e,t=!0){var i,r,o;let s=this.props.toHashValue(),n=this.layout.contentHash!==s,a=e&c.Initialization;if(a||n){let{max_width:t,head:o,body:n,horizontal_padding:a}=this.style,l=n.field_name,c=n.field_value,d=[],u=1,h=(0,v.Qs)(this.template.id).toLocaleUpperCase(),p=this.props.isDefined()?this.props.toString():"",y=""!==p,_=this.hasFields(),f=(y?o.two_title:o.one_title).title,g=t;g=Math.max(g,f.font.measureWidth(h));for(let e of this.props.value.keys())g=Math.max(g,n.field_name.font.measureWidth(e));let m=null,b=0,x=u+a,w=u+o.vertical_padding,S={font:f.font,color:f.color,text:[]};if(d.push(S),m=f.font.measure(h),b=Math.max(b,m.width),w+=m.ascent,S.text.push({x:x,y:w,t:h}),w+=m.descent+(null!==(i=f.padding)&&void 0!==i?i:0),y){let e=o.two_title.subtitle,t={font:e.font,color:e.color,text:[]};d.push(t);let i=e.font.wordWrap(p,g);m=e.font.measure(i[0]),b=Math.max(b,m.width),w+=m.ascent,t.text.push({x:x,y:w,t:i[0]});for(let r=1;r<i.length;r++)m=e.font.measure(i[r]),b=Math.max(b,m.width),w+=e.line_height,t.text.push({x:x,y:w,t:i[r]})}w+=o.vertical_padding+u;let k=Math.round(w);if(_){let e={font:l.font,color:l.color,text:[]},t={font:c.font,color:c.color,text:[]};d.push(e),d.push(t),w+=n.vertical_padding;for(let[i,o]of this.props.value){if(!o.isDefined())continue;if(null!==(r=o.descriptor.is_visible)&&void 0!==r&&!r)continue;if(i===this.props.primaryKey)continue;i=i.toLocaleUpperCase(),m=l.font.measure(i),b=Math.max(b,m.width),w+=m.ascent,e.text.push({x:x,y:w,t:i}),w+=m.descent+n.field_name.padding;let s=c.font.wordWrap(o.toString(),g);m=c.font.measure(s[0]),b=Math.max(b,m.width),w+=m.ascent,t.text.push({x:x,y:w,t:s[0]});for(let e=1;e<s.length;e++)m=c.font.measure(s[e]),b=Math.max(b,m.width),w+=c.line_height,t.text.push({x:x,y:w,t:s[e]});w+=n.field_value.padding}w-=n.field_value.padding,w+=n.vertical_padding}else w-=u;let M=Math.round(b+2*(a+u)),D=Math.round(w+u),j=this.boundingBox,C=Math.round(j.xMid-M/2),B=Math.round(j.yMid-D/2),P=Math.round(j.xMid+M/2),T=Math.round(j.yMid+D/2),O=(j.xMid-C)/2,E=(j.yMid-B)/2,L=[j.xMid-O,B,j.xMid,B,j.xMid+O,B,P,j.yMid-E,P,j.yMid,P,j.yMid+E,j.xMid+O,T,j.xMid,T,j.xMid-O,T,C,j.yMid+E,C,j.yMid,C,j.yMid-E];for(let e=0;e<L.length;e+=2)this.children[e/2].moveTo(L[e],L[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:s,dx:C-j.xMin,dy:B-j.yMin,width:M,height:D,headerHeight:k,text:d}}t&&(null===(o=this.parent)||void 0===o||o.updateLayout(e))}hasFields(){var e;for(let[t,i]of this.props.value)if(t!==this.props.primaryKey&&(null===(e=i.descriptor.is_visible)||void 0===e||e)&&i.isDefined())return!0;return!1}createView(e){return new f.p6(this,e)}}class k extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(s.MN.False),this.setAlignment(s.v2.Grid),this.setCursor(s.CF.Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i,r=t.anchor_template,s=[o.W1.DEG_0,o.W1.DEG_90];for(let t=0;t<9;t++)i=e.createObject(r),i.angle=s[Math.floor(t/3)%2],this.addChild(i,t,!1);for(let t of this.template.branches)i=e.createObject(t.anchor_template),i.angle=o.W1.DEG_90,this.addChild(i,this.children.length,!1)}this.props.onUpdate((()=>{this.updateLayout(c.PropUpdate)})),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let r=this.boundingBox;return r.xMin<=e&&e<=r.xMax&&r.yMin<=t&&t<=r.yMax?this:void 0}updateLayout(e,t=!0){var i,r,o;let s=this.props.toHashValue(),n=this.layout.contentHash!==s,a=e&c.Initialization;if(a||n){let{max_width:t,head:o,body:n,branch:a,horizontal_padding:l}=this.style,{branches:c}=this.template,d=n.field_name,u=n.field_value,h=[],p=[],y=1,_=(0,v.Qs)(this.template.id).toLocaleUpperCase(),f=this.props.isDefined()?this.props.toString():"",g=""!==f,m=this.hasFields(),b=(g?o.two_title:o.one_title).title,x=0;for(let e of c)x+=a.horizontal_padding,x+=a.font.measureWidth(e.text),x+=a.horizontal_padding+y;x-=y+2*l;let w=t;w=Math.max(w,b.font.measureWidth(_));for(let e of this.props.value.keys())w=Math.max(w,n.field_name.font.measureWidth(e));w=Math.max(w,x);let S=null,k=0,M=y+l,D=y+o.vertical_padding,j={font:b.font,color:b.color,text:[]};if(h.push(j),S=b.font.measure(_),k=Math.max(k,S.width),D+=S.ascent,j.text.push({x:M,y:D,t:_}),D+=S.descent+(null!==(i=b.padding)&&void 0!==i?i:0),g){let e=o.two_title.subtitle,t={font:e.font,color:e.color,text:[]};h.push(t);let i=e.font.wordWrap(f,w);S=e.font.measure(i[0]),k=Math.max(k,S.width),D+=S.ascent,t.text.push({x:M,y:D,t:i[0]});for(let r=1;r<i.length;r++)S=e.font.measure(i[r]),k=Math.max(k,S.width),D+=e.line_height,t.text.push({x:M,y:D,t:i[r]})}D+=o.vertical_padding+y;let C=Math.round(D);if(m){let e={font:d.font,color:d.color,text:[]},t={font:u.font,color:u.color,text:[]};h.push(e),h.push(t),D+=n.vertical_padding;for(let[i,o]of this.props.value){if(!o.isDefined())continue;if(null!==(r=o.descriptor.is_visible)&&void 0!==r&&!r)continue;if(i===this.props.primaryKey)continue;i=i.toLocaleUpperCase(),S=d.font.measure(i),k=Math.max(k,S.width),D+=S.ascent,e.text.push({x:M,y:D,t:i}),D+=S.descent+n.field_name.padding;let s=u.font.wordWrap(o.toString(),w);S=u.font.measure(s[0]),k=Math.max(k,S.width),D+=S.ascent,t.text.push({x:M,y:D,t:s[0]});for(let e=1;e<s.length;e++)S=u.font.measure(s[e]),k=Math.max(k,S.width),D+=u.line_height,t.text.push({x:M,y:D,t:s[e]});D+=n.field_value.padding}D-=n.field_value.padding,D+=n.vertical_padding}else D-=y;let B={font:a.font,color:a.color,text:[]};h.push(B),D+=y,k=Math.max(k,x)+2*l;let P,T,O=a.vertical_padding,E=y,L=c.map((e=>a.font.measure(e.text))),A=Math.max(...L.map((e=>e.ascent+e.descent)))+2*O,V=A/2,I=k/L.length/2;for(let e=0;e<L.length;e++)E+=I,B.text.push({x:Math.round(E-L[e].width/2),y:D+Math.round(V+L[e].ascent/2),t:c[e].text}),E+=I,P=Math.round(E)+.5,p.push({x0:P,y0:D,x1:P,y1:D+A});p.pop(),T=Math.round(D)-.5,D+=A;let H=Math.round(k+2*y),F=Math.round(D+y);p.push({x0:0,y0:T,x1:H,y1:T});let N=this.boundingBox,R=Math.round(N.xMid-H/2),z=Math.round(N.yMid-F/2),W=Math.round(N.xMid+H/2),$=Math.round(N.yMid+F/2),Y=(N.xMid-R)/2,q=(N.yMid-z)/2,G=[R,N.yMid+q,R,N.yMid,R,N.yMid-q,N.xMid-Y,z,N.xMid,z,N.xMid+Y,z,W,N.yMid-q,W,N.yMid,W,N.yMid+q];for(let e=0;e<G.length;e+=2)this.children[e/2].moveTo(G[e],G[e+1],!1);E=R+y;for(let e=9;e<this.children.length;e++)E+=I,this.children[e].moveTo(Math.round(E),$,!1),E+=I;super.updateLayout(e,!1),this.layout={contentHash:s,dx:R-N.xMin,dy:z-N.yMin,width:H,height:F,headerHeight:C,text:h,lines:p}}t&&(null===(o=this.parent)||void 0===o||o.updateLayout(e))}hasFields(){var e;for(let[t,i]of this.props.value)if(t!==this.props.primaryKey&&(null===(e=i.descriptor.is_visible)||void 0===e||e)&&i.isDefined())return!0;return!1}createView(e){return new f.Zv(this,e)}}class M extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(s.MN.False),this.setAlignment(s.v2.Grid),this.setCursor(s.CF.Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i=t.anchor_template,r=[o.W1.DEG_90,o.W1.DEG_0];for(let t,o=0;o<12;o++)t=e.createObject(i),t.angle=r[Math.floor(o/3)%2],this.addChild(t,o,!1)}this.props.onUpdate((()=>{this.updateLayout(c.PropUpdate)})),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let r=this.boundingBox;return r.xMin<=e&&e<=r.xMax&&r.yMin<=t&&t<=r.yMax?this:void 0}updateLayout(e,t=!0){var i;let r=(0,v.x_)(this.props.toString()),o=this.layout.contentHash!==r,s=e&c.Initialization;if(s||o){let{max_width:t,text:i,vertical_padding:o,horizontal_padding:s}=this.style,n=1,a=[],l=i.font.wordWrap(this.props.toString(),t),c=i.font.measure(l[0]),d=c.width,u=n+s,h=n+o+c.ascent;a.push({x:u,y:h,t:l[0]});for(let e=1;e<l.length;e++)c=i.font.measure(l[e]),d=Math.max(d,c.width),h+=i.line_height,a.push({x:u,y:h,t:l[e]});h+=o+n,u+=d+u;let p=Math.round(u),y=Math.round(h),_=this.boundingBox,f=Math.round(_.xMid-p/2),g=Math.round(_.yMid-y/2),m=Math.round(_.xMid+p/2),v=Math.round(_.yMid+y/2),b=(_.xMid-f)/2,x=(_.yMid-g)/2,w=[_.xMid-b,g,_.xMid,g,_.xMid+b,g,m,_.yMid-x,m,_.yMid,m,_.yMid+x,_.xMid+b,v,_.xMid,v,_.xMid-b,v,f,_.yMid+x,f,_.yMid,f,_.yMid-x];for(let e=0;e<w.length;e+=2)this.children[e/2].moveTo(w[e],w[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:r,dx:f-_.xMin,dy:g-_.yMin,width:p,height:y,text:a}}t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new f.ZE(this,e)}}class D extends _{constructor(e,t,i){super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.grid=t.grid,this.style=t.style,this.updateLayout(c.Initialization)}static createDummy(){return new this(o.m1.createDummy(),{id:"",type:o.WY.Page,role:o.VS.None,grid:[10,10],style:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}})}createView(e){return new f.B4(this,e)}}},878:function(e,t,i){i.d(t,{pD:function(){return f},Zv:function(){return m},CT:function(){return s},ib:function(){return n},ZG:function(){return a},SY:function(){return c},gy:function(){return o},rh:function(){return d},p6:function(){return g},g6:function(){return u},m6:function(){return h},wC:function(){return y},xS:function(){return _},B4:function(){return b},ZE:function(){return v}});var r=i(341);class o{constructor(e,t){this.el=e,this.x=e.boundingBox.xMid,this.y=e.boundingBox.yMid,this.parent=void 0,this.children=[],this._rasterCache=t}*getSubtree(e){let t=new Set([this.el.id]),i=[this];while(0!=i.length){let r=i.shift();if(e&&!e(r)||(yield r),!(r instanceof s))for(let e of r.children)t.has(e.el.id)||(t.add(e.el.id),i.push(e))}}moveTo(e,t,i){this.moveBy(e-this.x,t-this.y)}moveBy(e,t,i){this.x+=e,this.y+=t;for(let r of this.children)r instanceof n&&r.el.isAttached()||r.moveBy(e,t)}renderTo(e,t,i=0,r=0,o){if(this.isVisible(t))for(let s of this.children)s.renderTo(e,t,i,r)}renderDebugTo(e,t){if(!this.isVisible(t))return;for(let r of this.children)r.renderDebugTo(e,t);let i=this.el.boundingBox;e.beginPath(),e.moveTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.stroke()}isVisible(e){let{xMin:t,yMin:i,xMax:r,yMax:o}=this.el.boundingBox;return e.xMin<=r&&e.xMax>=t&&e.yMin<=o&&e.yMax>=i}updateView(){let e=new Array(this.el.children.length);for(let t=0;t<e.length;t++){let i=this.el.children[t].id,r=this.children.find((e=>e.el.id===i));e[t]=null!==r&&void 0!==r?r:this.el.children[t].createView(this._rasterCache),e[t].parent=this,e[t].updateView()}return this.children=e,this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}fakeAlignment(e){return this.el.attrs&~r.PM|e}fakeCursor(e){return this.el.attrs&~r.E7|e}fakeHover(e){return this.el.attrs&~r.g_|e}fakeInheritAlignment(e){return this.el.attrs&~r.X6|e}fakePositionSetByUser(e){return this.el.attrs&~r.f2|e}fakePriority(e){return this.el.attrs&~r.KQ|e}fakeSelect(e){return this.el.attrs&~r.Oh|e}}class s extends o{constructor(e,t){super(e,t),this.children=[],this.el=e}moveBy(e,t,i){this.x+=e,this.y+=t;for(let r of this.children)r.el.isAttached(this.el)?r.moveTo(this.x,this.y):console.warn(`'${r.el.id}' incorrectly attached to anchor.`)}updateView(){return this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}}class n extends o{constructor(e,t){super(e,t),this.el=e}}class a extends n{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,r=!1){var o;r?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.el.id,e,t,i)}}class l extends o{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,r=!1){var o;r?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.el.id,e,t,i)}}class c extends o{constructor(e,t){super(e,t),this.el=e,this.children=[]}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}}class d extends o{constructor(e,t){super(e,t),this.el=e,this._objectCache=new Map}renderDebugTo(e,t){e.save(),e.lineWidth=1,e.fillStyle="#00ff00",e.strokeStyle="#ffffff",e.setLineDash([2,2]),super.renderDebugTo(e,t),e.restore()}updateView(){super.updateView(),this._objectCache.clear();for(let e of this.getSubtree())this._objectCache.set(e.el.id,e);for(let e of this.el.anchorCache){let t=this.lookup(e.id);t.children=new Array(e.children.length);for(let i=0;i<t.children.length;i++){let r=e.children[i];t.children[i]=this.lookup(r.id),t.children[i].anchor=t}}return this}lookup(e){return this._objectCache.get(e)}}class u extends a{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,r=0,o){let{radius:s,fill_color:n,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=n,e.lineWidth=l,e.strokeStyle=a,e.beginPath(),e.arc(this.x,this.y,s,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}class h extends l{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,r=0,o){let{radius:s,fill_color:n,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=n,e.lineWidth=l,e.strokeStyle=a;let c=l%2?.5:0;e.beginPath(),e.arc(this.x,this.y,s+c,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}var p=i(902);class y extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,r){let o=this.children.find((t=>t.el.id===e));if(!o)return;o instanceof a&&o.moveBy(t,i,void 0,!0);let[s,n,l]=this.children,c=(s.x+l.x)/2-n.x,d=(s.y+l.y)/2-n.y;n.el.hasUserSetPosition(o===n?r:void 0)?o===n&&n.moveBy(t,0,void 0,!0):n.moveBy(c,0,void 0,!0),n.moveBy(0,d,void 0,!0)}renderTo(e,t,i=0,o=0,s){if(!this.isVisible(t))return;let n,{children:a}=this,{cap_size:l,width:c,color:d,select_color:u}=this.el.style;switch(e.lineWidth=c,this.el.attrs&r.Oh){case r.Ph.True:n=u;break;case r.Ph.False:default:n=d;break}e.fillStyle=n,e.strokeStyle=n;let h=c%2?.5:0,y=Math.sign(a[2].x-a[1].x)*(l>>1);e.beginPath(),e.moveTo(a[0].x,a[0].y+h),e.lineTo(a[1].x+h,a[0].y+h),e.lineTo(a[1].x+h,a[2].y+h),e.lineTo(a[2].x-y,a[2].y+h),e.stroke(),(0,p.$Q)(e,a[1].x,a[2].y+h,a[2].x,a[2].y+h,l),e.fill(),this.el.isSelected(s)&&super.renderTo(e,t,i,o)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,r=2*Math.PI;e.beginPath();for(let o of this.el.hitboxes)for(let t=0;t<o.length;t+=2)e.moveTo(o[t]+i,o[t+1]),e.arc(o[t],o[t+1],i,0,r);e.fill(),super.renderDebugTo(e,t)}}class _ extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,r){let o=this.children.find((t=>t.el.id===e));if(!o)return;o instanceof a&&o.moveBy(t,i,void 0,!0);let[s,n,l]=this.children,c=(s.x+l.x)/2-n.x,d=(s.y+l.y)/2-n.y;n.el.hasUserSetPosition(o===n?r:void 0)?o===n&&n.moveBy(0,i,void 0,!0):n.moveBy(0,d,void 0,!0),n.moveBy(c,0,void 0,!0)}renderTo(e,t,i=0,o=0,s){if(!this.isVisible(t))return;let n,{children:a}=this,{cap_size:l,width:c,color:d,select_color:u}=this.el.style;switch(e.lineWidth=c,this.el.attrs&r.Oh){case r.Ph.True:n=u;break;case r.Ph.False:default:n=d;break}e.fillStyle=n,e.strokeStyle=n;let h=c%2?.5:0,y=Math.sign(a[1].y-a[2].y)*(l>>1);e.beginPath(),e.moveTo(a[0].x+h,a[0].y),e.lineTo(a[0].x+h,a[1].y+h),e.lineTo(a[2].x+h,a[1].y+h),e.lineTo(a[2].x+h,a[2].y+y),e.stroke(),(0,p.$Q)(e,a[2].x+h,a[1].y,a[2].x+h,a[2].y,l),e.fill(),this.el.isSelected(s)&&super.renderTo(e,t,i,o)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,r=2*Math.PI;e.beginPath();for(let o of this.el.hitboxes)for(let t=0;t<o.length;t+=2)e.moveTo(o[t]+i,o[t+1]),e.arc(o[t],o[t+1],i,0,r);e.fill(),super.renderDebugTo(e,t)}}class f extends s{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,r=0,o){this.el.isHovered(o)&&(e.fillStyle=this.el.style.color,e.beginPath(),e.arc(this.x,this.y,this.el.radius,0,2*Math.PI),e.closePath(),e.fill())}}class g extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,r=0,o){if(!this.isVisible(t))return;let s,n,{tlx:a,tly:l}=this,{body:c,head:d,select_outline:u,border_radius:h}=this.el.style,{width:y,height:_,headerHeight:f,text:g}=this.el.layout,m=f!==_;m?(s=c.fill_color,n=c.stroke_color):(s=d.fill_color,n=d.stroke_color),e.lineWidth=1.1,(0,p.Mu)(e,a,l,y,_,h),i|r?(e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=r+.5*t.scale,e.fillStyle=s,e.strokeStyle=n,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(e.fillStyle=s,e.strokeStyle=n,e.fill(),e.stroke()),m&&((0,p.Mu)(e,a,l,y,f,{tr:h,tl:h}),e.fillStyle=d.fill_color,e.strokeStyle=d.stroke_color,e.fill(),e.stroke());for(let p of g){e.font=p.font.css,e.fillStyle=p.color;for(let t of p.text)e.fillText(t.t,a+t.x,l+t.y)}if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:r}=u;i+=1,(0,p.Mu)(e,a-i,l-i,y+2*i,_+2*i,r,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:s}=this.el.style.anchor_markers;super.renderTo(e,t,i,r),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-s,t.y-s),e.lineTo(t.x+s,t.y+s),e.moveTo(t.x+s,t.y-s),e.lineTo(t.x-s,t.y+s);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class m extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,r=0,o){if(!this.isVisible(t))return;let{tlx:s,tly:n}=this,{body:a,head:l,select_outline:c,border_radius:d}=this.el.style,{width:u,height:h,headerHeight:y,text:_,lines:f}=this.el.layout;e.lineWidth=1.1,(0,p.Mu)(e,s,n,u,h,d),i|r?(e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=r+.5*t.scale,e.fillStyle=a.fill_color,e.strokeStyle=a.stroke_color,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(e.fillStyle=a.fill_color,e.strokeStyle=a.stroke_color,e.fill(),e.stroke());for(let p of f)e.moveTo(s+p.x0,n+p.y0),e.lineTo(s+p.x1,n+p.y1);e.stroke(),(0,p.Mu)(e,s,n,u,y,{tr:d,tl:d}),e.fillStyle=l.fill_color,e.strokeStyle=l.stroke_color,e.fill(),e.stroke();for(let p of _){e.font=p.font.css,e.fillStyle=p.color;for(let t of p.text)e.fillText(t.t,s+t.x,n+t.y)}if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:r}=c;i+=1,(0,p.Mu)(e,s-i,n-i,u+2*i,h+2*i,r,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:s}=this.el.style.anchor_markers;super.renderTo(e,t,i,r),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-s,t.y-s),e.lineTo(t.x+s,t.y+s),e.moveTo(t.x+s,t.y-s),e.lineTo(t.x-s,t.y+s);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class v extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,r=0,o){if(!this.isVisible(t))return;let{tlx:s,tly:n}=this,{text:a,fill_color:l,stroke_color:c,select_outline:d,border_radius:u}=this.el.style,{width:h,height:y,text:_}=this.el.layout;e.lineWidth=1.1,i|r?((0,p.Mu)(e,s,n,h,y,u),e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=r+.5*t.scale,e.fillStyle=l,e.strokeStyle=c,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):((0,p.Mu)(e,s,n,h,y,u),e.fillStyle=l,e.strokeStyle=c,e.fill(),e.stroke()),e.font=a.font.css,e.fillStyle=a.color;for(let p of _)e.fillText(p.t,s+p.x,n+p.y);if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:r}=d;i+=1,(0,p.Mu)(e,s-i,n-i,h+2*i,y+2*i,r,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:s}=this.el.style.anchor_markers;super.renderTo(e,t,i,r),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-s,t.y-s),e.lineTo(t.x+s,t.y+s),e.moveTo(t.x+s,t.y-s),e.lineTo(t.x-s,t.y+s);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class b extends d{constructor(e,t){super(e,t),this.el=e;let{grid_color:i,background_color:r}=this.el.style;this._gridPattern=this.createGridPattern(...this.el.grid,r,i)}get selects(){return[...this.getSubtree((e=>e.el.isSelected()))]}renderPageSurfaceTo(e,t,i){e.fillStyle=i?this._gridPattern:this.el.style.background_color,e.fillRect(t.xMin,t.yMin,t.xMax-t.xMin,t.yMax-t.yMin)}renderTo(e,t,i=this.el.style.drop_shadow.offset[0],r=this.el.style.drop_shadow.offset[1],o){e.shadowColor=this.el.style.drop_shadow.color,super.renderTo(e,t,i*t.scale,r*t.scale)}createGridPattern(e,t,i,r){let o=document.createElement("canvas"),s=o.getContext("2d",{alpha:!1});o.width=e,o.height=t,s.fillStyle=i,s.lineWidth=2,s.strokeStyle=r,s.fillRect(0,0,e,t),s.moveTo(0,0),s.lineTo(0,t),s.lineTo(e,t),s.stroke();let n=s.createPattern(o,"repeat");return n.setTransform((new DOMMatrix).translate(0,1)),n}}},536:function(e,t,i){i.d(t,{U:function(){return n}});var r=i(443),o=(i(899),i(916)),s=i(341);class n{constructor(e,t=30,i=!0,r=!0,o=!1){this._page=e,this._padding=t,this._showGrid=i,this._showShadows=r,this._showDebug=o}capture(e){let t,i,n,a;if(null===e||void 0===e?void 0:e.length){t=1/0,i=1/0,n=-1/0,a=-1/0;for(let r of e)t=Math.min(t,r.boundingBox.xMin),i=Math.min(i,r.boundingBox.yMin),n=Math.max(n,r.boundingBox.xMax),a=Math.max(a,r.boundingBox.yMax)}else t=this._page.boundingBox.xMin,i=this._page.boundingBox.yMin,n=this._page.boundingBox.xMax,a=this._page.boundingBox.yMax;let l=new r.h,c=this._page.createView(l);c.updateView();let d=document.createElement("canvas");d.width=Math.round(n-t)+2*this._padding,d.height=Math.round(a-i)+2*this._padding;let u=d.getContext("2d");u.setTransform(1,0,0,1,-t+this._padding,-i+this._padding);let h=new o.N;h.xMin=t-this._padding,h.yMin=i-this._padding,h.xMax=n+this._padding,h.yMax=a+this._padding;let p=new Map,y=this._page.getSubtree((e=>e.isHoveredOrSelected()));for(let r of y)p.set(r,r.attrs),r.setSelect(s.Ph.False),r.setHover(s.TM.Off);c.renderPageSurfaceTo(u,h,this._showGrid),this._showShadows?c.renderTo(u,h):c.renderTo(u,h,0,0),this._showDebug&&c.renderDebugTo(u,h);for(let[r,o]of p)r.attrs=o;return d}}},405:function(e,t,i){var r;i.d(t,{VY:function(){return d},ze:function(){return a},up:function(){return u},Tf:function(){return p},XX:function(){return h},Y6:function(){return c},Z9:function(){return s},uS:function(){return r},aO:function(){return y},h_:function(){return l}}),function(e){e[e["Int"]=0]="Int",e[e["Float"]=1]="Float",e[e["String"]=2]="String",e[e["Date"]=3]="Date",e[e["Enum"]=4]="Enum",e[e["List"]=5]="List",e[e["Dictionary"]=6]="Dictionary"}(r||(r={}));var o=i(262);class s{constructor(e,t){this.type=t.type,this.descriptor=t,this.trigger=(0,o.iH)(0),this._parent=e}get root(){let e=this;while(e._parent)e=e._parent;return e instanceof y?e:void 0}static create(e,t,i){switch(t.type){case r.String:return new l(e,t,i);case r.Int:case r.Float:return new c(e,t,i);case r.Date:return new a(e,t,i);case r.Enum:return new p(e,t,i);case r.List:return new h(e,t,i);case r.Dictionary:return new u(e,t,i)}}updateProperty(){var e;this.trigger.value=this.toHashValue(),null===(e=this._parent)||void 0===e||e.updateProperty()}}var n=i(902);class a extends s{constructor(e,t,i){var r;let o;super(e,t),this._value=null,this.descriptor=t,o=null===i?null:null!==(r=null!==i&&void 0!==i?i:t.value)&&void 0!==r?r:null,null===o?this.setValue(null):o instanceof Date||"string"===typeof o?this.setValue(new Date(o)):this.setValue(new Date)}isDefined(){return null!==this._value}setValue(e){this._value=e,this.updateProperty()}toRawValue(){var e,t;return null!==(t=null===(e=this._value)||void 0===e?void 0:e.toISOString())&&void 0!==t?t:null}toHashValue(){return null===this._value?(0,n.x_)(""):(0,n.x_)(this._value.toString())}toString(){var e;return`${null!==(e=this._value)&&void 0!==e?e:"Null"}`}}class l extends s{constructor(e,t,i){var r;if(super(e,t),this.descriptor=t,this._value=null,null===i)this.setValue(null);else{let e=null!==(r=null!==i&&void 0!==i?i:t.value)&&void 0!==r?r:null;this.setValue(null===e?null:`${e}`)}}isDefined(){return null!==this._value}setValue(e){this._value=e,this.updateProperty()}toRawValue(){return this._value}toHashValue(){return null===this._value?(0,n.x_)(""):(0,n.x_)(`v:${this._value}`)}toString(){var e;return null!==(e=this._value)&&void 0!==e?e:"Null"}}class c extends s{constructor(e,t,i){var r,o,s;let n;super(e,t),this.min=null!==(r=t.min)&&void 0!==r?r:-1/0,this.max=null!==(o=t.max)&&void 0!==o?o:1/0,this.descriptor=t,this._value=null,n=null===i?null:null!==(s=null!==i&&void 0!==i?i:t.value)&&void 0!==s?s:null,null===n?this.setValue(null):"number"===typeof n?this.setValue(n):this.setValue(0)}isDefined(){return null!==this._value}setValue(e){if(null===e)this._value=null;else{let t=(0,n.uZ)(e,this.min,this.max);this.type===r.Int?this._value=Math.round(t):this._value=t}this.updateProperty()}toRawValue(){return this._value}toHashValue(){var e;return(0,n.x_)(`${null!==(e=this._value)&&void 0!==e?e:""}`)}toString(){var e;return`${null!==(e=this._value)&&void 0!==e?e:"Null"}`}}class d extends s{constructor(e,t){super(e,t),this.descriptor=t,this.value=new Map}indexOf(e){return[...this.value.keys()].indexOf(e)}toRawValue(){return[...this.value.entries()].map((([e,t])=>[e,t.toRawValue()]))}toHashValue(){let e=[...this.value.values()].map((e=>e.toHashValue())).join(".");return(0,n.x_)(e)}}class u extends d{constructor(e,t,i){var r;super(e,t),this.descriptor=t,this.primaryKey=null,this.value=new Map;for(let o in t.form){let e;e=i?Array.isArray(i)?null===(r=i.find((e=>e[0]===o)))||void 0===r?void 0:r.at(1):i[o]:void 0;let n=s.create(this,t.form[o],e);this.value.set(o,n),!this.primaryKey&&n.descriptor.is_primary&&(this.primaryKey=o)}}addProperty(e,t,i){throw new Error("Properties cannot be dynamically added to dictionaries.")}removeProperty(e){throw new Error("Properties cannot be dynamically removed from dictionaries.")}isDefined(){return!!this.primaryKey&&this.value.get(this.primaryKey).isDefined()}toString(){return this.primaryKey?this.value.get(this.primaryKey).toString():"Error - No Primary Key"}}class h extends d{constructor(e,t,i){if(super(e,t),this.descriptor=t,this.value=new Map,Array.isArray(i))for(let[r,o]of i){let e=s.create(this,t.form,o);this.value.set(r,e)}else if(t.value)if(Array.isArray(t.value))for(let[r,o]of t.value){let e=s.create(this,t.form,o);this.value.set((0,n.Pu)(r),e)}else for(let r in t.value){let e=t.value[r],i=s.create(this,t.form,e);this.value.set((0,n.Pu)(r),i)}}addProperty(e,t=this.getNextId(),i=this.value.size){let r=[...this.value.entries()];return r.splice(i,0,[t,e]),this.value=new Map(r),this.updateProperty(),t}removeProperty(e){this.value.delete(e),this.updateProperty()}isDefined(){return 0<this.value.size}toString(){return[...this.value.values()].map((e=>e.toString())).join(", ")}getNextId(){let e=(0,n.Pu)(crypto.randomUUID());while(this.value.has(e))e=(0,n.Pu)(crypto.randomUUID());return e}}class p extends s{constructor(e,t,i){super(e,t);let r,o=s.create(void 0,t.options);this.descriptor=t,this.options=o,this._value=null,r=null===i?null:void 0!==i?i:t.value?(0,n.Pu)(t.value):null,null===r?this.setValue(null):"string"===typeof r?this.setValue(r):this.setValue(null)}isDefined(){return null!==this._value}setValue(e){null===e?this._value=null:this.options.value.has(e)?this._value=e:this._value=null,this.updateProperty()}toReferenceValue(){return null===this._value?null:this.options.value.get(this._value)}toRawValue(){return this._value}toHashValue(){return null===this._value?(0,n.x_)(""):(0,n.x_)(`v:${this._value}`)}toString(){var e,t;return null!==(t=null===(e=this.toReferenceValue())||void 0===e?void 0:e.toString())&&void 0!==t?t:"Null"}}class y extends u{constructor(e,t,i){let o={type:r.Dictionary,form:t};super(void 0,o,i),this.object=e}updateProperty(){super.updateProperty(),this._notifyPropertyUpdate&&this._notifyPropertyUpdate()}onUpdate(e){this._notifyPropertyUpdate=e}}},902:function(e,t,i){i.d(t,{vp:function(){return f},Zx:function(){return v},TI:function(){return b},Pu:function(){return p},zn:function(){return P},uZ:function(){return x},x_:function(){return j},$Q:function(){return y},Mu:function(){return _},dc:function(){return S},h7:function(){return k},mI:function(){return M},NM:function(){return w},Qs:function(){return B}});const r="0123456789abcdef";function o(e){let t="";for(let i=0;i<=3;i++)t+=r.charAt(e>>8*i+4&15)+r.charAt(e>>8*i&15);return t}function s(e){let t,i=1+(e.length+8>>6),r=new Array(16*i).fill(0);for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*i-2]=8*e.length,r}function n(e,t){var i=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(i>>16);return r<<16|65535&i}function a(e,t){return e<<t|e>>>32-t}function l(e,t,i,r,o,s){return n(a(n(n(t,e),n(r,s)),o),i)}function c(e,t,i,r,o,s,n){return l(t&i|~t&r,e,t,o,s,n)}function d(e,t,i,r,o,s,n){return l(t&r|i&~r,e,t,o,s,n)}function u(e,t,i,r,o,s,n){return l(t^i^r,e,t,o,s,n)}function h(e,t,i,r,o,s,n){return l(i^(t|~r),e,t,o,s,n)}function p(e){let t=s(e),i=1732584193,r=-271733879,a=-1732584194,l=271733878;for(let o=0;o<t.length;o+=16){let e=i,s=r,p=a,y=l;i=c(i,r,a,l,t[o+0],7,-680876936),l=c(l,i,r,a,t[o+1],12,-389564586),a=c(a,l,i,r,t[o+2],17,606105819),r=c(r,a,l,i,t[o+3],22,-1044525330),i=c(i,r,a,l,t[o+4],7,-176418897),l=c(l,i,r,a,t[o+5],12,1200080426),a=c(a,l,i,r,t[o+6],17,-1473231341),r=c(r,a,l,i,t[o+7],22,-45705983),i=c(i,r,a,l,t[o+8],7,1770035416),l=c(l,i,r,a,t[o+9],12,-1958414417),a=c(a,l,i,r,t[o+10],17,-42063),r=c(r,a,l,i,t[o+11],22,-1990404162),i=c(i,r,a,l,t[o+12],7,1804603682),l=c(l,i,r,a,t[o+13],12,-40341101),a=c(a,l,i,r,t[o+14],17,-1502002290),r=c(r,a,l,i,t[o+15],22,1236535329),i=d(i,r,a,l,t[o+1],5,-165796510),l=d(l,i,r,a,t[o+6],9,-1069501632),a=d(a,l,i,r,t[o+11],14,643717713),r=d(r,a,l,i,t[o+0],20,-373897302),i=d(i,r,a,l,t[o+5],5,-701558691),l=d(l,i,r,a,t[o+10],9,38016083),a=d(a,l,i,r,t[o+15],14,-660478335),r=d(r,a,l,i,t[o+4],20,-405537848),i=d(i,r,a,l,t[o+9],5,568446438),l=d(l,i,r,a,t[o+14],9,-1019803690),a=d(a,l,i,r,t[o+3],14,-187363961),r=d(r,a,l,i,t[o+8],20,1163531501),i=d(i,r,a,l,t[o+13],5,-1444681467),l=d(l,i,r,a,t[o+2],9,-51403784),a=d(a,l,i,r,t[o+7],14,1735328473),r=d(r,a,l,i,t[o+12],20,-1926607734),i=u(i,r,a,l,t[o+5],4,-378558),l=u(l,i,r,a,t[o+8],11,-2022574463),a=u(a,l,i,r,t[o+11],16,1839030562),r=u(r,a,l,i,t[o+14],23,-35309556),i=u(i,r,a,l,t[o+1],4,-1530992060),l=u(l,i,r,a,t[o+4],11,1272893353),a=u(a,l,i,r,t[o+7],16,-155497632),r=u(r,a,l,i,t[o+10],23,-1094730640),i=u(i,r,a,l,t[o+13],4,681279174),l=u(l,i,r,a,t[o+0],11,-358537222),a=u(a,l,i,r,t[o+3],16,-722521979),r=u(r,a,l,i,t[o+6],23,76029189),i=u(i,r,a,l,t[o+9],4,-640364487),l=u(l,i,r,a,t[o+12],11,-421815835),a=u(a,l,i,r,t[o+15],16,530742520),r=u(r,a,l,i,t[o+2],23,-995338651),i=h(i,r,a,l,t[o+0],6,-198630844),l=h(l,i,r,a,t[o+7],10,1126891415),a=h(a,l,i,r,t[o+14],15,-1416354905),r=h(r,a,l,i,t[o+5],21,-57434055),i=h(i,r,a,l,t[o+12],6,1700485571),l=h(l,i,r,a,t[o+3],10,-1894986606),a=h(a,l,i,r,t[o+10],15,-1051523),r=h(r,a,l,i,t[o+1],21,-2054922799),i=h(i,r,a,l,t[o+8],6,1873313359),l=h(l,i,r,a,t[o+15],10,-30611744),a=h(a,l,i,r,t[o+6],15,-1560198380),r=h(r,a,l,i,t[o+13],21,1309151649),i=h(i,r,a,l,t[o+4],6,-145523070),l=h(l,i,r,a,t[o+11],10,-1120210379),a=h(a,l,i,r,t[o+2],15,718787259),r=h(r,a,l,i,t[o+9],21,-343485551),i=n(i,e),r=n(r,s),a=n(a,p),l=n(l,y)}return o(i)+o(r)+o(a)+o(l)}function y(e,t,i,r,o,s=12,n=0){let a=r-t,l=o-i,c=Math.atan2(l,a),d=r-s*Math.cos(c-Math.PI/6),u=o-s*Math.sin(c-Math.PI/6),h=r-s*Math.cos(c+Math.PI/6),p=o-s*Math.sin(c+Math.PI/6);e.beginPath(),e.moveTo(d,u),e.lineTo(h,p),e.lineTo(r,o),e.closePath()}function _(e,t,i,r,o,s,n=1){t+=n/2,i+=n/2,r-=n,o-=n,s="number"===typeof s?{tl:s,tr:s,br:s,bl:s}:Object.assign({tl:0,tr:0,br:0,bl:0},s),e.beginPath(),e.moveTo(t+s.tl,i),e.lineTo(t+r-s.tr,i),e.quadraticCurveTo(t+r,i,t+r,i+s.tr),e.lineTo(t+r,i+o-s.br),e.quadraticCurveTo(t+r,i+o,t+r-s.br,i+o),e.lineTo(t+s.bl,i+o),e.quadraticCurveTo(t,i+o,t,i+o-s.bl),e.lineTo(t,i+s.tl),e.quadraticCurveTo(t,i,t+s.tl,i),e.closePath()}class f{constructor(){this._listeners=new Map}on(e,t){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(t)}once(e,t){let i=(...r)=>{let o=this._listeners.get(e);o.splice(o.indexOf(i),1),t(...r)};this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(i)}emit(e,...t){if(this._listeners.has(e)){let i=this._listeners.get(e);for(let e=i.length-1;0<=e;e--)i[e](...t)}}removeAllListeners(e){void 0!==e?this._listeners.delete(e):this._listeners.clear()}}var g=i(655);class m{constructor(){this._fontList=new Map([["default",new v({size:"10pt",family:"sans-serif"})]])}getFont(e){let t=m.getCssFontString(e);return this._fontList.has(t)?this._fontList.get(t):this._fontList.get("default")}loadFonts(e,t=4e3){return(0,g.mG)(this,void 0,void 0,(function*(){let i=[];for(let s of e)i.push(this.loadFont(s,t));let r=yield Promise.allSettled(i),o=[];for(let t=0;t<r.length;t++)"fulfilled"!==r[t].status&&o.push(m.getCssFontString(e[t]));if(o.length){let e=`'${o.join("', '")}'`;throw new Error(`The following fonts failed to load: ${e}`)}}))}loadFont(e,t=4e3){return(0,g.mG)(this,void 0,void 0,(function*(){let i=m.getCssFontString(e),r=document.fonts;if(r.check(i))return this._fontList.has(i)||this._fontList.set(i,new v(e)),!0;{let o,s=this._fontList.set.bind(this._fontList),n=Date.now(),a=new Promise(((o,a)=>(0,g.mG)(this,void 0,void 0,(function*(){(function l(){return(0,g.mG)(this,void 0,void 0,(function*(){t<=Date.now()-n?a(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`)):r.load(i).then((t=>{if(0<t.length){let t=r.check(i);t&&s(i,new v(e)),o(t)}else setTimeout(l,50)}),a)}))})()})))),l=new Promise(((e,r)=>{o=setTimeout((()=>r(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`))),t)})),c=yield Promise.race([a,l]);return clearTimeout(o),c}}))}static getCssFontString(e){var t;return`${null!==(t=e.weight)&&void 0!==t?t:400} ${e.size} ${e.family}`}}class v{constructor(e){this.css=m.getCssFontString(e),this.descriptor=e,this._ctx=document.createElement("canvas").getContext("2d"),this._ctx.font=this.css,this._widthIndex=new Map;for(let t of v.DEFAULT_INDEX)this._widthIndex.set(t,this.measureWidth(t))}measureWidth(e){if(document.fonts.check(this.css))return this._ctx.measureText(e).width;throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}measure(e){if(document.fonts.check(this.css)){let t=this._ctx.measureText(e);return{width:t.width,ascent:t.actualBoundingBoxAscent,descent:t.actualBoundingBoxDescent}}throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}getCharWidth(e){return this._widthIndex.has(e)||this._widthIndex.set(e,this.measureWidth(e)),this._widthIndex.get(e)}wordWrap(e,t){let i=e.trim().split(/\n/),r=[];for(let o=0;o<i.length;o++)i[o]?r[o]=this.lineWrap(i[o],t):r[o]=i[o];return r.flat()}lineWrap(e,t){let i="",r=0,o=[],s=e.split(v.WHITESPACE).filter(Boolean),n=v.WHITESPACE.test(s[0])?0:1;for(let a=0;a<s.length;a++){let e=this.measureWidth(s[a]);if(a%2!==n)if(t<r+e&&(0!==a&&(o.push(i.trimEnd()),i="",r=0),t<e)){let n=s[a];for(let s=0;s<n.length;s++)e=this.getCharWidth(n[s]),0!==s&&t<r+e&&(o.push(i),i="",r=0),i+=n[s],r+=e}else i+=s[a],r+=e;else i+=s[a],r+=e}return o.push(i.trimEnd()),o}}v.DEFAULT_INDEX="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\t ",v.WHITESPACE=/(\s+)/;const b=new m;function x(e,t,i){return Math.min(Math.max(e,t),i)}function w(e,t){return Math.sign(e)*Math.round(Math.abs(e)/t)*t}function S(e){let t=0;for(let i in e)t|=e[i];return t}function k(e,t,i,r,o){let s=o/2,n=i-e,a=r-t,l=Math.acos(n/Math.sqrt(Math.pow(n,2)+Math.pow(a,2))),c=s*Math.sin(l),d=s*Math.cos(l);return[e-c,t-d,e+c,t+d,i+c,r+d,i-c,r-d]}function M(e,t,i){let r=1/0,o=1/0,s=-1/0,n=-1/0;for(let a=0;a<i.length;a+=2)r=Math.min(r,i[a]),o=Math.min(o,i[a+1]),s=Math.max(s,i[a]),n=Math.max(n,i[a+1]);if(r<e&&e<s&&o<t&&t<n){let r=e,o=t,n=s+1,a=t,l=0,c=i.length;for(let e=0;e<c;e+=2){let t=D(r,o,n,a,i[e],i[e+1],i[(e+2)%c],i[(e+3)%c]);t&&l++}return l%2!==0}return!1}function D(e,t,i,r,o,s,n,a){let l,c,d,u,h,p,y,_;return l=t-r,c=i-e,d=e*r-i*t,y=l*o+c*s+d,_=l*n+c*a+d,!(y<0&&_<0||y>0&&_>0)&&(u=s-a,h=n-o,p=o*a-n*s,y=u*e+h*t+p,_=u*i+h*r+p,!(y<0&&_<0||y>0&&_>0)&&l*h-u*c!=0)}function j(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function C(e){return e?`${e[0].toLocaleUpperCase()}${e.substring(1)}`:""}function B(e){return e.split(/\s+|_/).map((e=>C(e))).join(" ")}var P;(function(e){e[e["Left"]=0]="Left",e[e["Middle"]=1]="Middle",e[e["Right"]=2]="Right"})(P||(P={}))},209:function(e,t,i){i.d(t,{v2:function(){return o.v2},W1:function(){return l.W1},cK:function(){return u.c},VY:function(){return n.VY},CF:function(){return o.CF},CQ:function(){return o.CQ},ze:function(){return n.ze},Bl:function(){return a.Bl},Mb:function(){return a.Mb},m1:function(){return l.m1},eq:function(){return a.eq},W_:function(){return a.W_},up:function(){return n.up},Tf:function(){return n.Tf},TM:function(){return o.TM},g_:function(){return o.g_},XX:function(){return n.XX},zn:function(){return s.zn},Y6:function(){return n.Y6},LM:function(){return a.LM},X$:function(){return o.W_},Z9:function(){return n.Z9},uS:function(){return n.uS},Ph:function(){return o.Ph},vl:function(){return d},VS:function(){return l.VS},h_:function(){return n.h_},WY:function(){return l.WY},uZ:function(){return s.uZ},NM:function(){return s.NM},Qs:function(){return s.Qs}});var r,o=i(341),s=i(902),n=i(405),a=i(184),l=i(772);class c{constructor(e,t,i,r){this.template=e,this.props=t,this.nextLinkMap=i,this.prevLinkMap=r}get prev(){return[...this.prevLinkMap.values()].flat()}get next(){return[...this.nextLinkMap.values()].flat()}}class d{static toGraph(e){let t,i=new Map,o=new Map;for(let s of e.getSubtree()){switch(s.getSemanticRole()){case l.VS.Node:t=o;break;case l.VS.Edge:t=i;break;default:continue}let e=this.traverse(s,r.Next);for(let[t,i]of e)e.set(t,i.map((e=>e.id)));let n=this.traverse(s,r.Prev);for(let[t,i]of n)n.set(t,i.map((e=>e.id)));t.set(s.id,new c(s.template,s.props,e,n))}return{edges:i,nodes:o}}static getNextGraphLinks(e){return[...this.traverse(e,r.Next).values()].flat()}static getPrevGraphLinks(e){return[...this.traverse(e,r.Prev).values()].flat()}static traverse(e,t){var i,r;let o=new Map;if(!e.hasRole(l.VS.Edge)&&!e.hasRole(l.VS.Node))return o;let s=[...e.children];while(s.length){let e=s.pop();if(e instanceof a.Bl)for(let i of e.children)this.registerLink(e.template.id,this.traverseAnchorable(i,e,t),o);else if(e instanceof a.Mb)this.registerLink(null!==(r=null===(i=e.anchor)||void 0===i?void 0:i.template.id)&&void 0!==r?r:"undefined",this.traverseAnchorable(e,e.parent,t),o);else if(!e.hasRole(l.VS.Node)&&!e.hasRole(l.VS.Edge))for(let t of e.children)s.push(t)}return o}static registerLink(e,t,i){t&&(i.has(e)||i.set(e,[]),i.get(e).push(t))}static traverseAnchorable(e,t,i){let o,s,n;switch(i){case r.Next:o=l.VS.LinkSource,s=l.VS.LinkTarget;break;case r.Prev:o=l.VS.LinkTarget,s=l.VS.LinkSource;break}e.anchor===t&&e.hasRole(o)&&(n=e.parent),e.parent===t&&e.hasRole(s)&&(n=e.anchor);while(n){if(n.hasRole(l.VS.Node)||n.hasRole(l.VS.Edge))break;n=n.parent}return n}}(function(e){e[e["Next"]=0]="Next",e[e["Prev"]=1]="Prev"})(r||(r={}));var u=i(899);i(536)},749:function(e,t,i){i.d(t,{k:function(){return r}});class r{constructor(){this.deltaX=0,this.deltaY=0,this.movementX=0,this.movementY=0,this.target=null,this._originX=0,this._originY=0,this._lastX=0,this._lastY=0}capture(e,t){this._originX=e.clientX,this._originY=e.clientY,this._lastX=this._originX,this._lastY=this._originY,this.target=e.target,this.target.setPointerCapture(e.pointerId),this.target.onpointermove=e=>{this.update(e),t(e,this)}}update(e){this.deltaX=e.clientX-this._originX,this.deltaY=e.clientY-this._originY,this.movementX=e.clientX-this._lastX,this.movementY=e.clientY-this._lastY,this._lastX=e.clientX,this._lastY=e.clientY}release(e){null!==this.target&&(this.target.releasePointerCapture(e.pointerId),this.target.onpointermove=null,this.target=null)}}},581:function(e,t,i){var r=i(252),o=i(577);const s={class:"frame center"},n={class:"frame right"},a={class:"frame bottom"};function l(e,t,i,l,c,d){const u=(0,r.up)("AppTitleBar"),h=(0,r.up)("BlockDiagram"),p=(0,r.up)("EditorSidebar"),y=(0,r.up)("AppFooterBar"),_=(0,r.up)("AppHotkeyBox");return(0,r.wg)(),(0,r.j4)(_,{id:"main"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{id:"app-title-bar"}),(0,r._)("div",{id:"app-body",ref:"body",style:(0,o.j5)(e.gridLayout)},[(0,r._)("div",s,[(0,r.Wm)(h,{id:"block-diagram"})]),(0,r._)("div",n,[(0,r._)("div",{class:"resize-handle",onPointerdown:t[0]||(t[0]=t=>e.startResize(t,e.Handle.Right))},null,32),(0,r.Wm)(p,{id:"app-sidebar"})]),(0,r._)("div",a,[(0,r.Wm)(y,{id:"app-footer-bar"})])],4)])),_:1})}var c=i(655);class d{constructor(){this._errors=[],this._warnings=[]}run(e){this.reset(),this.validate(e)}validate(e){}getWarnings(){return this._warnings}getErrors(){return this._errors}addWarning(e,t){this._warnings.push({object:e,reason:t})}addError(e,t){this._errors.push({object:e,reason:t})}inValidState(){return 0===this._errors.length}reset(){this._errors=[],this._warnings=[]}}var u=i(209);class h extends d{validate(e){let t=u.vl.toGraph(e);for(let[i,r]of t.nodes)switch(this.validateNode(i,r),r.template.id){case"note":0===r.next.length&&this.addError(i,"A Note must point to at least one object.");break}for(let[i,r]of t.edges)this.validateEdge(i,r)}validateNode(e,t){for(const[i,r]of t.props.value)this.validateProperty(e,i,r)}validateProperty(e,t,i){switch(i.type){case u.uS.Int:case u.uS.Float:case u.uS.String:case u.uS.Date:case u.uS.Enum:let r=i.descriptor;r.is_required&&!i.isDefined()&&this.addError(e,`Missing required field: '${t}'`);break;case u.uS.Dictionary:if(i instanceof u.up)for(let[o,s]of i.value)this.validateProperty(e,`${t}.${o}`,s);break;case u.uS.List:if(i instanceof u.XX)for(let o of i.value.values())switch(o.type){case u.uS.Int:case u.uS.Float:case u.uS.String:case u.uS.Date:case u.uS.Enum:let i=o.descriptor;i.is_required&&!o.isDefined()&&this.addError(e,`Empty item in list: '${t}'.`);break;case u.uS.List:throw new Error("Unexpected list property.");case u.uS.Dictionary:this.validateProperty(e,t,o);break}break}}validateEdge(e,t){0!==t.prev.length&&0!==t.next.length||this.addWarning(e,"Edge should connect on both ends.")}}var p=h;class y{publish(e){return""}}const _="fb9c968a-745b-4ade-9b25-c324172197f4",f="https://center-for-threat-informed-defense.github.io/attack-flow/stix/attack-flow-schema-2.0.0.json",g="2.0.0",m="2022-08-02T19:34:35.143Z",v=m,b={source_name:"Documentation",description:"Documentation for Attack Flow",url:"https://center-for-threat-informed-defense.github.io/attack-flow"},x={source_name:"GitHub",description:"Source code repository for Attack Flow",url:"https://github.com/center-for-threat-informed-defense/attack-flow"},w="MITRE Engenuity Center for Threat-Informed Defense",S=new Set(["attack-flow","attack-action","attack-asset","attack-condition","attack-operator"]),k=new Map([["flow","attack-flow"],["action","attack-action"],["asset","attack-asset"],["condition","attack-condition"],["or","attack-operator"],["and","attack-operator"]]);class M extends y{publish(e){let t=u.vl.toGraph(e),i=e.id,r=t.nodes.get(i);if(!r)throw new Error("Page object missing from export.");t.nodes.delete(i);let o=this.createStixBundle(),s=this.createFlowAuthorSdo(r),n=this.createFlowSdo(i,r,s.id);o.objects.push(n),o.objects.push(s);let a=new Map,l=new Map;for(let[c,d]of t.nodes){let e=this.toStixNode(c,d);o.objects.push(e),a.set(c,e),l.set(e,[])}for(let c of t.edges.values()){let e=c.prev,t=c.next;if(1!==e.length||1!==t.length)continue;let i=a.get(e[0]),r=a.get(t[0]);if(!i||!r)throw new Error(`Edge '${c}' is missing one or more nodes.`);l.get(i).push({obj:r,via:c.prevLinkMap.keys().next().value})}for(let[c,d]of l){let e=this.tryEmbed(c,d);o.objects.push(...e)}e:for(let[c,d]of t.nodes){let e=d.template.id;for(let r of d.prev){let e=t.edges.get(r);if(e.prev.length>0){let t=a.get(e.prev[0]);if("attack-action"==t.type||"attack-condition"==t.type)break e}}let i=a.get(c).id;switch(e){case"action":case"condition":n.start_refs.push(i);break}}return JSON.stringify(o,null,2)}toStixNode(e,t){let i=this.createSdo(t.template.id,e);switch(i.type){case"attack-action":this.mergeActionProperty(i,t.props);break;default:this.mergeBasicDictProperty(i,t.props);break}return i}mergeActionProperty(e,t){for(let[i,r]of t.value)switch(i){case"confidence":if(!(r instanceof u.Tf))throw new Error("'confidence' is improperly defined.");if(!r.isDefined())break;if(r=r.toReferenceValue(),!(r instanceof u.up))throw new Error("'confidence' is improperly defined.");[r]=this.getSubproperties(r,"value");default:r.isDefined()&&(e[i]=r.toRawValue())}}mergeBasicDictProperty(e,t){for(let[i,r]of t.value)switch(r.type){case u.uS.Dictionary:throw new Error("Basic dictionaries cannot contain dictionaries.");case u.uS.Enum:if(r instanceof u.Tf&&r.isDefined()){let t=r.toReferenceValue().toRawValue();e[i]="True"===t}break;case u.uS.List:r.isDefined()&&this.mergeBasicListProperty(e,i,r);break;default:r.isDefined()&&(e[i]=r.toRawValue());break}}mergeBasicListProperty(e,t,i){e[t]=[];for(let r of i.value.values())switch(r.type){case u.uS.Dictionary:throw new Error("Basic lists cannot contain dictionaries.");case u.uS.List:throw new Error("Basic lists cannot contain lists.");case u.uS.Enum:throw new Error("Basic lists cannot contain enums.");default:r.isDefined()&&e[t].push(r.toRawValue());break}}tryEmbed(e,t){let i=[];for(const r of t){let t=null;switch(e.type){case"attack-action":t=this.tryEmbedInAction(e,r.obj);break;case"attack-asset":t=this.tryEmbedInAsset(e,r.obj);break;case"attack-condition":t=this.tryEmbedInCondition(e,r.obj,r.via);break;case"attack-operator":t=this.tryEmbedInOperator(e,r.obj);break;case"note":this.tryEmbedInNote(e,r.obj);break;default:t=this.tryEmbedInDefault(e,r.obj)}t&&i.push(t)}return i}tryEmbedInAction(e,t){let i;switch(t.type){case"process":e.command_ref?i=this.createSro(e,t):e.command_ref=t.id;break;case"attack-asset":e.asset_refs||(e.asset_refs=[]),e.asset_refs.push(t.id);break;case"attack-action":case"attack-operator":case"attack-condition":e.effect_refs||(e.effect_refs=[]),e.effect_refs.push(t.id);break;default:i=this.createSro(e,t)}return i}tryEmbedInAsset(e,t){let i;return e.object_ref?i=this.createSro(e,t):e.object_ref=t.id,i}tryEmbedInCondition(e,t,i){let r;switch(t.type){case"attack-action":case"attack-operator":case"attack-condition":switch(i){case"true_anchor":e.on_true_refs||(e.on_true_refs=[]),e.on_true_refs.push(t.id);break;case"false_anchor":e.on_false_refs||(e.on_false_refs=[]),e.on_false_refs.push(t.id);break;default:r=this.createSro(e,t);break}break;default:r=this.createSro(e,t)}return r}tryEmbedInOperator(e,t){let i;switch(t.type){case"attack-action":case"attack-operator":case"attack-condition":e.effect_refs||(e.effect_refs=[]),e.effect_refs.push(t.id);break;default:i=this.createSro(e,t)}return i}tryEmbedInNote(e,t){e.object_refs||(e.object_refs=[]),e.object_refs.push(t.id)}tryEmbedInDefault(e,t){return this.createSro(e,t)}createStixBundle(){const e=this.createExtensionAuthorSdo(),t=this.createExtensionSdo(e.id);return Object.assign(Object.assign({},this.createSdo("bundle")),{objects:[t,e]})}createExtensionSdo(e){let t=this.createSdo("extension-definition",_);return Object.assign(Object.assign({},t),{name:"Attack Flow",description:"Extends STIX 2.1 with features to create Attack Flows.",created:m,modified:v,created_by_ref:e,schema:f,version:g,extension_types:["new-sdo"],external_references:[b,x]})}createExtensionAuthorSdo(){let e=this.createSdo("identity",_);return Object.assign(Object.assign({},e),{create_by_ref:e.id,name:w,identity_class:"organization",created:m,modified:v})}createFlowSdo(e,t,i){let r=Object.assign(Object.assign({},this.createSdo(t.template.id,e)),{created_by_ref:i,start_refs:[]});for(let[o,s]of t.props.value)switch(o){case"external_references":if(!(s instanceof u.XX))throw new Error("'external_references' is improperly defined.");if(s.descriptor.form.type!==u.uS.Dictionary)throw new Error("'external_references' is improperly defined.");r[o]=[];for(let e of s.value.values()){let t=e.toRawValue();r[o].push(Object.fromEntries(t))}break;case"scope":if(!(s instanceof u.Tf))throw new Error("'scope' is improperly defined.");if(!s.isDefined())break;s=s.toReferenceValue(),s.isDefined()&&(r[o]=`${s.toRawValue()}`.toLocaleLowerCase());break;default:s.isDefined()&&(r[o]=s.toRawValue());break}return r}createFlowAuthorSdo(e){let t=e.props.value.get("author"),i=this.createSdo("identity");if(!(t instanceof u.VY))throw new Error("'author' is improperly defined.");for(let[r,o]of t.value)switch(r){case"identity_class":if(!(o instanceof u.Tf))throw new Error("'identity_class' is improperly defined.");if(!o.isDefined())break;o=o.toReferenceValue(),o.isDefined()&&(i[r]=`${o.toRawValue()}`.toLocaleLowerCase());break;default:o.isDefined()&&(i[r]=o.toRawValue());break}return i}createSdo(e,t=crypto.randomUUID()){var i;let r=(new Date).toISOString(),o=null!==(i=k.get(e))&&void 0!==i?i:e;o=o.replace(/_/g,"-");let s={type:o,id:`${o}--${t}`,spec_version:"2.1",created:r,modified:r};return S.has(o)&&(s.extensions={[`extension-definition--${_}`]:{extension_type:"new-sdo"}}),s}createSro(e,t,i="related-to"){const r=crypto.randomUUID(),o=(new Date).toISOString();return{type:"relationship",id:`relationship--${r}`,spec_version:"2.1",created:o,modified:o,relationship_type:i,source_ref:e.id,target_ref:t.id}}getSubproperties(e,...t){let i=[];for(let r of t){let t=e.value.get(r);if(!t)throw new Error(`${r} was not defined on root property.`);i.push(t)}return i}}var D=M,j=i(823);const C={is_web_hosted:!1,file_type_name:"Attack Flow",file_type_extension:"afb",schema:{page_template:"flow",templates:[{id:"flow",type:u.WY.Page,role:u.VS.Node,grid:[10,10],properties:{name:{type:u.uS.String,value:"Untitled Document",is_primary:!0},description:{type:u.uS.String},author:{type:u.uS.Dictionary,form:{name:{type:u.uS.String,is_primary:!0},identity_class:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["individual","Individual"],["group","Group"],["system","System"],["organization","Organization"],["class","Class"],["unknown","Unknown"]]}},contact_information:{type:u.uS.String}}},scope:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["incident","Incident"],["campaign","Campaign"],["threat-actor","Threat Actor"],["malware","Malware"],["other","Other"]]},value:"incident"},external_references:{type:u.uS.List,form:{type:u.uS.Dictionary,form:{source_name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},url:{type:u.uS.String}}}},created:{type:u.uS.Date,value:new Date,is_visible:!1}},style:j.C.Page()},{id:"true_anchor",type:u.WY.AnchorPoint,role:u.VS.None,radius:10,line_templates:{[u.W1.DEG_0]:"@__builtin__line_horizontal_elbow",[u.W1.DEG_90]:"@__builtin__line_vertical_elbow"},style:j.C.AnchorPoint()},{id:"false_anchor",type:u.WY.AnchorPoint,role:u.VS.None,radius:10,line_templates:{[u.W1.DEG_0]:"@__builtin__line_horizontal_elbow",[u.W1.DEG_90]:"@__builtin__line_vertical_elbow"},style:j.C.AnchorPoint()},{id:"action",namespace:"attack_flow.action",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},tactic_id:{type:u.uS.String},tactic_ref:{type:u.uS.String},technique_id:{type:u.uS.String},technique_ref:{type:u.uS.String},description:{type:u.uS.String},confidence:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.Dictionary,form:{text:{type:u.uS.String,is_primary:!0},value:{type:u.uS.Int}}},value:[["speculative",{text:"Speculative",value:0}],["very-doubtful",{text:"Very Doubtful",value:10}],["doubtful",{text:"Doubtful",value:30}],["even-odds",{text:"Even Odds",value:50}],["probable",{text:"Probable",value:70}],["very-probable",{text:"Very Probable",value:90}],["certain",{text:"Certain",value:100}]]},value:null},execution_start:{type:u.uS.Date},execution_end:{type:u.uS.Date}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Blue)})},{id:"asset",namespace:"attack_flow.asset",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Orange)})},{id:"condition",namespace:"attack_flow.condition",type:u.WY.BranchBlock,role:u.VS.Node,properties:{description:{type:u.uS.String,is_primary:!0,is_required:!0},pattern:{type:u.uS.String},pattern_type:{type:u.uS.String},pattern_version:{type:u.uS.String},date:{type:u.uS.Date}},branches:[{text:"True",anchor_template:"true_anchor"},{text:"False",anchor_template:"false_anchor"}],anchor_template:"@__builtin__anchor",style:j.C.BranchBlock({head:Object.assign({},j.w.Green)})},{id:"or",namespace:"attack_flow.OR_operator",type:u.WY.TextBlock,role:u.VS.Node,properties:{operator:{type:u.uS.String,value:"OR",is_primary:!0,is_visible:!1,is_editable:!1}},anchor_template:"@__builtin__anchor",style:j.C.TextBlock(Object.assign(Object.assign({},j.w.Red),{horizontal_padding:35}))},{id:"and",namespace:"attack_flow.AND_operator",type:u.WY.TextBlock,role:u.VS.Node,properties:{operator:{type:u.uS.String,value:"AND",is_primary:!0,is_visible:!1,is_editable:!1}},anchor_template:"@__builtin__anchor",style:j.C.TextBlock(Object.assign(Object.assign({},j.w.Red),{horizontal_padding:35}))},{id:"attack_pattern",namespace:"stix_object.attack_pattern",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},aliases:{type:u.uS.List,form:{type:u.uS.String}},kill_chain_phases:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"campaign",namespace:"stix_object.campaign",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},aliases:{type:u.uS.List,form:{type:u.uS.String}},first_seen:{type:u.uS.Date},last_seen:{type:u.uS.Date},objective:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"course_of_action",namespace:"stix_object.course_of_action",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},action_type:{type:u.uS.String},os_execution_envs:{type:u.uS.List,form:{type:u.uS.String}},action_bin:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"grouping",namespace:"stix_object.grouping",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0},description:{type:u.uS.String},context:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"identity",namespace:"stix_object.identity",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_required:!0,is_primary:!0},description:{type:u.uS.String},roles:{type:u.uS.List,form:{type:u.uS.String}},identity_class:{type:u.uS.String,is_required:!0},sectors:{type:u.uS.List,form:{type:u.uS.String}},contact_information:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"indicator",namespace:"stix_object.indicator",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0},description:{type:u.uS.String},indicator_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},pattern:{type:u.uS.String,is_required:!0},pattern_type:{type:u.uS.String,is_required:!0},patter_version:{type:u.uS.String},valid_from:{type:u.uS.Date,is_required:!0},valid_until:{type:u.uS.Date},kill_chain_phases:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"infrastructure",namespace:"stix_object.infrastructure",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},infrastructure_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},aliases:{type:u.uS.List,form:{type:u.uS.String}},kill_chain_phases:{type:u.uS.List,form:{type:u.uS.String}},first_seen:{type:u.uS.Date},last_seen:{type:u.uS.Date}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"intrusion_set",namespace:"stix_object.intrusion_set",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},aliases:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},first_seen:{type:u.uS.Date},last_seen:{type:u.uS.Date},goals:{type:u.uS.List,form:{type:u.uS.String}},resource_level:{type:u.uS.String},primary_motivation:{type:u.uS.String},secondary_motivations:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"location",namespace:"stix_object.location",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0},description:{type:u.uS.String},latitude:{type:u.uS.Float,min:-90,max:90},longitude:{type:u.uS.Float,min:-180,max:180},precision:{type:u.uS.Float},region:{type:u.uS.String},country:{type:u.uS.String},administrative_area:{type:u.uS.String},city:{type:u.uS.String},street_address:{type:u.uS.String},postal_code:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"malware",namespace:"stix_object.malware",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0},description:{type:u.uS.String},malware_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},is_family:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]},is_required:!0},aliases:{type:u.uS.List,form:{type:u.uS.String}},kill_chain_phases:{type:u.uS.List,form:{type:u.uS.String}},first_seen:{type:u.uS.Date},last_seen:{type:u.uS.Date},os_execution_envs:{type:u.uS.List,form:{type:u.uS.String}},architecture_execution_envs:{type:u.uS.List,form:{type:u.uS.String}},implementation_languages:{type:u.uS.List,form:{type:u.uS.String}},capabilities:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"malware_analysis",namespace:"stix_object.malware_analysis",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{product:{type:u.uS.String,is_primary:!0,is_required:!0},version:{type:u.uS.String},configuration_version:{type:u.uS.String},modules:{type:u.uS.List,form:{type:u.uS.String}},analysis_engine_version:{type:u.uS.String},analysis_definition_version:{type:u.uS.String},submitted:{type:u.uS.Date},analysis_started:{type:u.uS.Date},analysis_ended:{type:u.uS.Date},av_result:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"note",namespace:"stix_object.note",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{abstract:{type:u.uS.String,is_primary:!0},content:{type:u.uS.String,is_required:!0},authors:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"observed_data",namespace:"stix_object.observed_data",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{first_observed:{type:u.uS.Date,is_required:!0},last_observed:{type:u.uS.Date,is_required:!0},number_observed:{type:u.uS.Int,min:0,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"opinion",namespace:"stix_object.opinion",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{explanation:{type:u.uS.String,is_primary:!0},authors:{type:u.uS.List,form:{type:u.uS.String}},opinion:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"report",namespace:"stix_object.report",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},report_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},published:{type:u.uS.Date,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"threat_actor",namespace:"stix_object.threat_actor",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},threat_actor_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},aliases:{type:u.uS.List,form:{type:u.uS.String}},first_seen:{type:u.uS.Date},last_seen:{type:u.uS.Date},roles:{type:u.uS.List,form:{type:u.uS.String}},goals:{type:u.uS.List,form:{type:u.uS.String}},sophistication:{type:u.uS.String},resource_level:{type:u.uS.String},primary_motivation:{type:u.uS.String},secondary_motivations:{type:u.uS.List,form:{type:u.uS.String}},personal_motivations:{type:u.uS.List,form:{type:u.uS.String}}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"tool",namespace:"stix_object.tool",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String},tool_types:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},aliases:{type:u.uS.List,form:{type:u.uS.String}},kill_chain_phases:{type:u.uS.List,form:{type:u.uS.String}},tool_version:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"vulnerability",namespace:"stix_object.vulnerability",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},description:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"artifact",namespace:"stix_observable.artifact",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{mime_type:{type:u.uS.String},payload_bin:{type:u.uS.String},url:{type:u.uS.String},hashes:{type:u.uS.String},encryption_algorithm:{type:u.uS.String},decryption_key:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"autonomous_system",namespace:"stix_observable.autonomous_system",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{number:{type:u.uS.String,is_primary:!0,is_required:!0},name:{type:u.uS.String},rir:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"directory",namespace:"stix_observable.directory",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{path:{type:u.uS.String,is_primary:!0,is_required:!0},path_enc:{type:u.uS.String},ctime:{type:u.uS.Date},mtime:{type:u.uS.Date},atime:{type:u.uS.Date}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"domain_name",namespace:"stix_observable.domain_name",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"email_address",namespace:"stix_observable.email_address",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0},display_name:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"email_message",namespace:"stix_observable.email_message",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{is_multipart:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]},is_required:!0},date:{type:u.uS.String},content_type:{type:u.uS.String},message_id:{type:u.uS.String},subject:{type:u.uS.String,is_primary:!0},received_lines:{type:u.uS.String},additional_header_fields:{type:u.uS.String},body:{type:u.uS.String},body_multipart:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"file",namespace:"stix_observable.file",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{hashes:{type:u.uS.String},size:{type:u.uS.String},name:{type:u.uS.String,is_primary:!0},name_enc:{type:u.uS.String},magic_number_hex:{type:u.uS.String},mime_type:{type:u.uS.String},ctime:{type:u.uS.Date},mtime:{type:u.uS.Date},atime:{type:u.uS.Date}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"ipv4_addr",namespace:"stix_observable.ipv4_addr",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"ipv6_addr",namespace:"stix_observable.ipv6_addr",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"mac_addr",namespace:"stix_observable.mac_addr",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"mutex",namespace:"stix_observable.mutex",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"network_traffic",namespace:"stix_observable.network_traffic",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{start:{type:u.uS.Date},end:{type:u.uS.Date},is_active:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},src_port:{type:u.uS.Int,min:0,max:65535},dst_port:{type:u.uS.Int,min:0,max:65535},protocols:{type:u.uS.List,form:{type:u.uS.String,is_required:!0}},src_byte_count:{type:u.uS.Int,min:0},dst_byte_count:{type:u.uS.Int,min:0},src_packets:{type:u.uS.Int,min:0},dst_packets:{type:u.uS.Int,min:0},ipfix:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"process",namespace:"stix_observable.process",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{is_hidden:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},pid:{type:u.uS.Int,min:0},created_time:{type:u.uS.Date},cwd:{type:u.uS.String},command_line:{type:u.uS.String,is_required:!0},environment_variables:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"software",namespace:"stix_observable.software",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{name:{type:u.uS.String,is_primary:!0,is_required:!0},cpe:{type:u.uS.String},languages:{type:u.uS.List,form:{type:u.uS.String}},vendor:{type:u.uS.String},version:{type:u.uS.String}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"url",namespace:"stix_observable.url",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{value:{type:u.uS.String,is_required:!0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"user_account",namespace:"stix_observable.user_account",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{user_id:{type:u.uS.String},credential:{type:u.uS.String},account_login:{type:u.uS.String},account_type:{type:u.uS.String},display_name:{type:u.uS.String,is_primary:!0,is_required:!0},is_service_account:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},is_privileged:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},can_escalate_privs:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},is_disabled:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},account_created:{type:u.uS.Date},account_expires:{type:u.uS.Date},credential_last_changed:{type:u.uS.Date},account_first_login:{type:u.uS.Date},account_last_login:{type:u.uS.Date}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"windows_registry_key",namespace:"stix_observable.windows_registry_key",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{key:{type:u.uS.String,is_primary:!0},values:{type:u.uS.List,form:{type:u.uS.String}},modified_time:{type:u.uS.Date},number_of_subkeys:{type:u.uS.Int,min:0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})},{id:"x509_certificate",namespace:"stix_observable.x509_certificate",type:u.WY.DictionaryBlock,role:u.VS.Node,properties:{subject:{type:u.uS.String,is_primary:!0,is_required:!0},is_self_signed:{type:u.uS.Enum,options:{type:u.uS.List,form:{type:u.uS.String},value:[["true","True"],["false","False"]]}},hashes:{type:u.uS.String},version:{type:u.uS.String},serial_number:{type:u.uS.String},signature_algorithm:{type:u.uS.String},issuer:{type:u.uS.String},validity_not_before:{type:u.uS.Date},validity_not_after:{type:u.uS.Date},subject_public_key_algorithm:{type:u.uS.String},subject_public_key_modulus:{type:u.uS.String},subject_public_key_exponent:{type:u.uS.Int,min:0}},anchor_template:"@__builtin__anchor",style:j.C.DictionaryBlock({head:Object.assign({},j.w.Gray)})}]},menus:{help_menu:{help_links:[{text:"Attack Flow Website",url:"https://center-for-threat-informed-defense.github.io/attack-flow/"},{text:"Attack Flow Builder Help",url:"https://center-for-threat-informed-defense.github.io/attack-flow/builder/"},{text:"MITRE ATT&CK Framework",url:"https://attack.mitre.org/"},{text:"GitHub Repository",url:"https://github.com/center-for-threat-informed-defense/attack-flow"},{text:"Change Log",url:"https://center-for-threat-informed-defense.github.io/attack-flow/builder/"}]}},validator:p,publisher:D};var B=C,P=i(749),T=i(907);class O{constructor(e){this._context=e}}class E extends O{constructor(e,t){super(e);let i=t.children.filter((e=>e.isSelected())),r=e.settings.edit.clone_offset,o=t.factory.cloneObjects(...i);for(let s of o)s.moveBy(r[0],r[1]);this._objects=o}execute(){this._context.clipboard=this._objects}}class L{static downloadTextPetereport(e,t,i="txt",r){const o=document.querySelector("#report_pk"),s=o.getAttribute("value"),n=document.querySelector("#finding_pk"),a=n.getAttribute("value"),l=document.querySelector("#csrf_token"),d=l.getAttribute("value"),u=document.querySelector("#attackflow_pk");let h=u.getAttribute("value");const p=r.toDataURL();if("None"==h){const r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":d},body:JSON.stringify({title:e,extension:i,afb_content:t,afb_image:p})};fetch("/attackflow/add_afb/"+s+"/"+a,r).then((e=>(0,c.mG)(this,void 0,void 0,(function*(){yield e.json();e.ok&&(window.location.href="/report/attackflow/"+s)})))).catch((e=>{console.error("There was an error!",e)}))}else{const r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":d},body:JSON.stringify({title:e,extension:i,afb_content:t,afb_image:p})};fetch("/attackflow/edit_afb/"+h,r).then((e=>(0,c.mG)(this,void 0,void 0,(function*(){yield e.json();e.ok&&(window.location.href="/report/attackflow/"+s)})))).catch((e=>{console.error("There was an error!",e)}))}}static downloadTextFile(e,t,i="txt"){let r=new Blob([t],{type:"octet/stream"}),o=window.URL.createObjectURL(r);this._aLink.href=o,this._aLink.download=`${e}.${i}`,this._aLink.click(),window.URL.revokeObjectURL(o)}static downloadImageFile(e,t){t.toBlob((t=>{if(!t)return;let i=window.URL.createObjectURL(t);this._aLink.href=i,this._aLink.download=`${e}.png`,this._aLink.click(),window.URL.revokeObjectURL(i)}),"image/octet-stream")}static openTextFileDialog(){let e=document.createElement("input");e.type="file";let t=new Promise((t=>{e.addEventListener("change",(e=>{let i=e.target.files[0],r=new FileReader;r.onload=e=>{var r;t({filename:i.name,contents:null===(r=e.target)||void 0===r?void 0:r.result})},r.readAsText(i)}))}));return e.click(),t}static fullscreen(e=document.body){let t=e;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}}L._aLink=document.createElement("a");var A={i8:"2.0.0"},V=i(262);class I{constructor(e,t){this.id=e.id,this.page=e,this.trigger=(0,V.iH)(0),this.view={x:0,y:0,k:1,w:0,h:0},this.pointer=(0,V.iH)({x:0,y:0}),this.location=(0,V.iH)(null!==t&&void 0!==t?t:{x:0,y:0,k:1}),this._undoStack=[],this._redoStack=[],B.validator&&(this._validator=new B.validator,this._validator.run(e))}static createDummy(){return(0,V.Xl)(new this(u.LM.createDummy()))}execute(e){var t;if(e.page!==this.page.id)throw new Error("Command is not configured to operate on this page.");e.execute()&&(this._redoStack=[],this._undoStack.push(e)),null===(t=this._validator)||void 0===t||t.run(this.page),this.trigger.value++}undo(){this._undoStack.length&&(this._undoStack.at(-1).undo(),this._redoStack.push(this._undoStack.pop()))}canUndo(){return 0<this._undoStack.length}redo(){this._redoStack.length&&(this._redoStack.at(-1).execute(),this._undoStack.push(this._redoStack.pop()))}canRedo(){return 0<this._redoStack.length}isValid(){var e,t;return null===(t=null===(e=this._validator)||void 0===e?void 0:e.inValidState())||void 0===t||t}getValidationErrors(){var e,t;return null!==(t=null===(e=this._validator)||void 0===e?void 0:e.getErrors())&&void 0!==t?t:[]}getValidationWarnings(){var e,t;return null!==(t=null===(e=this._validator)||void 0===e?void 0:e.getWarnings())&&void 0!==t?t:[]}static createNew(e){return(0,c.mG)(this,void 0,void 0,(function*(){let t=yield u.m1.create(e),i=t.createObject(e.page_template);return(0,V.Xl)(new I(i))}))}static fromFile(e){return(0,c.mG)(this,void 0,void 0,(function*(){let t=JSON.parse(e),i=yield u.m1.create(t.schema),r=new Map;for(let e of t.objects)r.set(e.id,e);let o=r.get(t.id),s=function e(t,i,o,s){if(!o.has(t.id)){let n=[];for(let l of t.children)n.push(e(r.get(l),i,o,s));let a=s.createObject(Object.assign(Object.assign({},t),{children:n}));o.set(a.id,a)}return o.get(t.id)}(o,r,new Map,i);return s.recalculateLayout(),(0,V.Xl)(new I(s,t.location))}))}toFile(){let e=this.view,t={x:(e.w/2-e.x)/e.k,y:(e.h/2-e.y)/e.k,k:e.k},i={version:A.i8,id:this.page.id,schema:this.page.factory.getSchema(),objects:[...this.page.getSubtree()].map((e=>e.toExport())),location:t};return JSON.stringify(i)}}class H extends O{constructor(e,t){super(e),this._editor=t}static fromNew(e){return(0,c.mG)(this,void 0,void 0,(function*(){let t=structuredClone(B.schema),i=yield I.createNew(t);return new H(e,i)}))}static fromFile(e,t){return(0,c.mG)(this,void 0,void 0,(function*(){let i=yield I.fromFile(t);return new H(e,i)}))}static fromFileSystem(e){return(0,c.mG)(this,void 0,void 0,(function*(){let t=(yield L.openTextFileDialog()).contents,i=yield I.fromFile(t);return new H(e,i)}))}static fromUrl(e,t){return(0,c.mG)(this,void 0,void 0,(function*(){let i=yield(yield fetch(t,{credentials:"omit"})).text(),r=yield I.fromFile(i);return new H(e,r)}))}execute(){this._context.pages.clear(),this._context.pages.set(this._editor.id,this._editor),this._context.activePage=this._editor}}class F extends O{constructor(e,t){super(e),this._settings=t}execute(){this._context.settings=this._settings}}class N extends O{constructor(e,t){super(e),this._url=t}execute(){window.open(this._url,"_blank")}}class R extends O{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);if(!i.isValid())throw new Error(`Page '${t}' is not valid.`);if(!this._context.publisher)throw new Error("App is not configured with a publisher.");this._editor=i}execute(){L.downloadTextFile(this._editor.page.props.toString(),this._context.publisher.publish(this._editor.page),"json")}}var z=i(536);class W extends O{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i}execute(){let e=this._context.settings.view.diagram,t=this._context.settings.file.image_export,i=new z.U(this._editor.page,t.padding,e.display_grid,e.display_shadows,e.display_debug_mode);L.downloadImageFile(this._editor.page.props.toString(),i.capture())}}class $ extends O{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i}execute(){L.downloadTextFile(this._editor.page.props.toString(),this._editor.toFile(),B.file_type_extension)}}class Y extends O{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i}execute(){let e=this._context.settings.view.diagram,t=this._context.settings.file.image_export,i=new z.U(this._editor.page,t.padding,e.display_grid,e.display_shadows,e.display_debug_mode);L.downloadTextPetereport(this._editor.page.props.toString(),this._editor.toFile(),B.file_type_extension,i.capture())}}class q extends O{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i,this._objects=[...i.page.getSubtree((e=>e.isSelected()))]}execute(){let e=this._context.settings.view.diagram,t=this._context.settings.file.image_export,i=new z.U(this._editor.page,t.padding,e.display_grid,e.display_shadows,e.display_debug_mode);L.downloadImageFile(this._editor.page.props.toString(),i.capture(this._objects))}}class G extends O{constructor(e,t,i,r){super(e);let o=e.pages.get(t);if(!o)throw new Error(`Page '${t}' not found.`);this._editor=o,this._x=i,this._y=r}execute(){this._editor.pointer.value={x:this._x,y:this._y}}}class U extends O{constructor(e,t,i){super(e);let r=e.pages.get(t);if(!r)throw new Error(`Page '${t}' not found.`);this._editor=r,this._params=i}execute(){this._editor.view=this._params}}class Z extends O{constructor(e,t){super(e),this._highQuality=t}execute(){let{diagram:e}=this._context.settings.view;e.render_high_quality=this._highQuality}}class X extends O{constructor(e){super(e)}execute(){let e=document.body;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}class K extends O{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_debug_mode=!e.display_debug_mode}}class Q extends O{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_grid=!e.display_grid}}class J extends O{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_shadows=!e.display_shadows}}const ee=e=>((0,r.dD)("data-v-19c6f860"),e=e(),(0,r.Cn)(),e),te=ee((()=>(0,r._)("span",{class:"logo"},"AFB Petereport",-1)));function ie(e,t,i,o,s,n){const a=(0,r.up)("TitleBar");return(0,r.wg)(),(0,r.j4)(a,{class:"app-title-bar-element",menus:e.menus,onSelect:e.onItemSelect},{icon:(0,r.w5)((()=>[te])),_:1},8,["menus","onSelect"])}var re=i(963);const oe={class:"icon"},se=["onMouseenter","onClick"];function ne(e,t,i,s,n,a){const l=(0,r.up)("ContextMenuListing"),c=(0,r.up)("FocusBox");return(0,r.wg)(),(0,r.j4)(c,{class:"title-bar-control",onUnfocus:e.menuClose},{default:(0,r.w5)((()=>[(0,r._)("li",oe,[(0,r.WI)(e.$slots,"icon",{},void 0,!0)]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.menus,(i=>((0,r.wg)(),(0,r.iD)("li",{key:i.text,class:(0,o.C_)({focused:i.text===e.focusedMenu}),onMouseenter:t=>e.menuEnter(i.text),onClick:t=>e.menuOpen(i.text)},[(0,r._)("p",null,(0,o.zw)(i.text),1),i.text===e.focusedMenu?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"menu-listing",sections:i.sections,onSelect:e.menuSelect,onClick:t[0]||(t[0]=(0,re.iM)((()=>{}),["stop"]))},null,8,["sections","onSelect"])):(0,r.kq)("",!0)],42,se)))),128))])),_:3},8,["onUnfocus"])}var ae=i(90);const le=e=>((0,r.dD)("data-v-03d00514"),e=e(),(0,r.Cn)(),e),ce=["onMouseenter"],de={class:"item"},ue={class:"text"},he=le((()=>(0,r._)("span",{class:"more-arrow"},null,-1))),pe={key:0,class:"submenu"},ye=["onClick"],_e=["href"],fe={class:"check"},ge={class:"text"},me={key:0,class:"shortcut"},ve={key:0,class:"section-divider"};function be(e,t,i,s,n,a){const l=(0,r.up)("ContextMenuListing",!0);return(0,r.wg)(),(0,r.iD)("div",{class:"context-menu-listing-control",style:(0,o.j5)(e.offset),onContextmenu:t[1]||(t[1]=(0,re.iM)((()=>{}),["prevent"]))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.sections,((i,s)=>((0,r.wg)(),(0,r.iD)("div",{class:"section",key:i.id},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(i.items,(i=>((0,r.wg)(),(0,r.iD)(r.HY,{key:i.text},[i.type===e.MenuType.Submenu?((0,r.wg)(),(0,r.iD)("li",{key:0,class:(0,o.C_)({disabled:i.disabled}),onMouseenter:t=>e.submenuEnter(i),onMouseleave:t[0]||(t[0]=(...t)=>e.submenuLeave&&e.submenuLeave(...t))},[(0,r._)("a",de,[(0,r._)("span",ue,(0,o.zw)(i.text),1),he]),i.text===e.focusedSubMenu?((0,r.wg)(),(0,r.iD)("div",pe,[(0,r.Wm)(l,{sections:i.sections,onSelect:e.onChildItemSelect},null,8,["sections","onSelect"])])):(0,r.kq)("",!0)],42,ce)):((0,r.wg)(),(0,r.iD)("li",{key:1,class:(0,o.C_)({disabled:i.disabled}),onClick:t=>e.onItemClick(i)},[(0,r._)("a",{class:"item",href:i.disabled?null:i.link,target:"_blank"},[(0,r.wy)((0,r._)("span",fe,"✓",512),[[re.F8,i.value]]),(0,r._)("span",ge,(0,o.zw)(i.text),1),i.shortcut?((0,r.wg)(),(0,r.iD)("span",me,(0,o.zw)(e.formatShortcut(i.shortcut)),1)):(0,r.kq)("",!0)],8,_e)],10,ye))],64)))),128)),s<e.sections.length-1?((0,r.wg)(),(0,r.iD)("a",ve)):(0,r.kq)("",!0)])))),128))],36)}var xe;(function(e){e[e["Item"]=0]="Item",e[e["Toggle"]=1]="Toggle",e[e["Submenu"]=2]="Submenu"})(xe||(xe={}));const we={Control:"Ctrl",Escape:"Esc",ArrowLeft:"←",ArrowUp:"↑",ArrowRight:"→",ArrowDown:"↓",Delete:"Del"};var Se=(0,r.aZ)({name:"ContextMenuListing",props:{sections:{type:Array,required:!0},forceInsideWindow:{type:Boolean,default:!0}},data(){return{xOffset:0,yOffset:0,leaveTimeout:500,leaveTimeoutId:0,focusedSubMenu:null,MenuType:xe}},computed:{offset(){return{marginTop:`${this.yOffset}px`,marginLeft:`${this.xOffset}px`}}},methods:{submenuEnter(e){clearTimeout(this.leaveTimeoutId),e.disabled||(this.focusedSubMenu=e.text)},submenuLeave(){this.leaveTimeoutId=setTimeout((()=>{this.focusedSubMenu=null}),this.leaveTimeout)},onItemClick(e){e.disabled||this.$emit("select",e.data,!e.keepMenuOpenOnSelect)},onChildItemSelect(e,t){this.$emit("select",e,t),t&&(this.focusedSubMenu=null)},formatShortcut(e){return e?e.split("+").map((e=>e in we?we[e]:e)).join("+"):e}},emits:["select"],mounted(){if(!this.forceInsideWindow)return;let e=window.innerWidth,t=window.innerHeight,{top:i,left:r,bottom:o,right:s}=this.$el.getBoundingClientRect();this.xOffset=s>e?-Math.min(r,s-e):0,this.yOffset=o>t?-Math.min(i,o-t):0}}),ke=i(744);const Me=(0,ke.Z)(Se,[["render",be],["__scopeId","data-v-03d00514"]]);var De=Me,je=(0,r.aZ)({name:"TitleBar",props:{menus:{type:Array,default:[]}},data(){return{focusedMenu:null}},emits:["select"],methods:{menuOpen(e){this.focusedMenu=e},menuEnter(e){null!==this.focusedMenu&&(this.focusedMenu=e)},menuClose(){this.focusedMenu=null},menuSelect(e,t){this.$emit("select",e),t&&(this.focusedMenu=null)}},components:{FocusBox:ae.Z,ContextMenuListing:De}});const Ce=(0,ke.Z)(je,[["render",ne],["__scopeId","data-v-63eba18e"]]);var Be=Ce,Pe=(0,r.aZ)({name:"AppTitleBar",computed:Object.assign(Object.assign({},(0,T.Se)("ContextMenuStore",["fileMenu","editMenu","layoutMenu","viewMenu","helpMenu"])),{menus(){return[this.fileMenu,this.editMenu,this.layoutMenu,this.viewMenu,this.helpMenu]}}),methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{onItemSelect(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{let t=e();t instanceof Promise?this.execute(yield t):this.execute(t)}catch(t){console.error(t)}}))}}),components:{TitleBar:Be}});const Te=(0,ke.Z)(Pe,[["render",ie],["__scopeId","data-v-19c6f860"]]);var Oe=Te;function Ee(e,t,i,o,s,n){const a=(0,r.up)("HotkeyBox");return(0,r.wg)(),(0,r.j4)(a,{class:"app-hotkey-box-element",hotkeys:e.hotkeys,global:!0,onFire:e.onHotkeyFired},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["hotkeys","onFire"])}const Le={class:"hotkey-box-container",tabindex:"0"};function Ae(e,t,i,o,s,n){return(0,r.wg)(),(0,r.iD)("div",Le,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}class Ve{constructor(e,t){this._boundAdvanceKeyState=this.advanceKeyState.bind(this),this._boundReverseKeyState=this.reverseKeyState.bind(this),this._callback=e,this._callLoop=void 0,this._container=null,this._hotkeyIdMap=new Map,this._keyState=".",this._recognitionDelay=t}observe(e){this._container=e,this._container.addEventListener("keydown",this._boundAdvanceKeyState),this._container.addEventListener("keyup",this._boundReverseKeyState)}disconnect(){var e,t;null===(e=this._container)||void 0===e||e.removeEventListener("keydown",this._boundAdvanceKeyState),null===(t=this._container)||void 0===t||t.removeEventListener("keyup",this._boundReverseKeyState)}setHotkeys(e){this._hotkeyIdMap=new Map;for(let t of e){if(""===t.shortcut)continue;let e=this.keySequenceToHotKeyId(t.shortcut);for(let t of this._hotkeyIdMap.keys())if(t.startsWith(e)||e.startsWith(t))throw new Ie(`Overlapping key sequences ('${t}' and '${e}') are not allowed.`);this._hotkeyIdMap.set(e,t)}}isHotkeyActive(e,t=!0){let i=this.keySequenceToHotKeyId(e);return t?this._keyState===i:this._keyState.includes(i)}advanceKeyState(e){let t=e.key.toLocaleLowerCase();if(!this._keyState.endsWith(`.${t}.`)&&(clearTimeout(this._callLoop),this._keyState+=`${t}.`,"INPUT"!==e.target.tagName))if(this._hotkeyIdMap.has(this._keyState)){let t=this._hotkeyIdMap.get(this._keyState);t.allowBrowserBehavior||e.preventDefault(),this.triggerHotkey(t)}else e.preventDefault()}reverseKeyState(e){clearTimeout(this._callLoop);let t=e.key.toLocaleLowerCase();this._keyState=this._keyState.replace(`.${t}.`,".")}triggerHotkey(e){e.data&&!e.disabled&&(this._callLoop=setTimeout((()=>{if(this._callback(e.data),!e.repeat)return;let t=function(){this._callback(e.data),this._callLoop=setTimeout(t,e.repeat.interval)}.bind(this);this._callLoop=setTimeout(t,e.repeat.delay)}),this._recognitionDelay))}keySequenceToHotKeyId(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"").split("+").join(".");return`.${t}.`}}class Ie extends Error{constructor(e){super(e)}}var He=(0,r.aZ)({name:"HotkeyBox",provide(){return{isHotkeyActive:(e,t=!0)=>this.observer.isHotkeyActive(e,t)}},props:{hotkeys:{type:Array,default:[]},global:{type:Boolean,default:!1}},data(){return{observer:(0,V.Xl)(new Ve(((e,t)=>this.$emit("fire",e,t)),0))}},emits:["fire"],watch:{hotkeys(){this.observer.setHotkeys(this.hotkeys)}},mounted(){this.observer.observe(this.global?document.body:this.$el),this.observer.setHotkeys(this.hotkeys)},unmounted(){this.observer.disconnect()}});const Fe=(0,ke.Z)(He,[["render",Ae],["__scopeId","data-v-5e99f3da"]]);var Ne=Fe,Re=(0,r.aZ)({name:"AppHotkeyBox",computed:Object.assign(Object.assign({},(0,T.Se)("HotkeyStore",["nativeHotkeys","fileHotkeys","editHotKeys","layoutHotkeys","viewHotkeys"])),{hotkeys(){return[...this.nativeHotkeys,...this.fileHotkeys,...this.editHotKeys,...this.layoutHotkeys,...this.viewHotkeys]}}),methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{onHotkeyFired(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{let t=e();if(t instanceof Promise){let e=yield t;this.execute(e)}else this.execute(t)}catch(t){console.error(t)}}))}}),components:{HotkeyBox:Ne}});const ze=(0,ke.Z)(Re,[["render",Ee]]);var We,$e=ze;function Ye(e,t,i,s,n,a){const l=(0,r.up)("ContextMenu");return(0,r.wg)(),(0,r.iD)("div",{class:"block-diagram-element",style:(0,o.j5)(e.cursorStyle)},[e.menu.show?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"block-diagram-menu",style:(0,o.j5)(e.menuStyle),sections:e.menuOptions,onSelect:e.onItemSelect,onUnfocus:e.closeContextMenu},null,8,["style","sections","onSelect","onUnfocus"])):(0,r.kq)("",!0)],4)}class qe{constructor(e){this.page=e}}qe.NullPage="$__null_page";class Ge extends qe{constructor(e,t,i,r){super(t.root.id),this._object=e,this._parent=t,this._source=i,this._target=r}execute(){this._parent.addChild(this._object);let{xMid:e,yMid:t}=this._source.boundingBox;if(this._object.srcEnding.moveTo(e,t),this._source.addChild(this._object.srcEnding),this._target){let{xMid:e,yMid:t}=this._target.boundingBox;this._object.trgEnding.moveTo(e,t),this._target.addChild(this._object.trgEnding)}return!0}undo(){this._object.setHover(u.TM.Off),this._object.setSelect(u.Ph.False),this._source.removeChild(this._object.srcEnding),this._target&&this._target.removeChild(this._object.trgEnding),this._parent.removeChild(this._object)}}class Ue extends qe{constructor(e,t){super(t.root.id),this._object=e,this._parent=t}execute(){return this._parent.addChild(this._object),!0}undo(){this._object.setHover(u.TM.Off),this._object.setSelect(u.Ph.False),this._parent.removeChild(this._object,!0,!1)}}class Ze extends qe{constructor(e,t){if(e.root.id!==t.root.id)throw new u.W_("Objects must originate from the same root.");super(e.root.id),this._object=t,this._anchor=e}execute(){return this._anchor.addChild(this._object),!0}undo(){this._anchor.removeChild(this._object)}}class Xe extends qe{constructor(e){let t=e.root;if(!t)throw new Error("Property does not have a root.");super(t.object.root.id),this._id=null,this._property=e,this._subproperty=u.Z9.create(e,e.descriptor.form)}execute(){return this._id=this._property.addProperty(this._subproperty),!0}undo(){this._id&&this._property.removeProperty(this._id)}}class Ke extends qe{constructor(){super(qe.NullPage),this._commands=[]}add(e){if(this.page!==qe.NullPage&&this.page!==e.page)throw new u.W_("Commands must operate on the same page.");this.page=e.page,this._commands.push(e)}execute(){let e=0,t=this._commands.length,i=!1;try{for(;e<t;e++){let t=this._commands[e].execute();i||(i=t)}}catch(r){for(e--;0<=e;e--)this._commands[e].undo();throw r}return i}undo(){let e=this._commands.length-1;for(let t=e;0<=t;t--)this._commands[t].undo()}}class Qe extends qe{constructor(e){let t=e[0].root.id;for(let r=1;r<e.length;r++)if(t!==e[r].root.id)throw new u.W_("Objects must originate from the same root.");super(t),this._links=[],this._items=[];for(let r of e){if(!r.parent)throw new u.W_("Object must have a parent.",r);this._items.push({index:r.getIndexInParent(),parent:r.parent,object:r})}let i=new Map;for(let r of this._items)for(let e of r.object.getSubtree())(e instanceof u.Bl||e instanceof u.Mb)&&i.set(e.id,e);for(let r of i.values())if(r instanceof u.Mb)r.isAttached()&&!i.has(r.anchor.id)&&this._links.push({index:r.getIndexInAnchor(),anchor:r.anchor,object:r});else if(r instanceof u.Bl)for(let e of r.children)i.has(e.id)||this._links.push({index:e.getIndexInAnchor(),anchor:r,object:e})}execute(){for(let e of this._links)e.anchor.removeChild(e.object);for(let e of this._items)e.parent.removeChild(e.object,!0,!1);return!0}undo(){for(let e of this._items)e.parent.addChild(e.object,e.index);for(let e of this._links)e.anchor.addChild(e.object,e.index)}}class Je extends qe{constructor(e){super(e.root.id),this._object=e}execute(){let e=this._object;while(e)e.setHover(u.TM.Off),e=e.parent;return!1}undo(){}}class et extends qe{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setSelect(u.Ph.False),!1}undo(){}}class tt extends Ke{constructor(e){super();let t=e.children.filter((e=>e.isSelected()));for(let i of t)i.isHovered()&&this.add(new Je(i)),this.add(new et(i));this.add(new Qe(t))}}class it extends Ke{constructor(e,t){super(),this._context=e;let i=t.children.filter((e=>e.isSelected()));this._objects=t.factory.cloneObjects(...i),this.add(new tt(t))}execute(){return this._context.clipboard=this._objects,super.execute()}}class rt extends qe{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");let r=e.value.get(t);if(!r)throw new Error(`Subproperty '${t}' does not exist.`);super(i.object.root.id),this._id=t,this._index=e.indexOf(t),this._property=e,this._subproperty=r}execute(){return this._property.removeProperty(this._id),!0}undo(){this._property.addProperty(this._subproperty,this._id,this._index)}}class ot extends qe{constructor(e){if(!e.isAttached())throw new u.W_("Object must be attached to an anchor.",e);super(e.root.id),this._object=e,this._anchor=e.anchor,this._index=e.getIndexInAnchor()}execute(){return this._anchor.removeChild(this._object),!0}undo(){this._anchor.addChild(this._object,this._index)}}class st extends Ke{constructor(e,t){super();let i=t.children.filter((e=>e.isSelected()));for(let s of i)this.add(new et(s));let r=e.settings.edit.clone_offset,o=t.factory.cloneObjects(...i);for(let s of o)s.moveBy(r[0],r[1]),s.setSelect(u.Ph.True),this.add(new Ue(s,t))}}class nt extends qe{constructor(e){super(e.root.id),this._object=e}execute(){this._object.setHover(u.TM.Direct);let e=this._object.parent;while(e)e.setHover(u.TM.Indirect),e=e.parent;return!1}undo(){}}class at extends qe{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setSelect(u.Ph.True),!1}undo(){}}class lt extends Ke{constructor(e){super();for(let t of e.getSubtree((e=>e.isSelected())))this.add(new et(t))}}class ct extends qe{constructor(e,t){let i=t[0].root;for(let g=1;g<t.length;g++)if(i.id!==t[g].root.id)throw new u.W_("Objects must originate from the same root.");let r=e.pages.get(i.id);if(!r)throw new Error("Objects must be managed by an editor.");super(i.id),this._editor=r;let o=1/0,s=1/0,n=-1/0,a=-1/0;for(let u of t)o=Math.min(o,u.boundingBox.xMin),s=Math.min(s,u.boundingBox.yMin),n=Math.max(n,u.boundingBox.xMax),a=Math.max(a,u.boundingBox.yMax);let l=n-o,c=a-s,d=Math.round((o+n)/2),h=Math.round((s+a)/2),p=l/r.view.w,y=c/r.view.h,_=Math.max(p,y),f=Math.min(.9/_,1.5);this._location={x:d,y:h,k:f}}execute(){return this._editor.location.value=this._location,!1}undo(){}}class dt extends Ke{constructor(e,t){super();let i=t.children.filter((e=>e.isSelected()));if(!i.length)return;let r=new Set;for(let o of i)for(let e of this.getNextBlocks(o))r.add(e);this.add(new lt(t));for(let o of r)this.add(new at(o));r.size&&this.add(new ct(e,[...r]))}getNextBlocks(e){let t=new Set,i=u.vl.getNextGraphLinks(e);for(let r of i)r instanceof u.eq?t=new Set([...t,...this.getNextBlocks(r)]):t.add(r);return t}}class ut extends Ke{constructor(e,t){super();let i=t.children.filter((e=>e.isSelected()));if(!i.length)return;let r=new Set;for(let o of i)for(let e of this.getPrevBlocks(o))r.add(e);this.add(new lt(t));for(let o of r)this.add(new at(o));r.size&&this.add(new ct(e,[...r]))}getPrevBlocks(e){let t=new Set,i=u.vl.getPrevGraphLinks(e);for(let r of i)r instanceof u.eq?t=new Set([...t,...this.getPrevBlocks(r)]):t.add(r);return t}}class ht extends Ke{constructor(e,t){super();let i=t.children.filter((e=>e.isSelected()));i.length&&this.add(new ct(e,i))}}class pt extends qe{constructor(e,t,i){super(e.root.id),this._object=e,this._dx=t,this._dy=i}execute(){return this._object.moveBy(this._dx,this._dy),!0}undo(){this._object.moveBy(-this._dx,-this._dy)}}class yt extends qe{constructor(e,t,i){super(e.root.id),this._object=e,this._lx=e.boundingBox.xMid,this._ly=e.boundingBox.yMid,this._nx=t,this._ny=i}execute(){return this._object.moveTo(this._nx,this._ny),!0}undo(){this._object.moveTo(this._lx,this._ly)}}class _t extends Ke{constructor(e,t){super(),this._context=e,this.add(new lt(t));let i=t.factory.cloneObjects(...e.clipboard);for(let r of i)r.setSelect(u.Ph.True),this.add(new Ue(r,t))}execute(){let e=this._context.settings.edit.clone_offset;for(let t of this._context.clipboard)t.moveBy(e[0],e[1]);return super.execute()}}class ft extends qe{constructor(e,t){super(t);let i=e.pages.get(t);if(!i)throw new Error(`'${t}' is not a page.`);this._editor=i}execute(){return this._editor.redo(),!1}undo(){}}class gt extends qe{constructor(e,t){if(!e.parent)throw new u.W_("Object must have a parent.",e);switch(super(e.root.id),this._object=e,this._parent=e.parent,this._prevIndex=e.getIndexInParent(),t){case We.Top:this._nextIndex=e.children.length;break;case We.OneAbove:this._nextIndex=this._prevIndex+1;break;case We.OneBelow:this._nextIndex=this._prevIndex-1;break;case We.Bottom:this._nextIndex=0;break}}execute(){return this._parent.reorderChild(this._object.id,this._nextIndex),!0}undo(){this._parent.reorderChild(this._object.id,this._prevIndex)}}(function(e){e[e["Top"]=0]="Top",e[e["OneAbove"]=2]="OneAbove",e[e["OneBelow"]=3]="OneBelow",e[e["Bottom"]=4]="Bottom"})(We||(We={}));class mt extends Ke{constructor(e,t){super();let i=e.children.filter((e=>e.isSelected()));switch(t){case We.Top:case We.OneAbove:for(let e=i.length-1;0<=e;e--)this.add(new gt(i[e],t));break;case We.Bottom:case We.OneBelow:for(let e=0;e<i.length;e++)this.add(new gt(i[e],t));break}}}class vt extends qe{constructor(e,t){super(t.id);let i=e.pages.get(t.id);if(!i)throw new Error(`Page '${t.id}' does not have an editor.`);this._editor=i}execute(){return this._editor.location.value={x:0,y:0,k:1},!1}undo(){}}class bt extends Ke{constructor(e){super();for(let t of e.children)this.add(new at(t))}}class xt extends qe{constructor(e,t){let i=e.toRawValue(),r=e.root;if(!r)throw new Error("Property does not have a root.");super(r.object.root.id),this._property=e,this._lastValue=null!==i?new Date(i):i,this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class wt extends qe{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class St extends qe{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class kt extends qe{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class Mt extends Ke{constructor(e,t,i,r,o){super();let s=e.pages.get(t.root.id);if(!s)throw new Error(`'${t.id}' must belong to an existing editor.`);let n=t.factory.createObject(i),a=s.view;if(void 0===r)r=Math.round((a.w/2-a.x)/a.k);else{let{xMid:e,xMin:t}=n.boundingBox;r=(r-a.x)/a.k+e-t}if(void 0===o)o=Math.round((a.h/2-a.y)/a.k);else{let{yMid:e,yMin:t}=n.boundingBox;o=(o-a.y)/a.k+e-t}n.getAlignment()===u.v2.Grid&&(r=(0,u.NM)(r,s.page.grid[0]),o=(0,u.NM)(o,s.page.grid[1])),n.moveTo(r,o),this.add(new Ue(n,t))}}class Dt extends qe{constructor(e,t){super(t);let i=e.pages.get(t);if(!i)throw new Error(`'${t}' is not a page.`);this._editor=i}execute(){return this._editor.undo(),!1}undo(){}}class jt extends Ke{constructor(e){super();for(let t of e.getSubtree(this.isDirectlyHovered))this.add(new Je(t))}isDirectlyHovered(e){return(e.attrs&u.g_)===u.TM.Direct}}class Ct extends qe{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setPositionSetByUser(u.X$.True),!0}undo(){this._object.setPositionSetByUser(u.X$.False)}}class Bt extends qe{constructor(e,t,i){super(t.id);let r=e.pages.get(t.id);if(!r)throw new Error(`Page '${t.id}' does not have an editor.`);this._editor=r;let o=r.view.k,s=(r.view.w/2-r.view.x)/o,n=(r.view.h/2-r.view.y)/o;this._location={x:s,y:n,k:o+i}}execute(){return this._editor.location.value=this._location,!1}undo(){}}function Pt(e,t,i,s,n,a){const l=(0,r.up)("ContextMenuListing"),c=(0,r.up)("FocusBox");return(0,r.wg)(),(0,r.j4)(c,{style:(0,o.j5)(e.offset),class:"context-menu-control",onUnfocus:t[1]||(t[1]=t=>e.$emit("unfocus")),onContextmenu:t[2]||(t[2]=(0,re.iM)((()=>{}),["prevent"]))},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{sections:e.sections,onSelect:t[0]||(t[0]=t=>e.$emit("select",t)),forceInsideWindow:!1},null,8,["sections"])])),_:1},8,["style"])}var Tt=(0,r.aZ)({name:"ContextMenu",props:{sections:{type:Array,required:!0}},data(){return{xOffset:0,yOffset:0}},computed:{offset(){return{marginTop:`${this.yOffset}px`,marginLeft:`${this.xOffset}px`}}},emits:["select","unfocus"],mounted(){let e=window.innerWidth,t=window.innerHeight,{bottom:i,right:r}=this.$el.getBoundingClientRect();this.xOffset=r>e?-(this.$el.clientWidth-1):0,this.yOffset=i>t?-(this.$el.clientHeight-1):0},components:{FocusBox:ae.Z,ContextMenuListing:De}});const Ot=(0,ke.Z)(Tt,[["render",Pt],["__scopeId","data-v-6a0233c2"]]);var Et=Ot,Lt=(0,r.aZ)({name:"BlockDiagram",setup(){return{isHotkeyActive:(0,r.f3)("isHotkeyActive")}},data(){return{cursor:u.CF.Default,diagram:(0,V.Xl)(new u.cK),menu:{x:0,y:0,show:!1},view:{x:0,y:0,k:1,w:0,h:0}}},computed:Object.assign(Object.assign(Object.assign(Object.assign({},(0,T.rn)("ApplicationStore",{ctx(e){return e},editor(e){return e.activePage},camera(e){return e.activePage.location.value},pageUpdate(e){return e.activePage.trigger.value},displayGrid(e){return e.settings.view.diagram.display_grid},displayShadows(e){return e.settings.view.diagram.display_shadows},displayDebugMode(e){return e.settings.view.diagram.display_debug_mode},renderHighQuality(e){return e.settings.view.diagram.render_high_quality},disableShadowsAt(e){return e.settings.view.diagram.disable_shadows_at},multiselectHotkey(e){return e.settings.hotkeys.select.many}})),(0,T.Se)("ApplicationStore",["hasSelection"])),(0,T.Se)("ContextMenuStore",["deleteMenu","clipboardMenu","duplicateMenu","layeringMenu","jumpMenu","undoRedoMenu","createAtMenu","selectAllMenu","zoomMenu","diagramViewMenu"])),{cursorStyle(){return{cursor:u.CQ[this.cursor]}},menuStyle(){return{top:`${this.menu.y}px`,left:`${this.menu.x}px`}},menuOptions(){return this.hasSelection?[this.deleteMenu,this.clipboardMenu,this.duplicateMenu,this.layeringMenu,this.jumpMenu]:[this.undoRedoMenu,this.createAtMenu,this.selectAllMenu,this.zoomMenu,this.diagramViewMenu]}}),methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{onItemSelect(e){return(0,c.mG)(this,void 0,void 0,(function*(){try{let t=e();t instanceof Promise?this.execute(yield t):this.execute(t)}catch(t){console.error(t)}this.closeContextMenu()}))},openContextMenu(e,t){requestAnimationFrame((()=>{this.menu.show=!0,this.menu.x=e,this.menu.y=t}))},closeContextMenu(){this.menu.show=!1},onObjectHover(e,t){this.cursor=t,this.execute(new jt(this.editor.page)),e&&this.execute(new nt(e))},onObjectClick(e,t,i,r){let o=this.isHotkeyActive(this.multiselectHotkey);o||t.isSelected()||this.execute(new lt(this.editor.page)),this.execute(new at(t)),e.button===u.zn.Right&&this.openContextMenu(i,r)},onCanvasClick(e,t,i){this.execute(new lt(this.editor.page)),this.execute(new G(this.ctx,this.editor.id,t,i)),e.button===u.zn.Right&&this.openContextMenu(t,i)},onObjectMove(e,t,i){let r=new Ke;for(let o of e)o.hasUserSetPosition()||r.add(new Ct(o)),r.add(new pt(o,t,i));this.execute(r)},onObjectAttach(e,t){let{xMid:i,yMid:r}=t.boundingBox,o=new Ke;e.isAttached()&&o.add(new ot(e)),o.add(new yt(e,i,r)),o.add(new Ze(t,e)),this.execute(o)},onObjectDetach(e,t,i){let r=new Ke;r.add(new ot(e)),r.add(new pt(e,t,i)),this.execute(r)},onLineCreate(e,t,i,r){this.execute(new Ge(e,t,i,r)),this.execute(new lt(this.editor.page)),this.execute(new at(e))},onViewTransform(e,t,i,r,o){this.view={x:e,y:t,k:i,w:r,h:o},this.execute(new U(this.ctx,this.editor.id,Object.assign({},this.view)))}}),watch:{editor(){this.diagram.setPage((0,V.Xl)(this.editor.page)),this.diagram.updateView(),this.diagram.setCameraLocation(this.camera,0),this.execute(new U(this.ctx,this.editor.id,Object.assign({},this.view)))},camera(){this.diagram.setCameraLocation(this.camera)},pageUpdate(){this.diagram.updateView(),this.diagram.render()},displayGrid(){this.diagram.setGridDisplay(this.displayGrid),this.diagram.render()},displayShadows(){this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.render()},displayDebugMode(){this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.render()},renderHighQuality(){this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.render()},disableShadowsAt(){this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.render()}},mounted(){this.diagram.on("object-hover",this.onObjectHover),this.diagram.on("object-click",this.onObjectClick),this.diagram.on("canvas-click",this.onCanvasClick),this.diagram.on("object-move",this.onObjectMove),this.diagram.on("object-attach",this.onObjectAttach),this.diagram.on("object-detach",this.onObjectDetach),this.diagram.on("view-transform",this.onViewTransform),this.diagram.on("line-create",this.onLineCreate),this.diagram.setGridDisplay(this.displayGrid),this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.setPage((0,V.Xl)(this.editor.page)),this.diagram.inject(this.$el),this.diagram.updateView(),this.diagram.setCameraLocation(this.camera,0)},unmounted(){this.diagram.destroy()},components:{ContextMenu:Et}});const At=(0,ke.Z)(Lt,[["render",Ye],["__scopeId","data-v-52fd0e8e"]]);var Vt=At;const It=e=>((0,r.dD)("data-v-783f2534"),e=e(),(0,r.Cn)(),e),Ht={class:"app-footer-bar-element"},Ft={class:"info left"},Nt={class:"selected"},Rt=It((()=>(0,r._)("span",null,"Selected:",-1))),zt={class:"info right"},Wt={key:0,class:"page-check valid"},$t=It((()=>(0,r._)("span",null,"✓",-1))),Yt={key:1,class:"page-check invalid"},qt=It((()=>(0,r._)("span",null,"⚠",-1)));function Gt(e,t,i,s,n,a){return(0,r.wg)(),(0,r.iD)("div",Ht,[(0,r._)("div",Ft,[(0,r._)("p",Nt,[Rt,(0,r.Uk)(" "+(0,o.zw)(e.hasSelection),1)])]),(0,r._)("div",zt,[e.isValid?((0,r.wg)(),(0,r.iD)("div",Wt,[$t,(0,r.Uk)(" Valid "+(0,o.zw)(e.fileName),1)])):((0,r.wg)(),(0,r.iD)("div",Yt,[qt,(0,r.Uk)(" Invalid "+(0,o.zw)(e.fileName),1)]))])])}var Ut=(0,r.aZ)({name:"AppFooterBar",data(){return{fileName:B.file_type_name}},computed:Object.assign({},(0,T.Se)("ApplicationStore",["hasSelection","isValid"]))});const Zt=(0,ke.Z)(Ut,[["render",Gt],["__scopeId","data-v-783f2534"]]);var Xt=Zt;function Kt(e,t,i,o,s,n){const a=(0,r.up)("PropertyEditor"),l=(0,r.up)("AccordionPane"),c=(0,r.up)("ValidatorProblems"),d=(0,r.up)("AccordionBox");return(0,r.wg)(),(0,r.j4)(d,{class:"editor-tabs-element"},{default:(0,r.w5)((()=>[(0,r.Wm)(l,{name:"Properties",units:3},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{class:"properties-pane",property:e.selected},{"no-props":(0,r.w5)((()=>[(0,r.Uk)(" The selected object has no properties. ")])),"no-prop":(0,r.w5)((()=>[(0,r.Uk)(" Select a single object to edit its properties. ")])),_:1},8,["property"])])),_:1}),(0,r.Wm)(l,{name:"Problems",units:1},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{class:"validator-problems-pane"})])),_:1})])),_:1})}var Qt=i(55),Jt=(0,r.aZ)({name:"AccordionBox",data(){return{track:(0,V.Xl)(new P.k),panes:[],activePane:0,onResizeObserver:null}},props:{collapseHeight:{type:Number,default:30}},computed:{boxStyle(){let e=this.panes.map((e=>`${e.activeHeight+this.collapseHeight}px`)).join(" ");return{gridTemplateRows:e}}},methods:{onCollapse(e,t){this.panes[t].collapsed?this.uncollapsePane(t):this.collapsePane(t)},collapsePane(e){let t=this.panes;this.cacheHeights();let i=t.reduce(((e,t)=>e+t.cachedHeight),0),r=this.getAvailableHeight(),o=i-t[e].cachedHeight;if(t[e].collapsed=!0,t[e].activeHeight=0,t[e].uncollapsedHeight=t[e].cachedHeight,o<r){let i=r-o,s=Math.min(i,t[e].cachedHeight);for(let e=t.length-1;0<=e;e--)if(!t[e].collapsed){t[e].activeHeight+=s;break}}this.cacheHeights()},uncollapsePane(e){let t=this.panes,i=t[e].uncollapsedHeight;this.cacheHeights();let r=t.reduce(((e,t)=>e+t.cachedHeight),0),o=this.getAvailableHeight();0===r&&(t[e].activeHeight+=o,i-=Math.min(i,o));for(let s=t.length-1;0<=s;s--){if(t[s].collapsed)continue;let r=t[s].cachedHeight-t[s].minHeight,o=Math.min(r,i);t[s].activeHeight-=o,t[e].activeHeight+=o,i-=o}t[e].activeHeight=Math.max(t[e].activeHeight,t[e].minHeight),t[e].collapsed=!1,this.cacheHeights()},startDrag(e,t){this.cacheHeights(),this.activePane=t,this.track.capture(e,this.onDrag),document.addEventListener("pointerup",this.stopDrag,{once:!0})},onDrag(e,t){let i=this.panes;if(0!==t.movementY)if(i.forEach((e=>e.activeHeight=e.cachedHeight)),t.deltaY<0){let e=-1;for(let t=this.activePane;t<i.length;t++)if(!i[t].collapsed){e=t;break}if(-1===e)return;let r=Math.abs(t.deltaY);for(let t=this.activePane-1;0<=t;t--){if(i[t].collapsed)continue;let e=i[t].cachedHeight-i[t].minHeight,o=Math.min(e,r);i[t].activeHeight=i[t].cachedHeight-o,r-=o}let o=Math.abs(t.deltaY)-r;i[e].activeHeight=i[e].cachedHeight+o}else{let e=-1;for(let t=this.activePane-1;0<=t;t--)if(!i[t].collapsed){e=t;break}if(-1===e)return;let r=t.deltaY;for(let t=this.activePane;t<i.length;t++){if(i[t].collapsed)continue;let e=i[t].cachedHeight-i[t].minHeight,o=Math.min(e,r);i[t].activeHeight=i[t].cachedHeight-o,r-=o}let o=t.deltaY-r;i[e].activeHeight=i[e].cachedHeight+o}},stopDrag(e){this.track.release(e),this.cacheHeights()},refit(){let e=this.panes,t=e.reduce(((e,t)=>e+t.cachedHeight),0),i=this.getAvailableHeight();if(0!==t)if(t<=i){let r=e.map((e=>e.cachedHeight/t));for(let t=0;t<e.length;t++)e[t].activeHeight=i*r[t]}else{let r=e.reduce(((e,t)=>e+(t.collapsed?0:t.minHeight)),0),o=t-Math.max(r,i),s=t-r,n=0!==s?o/s:1;for(let t=0;t<e.length;t++){if(e[t].collapsed)continue;let i=(e[t].cachedHeight-e[t].minHeight)*n;e[t].activeHeight=e[t].cachedHeight-i}}},reset(){var e,t,i,r,o,s;if(!this.$slots.default)return;let n=[],a=[];for(let d of this.$slots.default())a.push(null!==(t=null===(e=d.props)||void 0===e?void 0:e.units)&&void 0!==t?t:1),n.push({minHeight:null!==(r=null===(i=d.props)||void 0===i?void 0:i.minHeight)&&void 0!==r?r:100,activeHeight:0,cachedHeight:0,uncollapsedHeight:0,collapsed:null!==(s=null===(o=d.props)||void 0===o?void 0:o.collapsed)&&void 0!==s&&s});let l=this.getAvailableHeight(),c=a.reduce(((e,t)=>e+t));for(let d=0;d<n.length;d++){let e=n[d],t=l*(a[d]/c);e.cachedHeight=Math.max(e.minHeight,t)}this.panes=n,this.refit();for(let d=0;d<this.panes.length;d++)this.panes[d].collapsed&&this.collapsePane(d)},getAvailableHeight(){let e=this.$el.clientHeight;if(this.$slots.default){let t=this.$slots.default().length;return e-t*this.collapseHeight}return e},cacheHeights(){for(let e of this.panes)e.cachedHeight=e.activeHeight}},mounted(){this.onResizeObserver=new ResizeObserver((()=>this.refit())),this.onResizeObserver.observe(this.$el),this.reset()},unmounted(){this.onResizeObserver.disconnect()},render(){var e,t,i;let o=[];if(this.$slots.default){let s=this.$slots.default();for(let n=0;n<s.length;n++){let a=s[n],l=(0,r.h)("div",{class:"accordion-box-handle",onPointerup:e=>this.stopDrag(e),onPointerdown:e=>this.startDrag(e,n)}),c=(0,r.h)("div",{class:"accordion-box-head",style:{height:`${this.$props.collapseHeight}px`},onClick:e=>this.onCollapse(e,n)},[(0,r.h)(Qt.Z,{class:"collapse-arrow",collapsed:null===(e=this.panes[n])||void 0===e?void 0:e.collapsed}),(0,r.h)("p",null===(t=a.props)||void 0===t?void 0:t.name.toLocaleUpperCase())]),d=(0,r.h)("div",{class:"accordion-box-body"},a),u=(0,r.h)("div",{class:["accordion-box",{collapsed:null===(i=this.panes[n])||void 0===i?void 0:i.collapsed}]},[l,c,d]);o.push(u)}}return(0,r.h)("div",{class:"accordion-box-container",style:this.boxStyle},o)}});const ei=(0,ke.Z)(Jt,[["__scopeId","data-v-39ee0bdf"]]);var ti=ei;const ii={class:"accordion-pane-container"};function ri(e,t,i,o,s,n){return(0,r.wg)(),(0,r.iD)("div",ii,[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var oi=(0,r.aZ)({name:"AccordionPane",props:{name:{type:String,required:!0},units:{type:Number,default:1},minHeight:{type:Number,default:100},collapsed:{type:Boolean,default:!1}}});const si=(0,ke.Z)(oi,[["render",ri],["__scopeId","data-v-22255fa2"]]);var ni=si;const ai={class:"object-editor-element"},li={key:1,class:"no-prop"},ci={key:1,class:"no-prop"};function di(e,t,i,o,s,n){const a=(0,r.up)("DictionaryFieldContents"),l=(0,r.up)("ScrollBox");return(0,r.wg)(),(0,r.iD)("div",ai,[e.property?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.hasEditableProperties?((0,r.wg)(),(0,r.j4)(l,{key:0,alwaysShowScrollBar:!0,scrollColor:"#1f1f1f"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{class:"contents",property:e.property,onChange:e.onChange,onCreate:e.onCreate,onDelete:e.onDelete},null,8,["property","onChange","onCreate","onDelete"])])),_:1})):((0,r.wg)(),(0,r.iD)("p",li,[(0,r.WI)(e.$slots,"no-props",{},void 0,!0)]))],64)):((0,r.wg)(),(0,r.iD)("p",ci,[(0,r.WI)(e.$slots,"no-prop",{},void 0,!0)]))])}var ui=i(873),hi=i(523),pi=(0,r.aZ)({name:"PropertyEditor",props:{property:{type:Object,default:void 0}},computed:{hasEditableProperties(){var e;if(!this.property)return!1;for(let t of this.property.value.values())if(null===(e=t.descriptor.is_visible)||void 0===e||e)return!0;return!1}},methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{onChange(e,t){switch(e.type){case u.uS.Int:case u.uS.Float:e instanceof u.Y6&&this.execute(new St(e,t));break;case u.uS.String:e instanceof u.h_&&this.execute(new kt(e,t));break;case u.uS.Date:e instanceof u.ze&&this.execute(new xt(e,t));break;case u.uS.Enum:e instanceof u.Tf&&this.execute(new wt(e,t));break}},onCreate(e){switch(e.type){case u.uS.List:e instanceof u.XX&&this.execute(new Xe(e));break}},onDelete(e,t){switch(e.type){case u.uS.List:e instanceof u.XX&&this.execute(new rt(e,t));break}}}),components:{ScrollBox:ui.Z,DictionaryFieldContents:hi.Z}});const yi=(0,ke.Z)(pi,[["render",di],["__scopeId","data-v-5d47093b"]]);var _i=yi;const fi=e=>((0,r.dD)("data-v-28e3dbca"),e=e(),(0,r.Cn)(),e),gi={class:"validator-problems-element"},mi={class:"content"},vi=["onClick"],bi=fi((()=>(0,r._)("span",{class:"icon"},"",-1))),xi={class:"message"},wi=["onClick"],Si=fi((()=>(0,r._)("span",{class:"icon"},"",-1))),ki={class:"message"};function Mi(e,t,i,s,n,a){const l=(0,r.up)("ScrollBox");return(0,r.wg)(),(0,r.iD)("div",gi,[0<e.getValidationErrors.length||0<e.getValidationWarnings.length?((0,r.wg)(),(0,r.j4)(l,{key:0,class:"scrollbox",alwaysShowScrollBar:!0,scrollColor:"#1f1f1f"},{default:(0,r.w5)((()=>[(0,r._)("div",mi,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getValidationErrors,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"validation-result error",key:t,onClick:i=>e.focus(t.object)},[bi,(0,r._)("p",xi,(0,o.zw)(t.reason),1)],8,vi)))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.getValidationWarnings,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"validation-result warning",key:t,onClick:i=>e.focus(t.object)},[Si,(0,r._)("p",ki,(0,o.zw)(t.reason),1)],8,wi)))),128))])])),_:1})):(0,r.kq)("",!0)])}var Di=(0,r.aZ)({name:"ValidatorProblems",computed:Object.assign(Object.assign({},(0,T.rn)("ApplicationStore",{ctx(e){return e},editor(e){return e.activePage}})),(0,T.Se)("ApplicationStore",["getValidationErrors","getValidationWarnings"])),methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{focus(e){let t=this.editor.page.lookup(e);t===this.editor.page?this.execute(new lt(this.editor.page)):t&&(this.execute(new lt(this.editor.page)),this.execute(new at(t)),this.execute(new ht(this.ctx,this.editor.page)))}}),components:{ScrollBox:ui.Z}});const ji=(0,ke.Z)(Di,[["render",Mi],["__scopeId","data-v-28e3dbca"]]);var Ci=ji,Bi=(0,r.aZ)({name:"EditorSidebar",computed:Object.assign(Object.assign(Object.assign({},(0,T.rn)("ApplicationStore",{page(e){return e.activePage.page}})),(0,T.Se)("ApplicationStore",["hasSelection","getSelection"])),{selected(){return 0===this.hasSelection?this.page.props:1===this.hasSelection?this.getSelection[0].props:void 0}}),components:{AccordionBox:ti,AccordionPane:ni,PropertyEditor:_i,ValidatorProblems:Ci}});const Pi=(0,ke.Z)(Bi,[["render",Kt],["__scopeId","data-v-09fcd1e8"]]);var Ti=Pi;const Oi={None:0,Right:1};var Ei=(0,r.aZ)({name:"App",setup(){return{body:(0,V.iH)(null)}},data(){return{Handle:Oi,bodyWidth:-1,bodyHeight:-1,frameSize:{[Oi.Right]:350},minFrameSize:{[Oi.Right]:310},drag:{handle:Oi.None,track:(0,V.Xl)(new P.k)},onResizeObserver:null}},computed:Object.assign(Object.assign({},(0,T.rn)("ApplicationStore",{context(e){return e}})),{gridLayout(){let e=this.frameSize[Oi.Right];return{gridTemplateColumns:`minmax(0, 1fr) ${e}px`}}}),methods:Object.assign(Object.assign({},(0,T.OI)("ApplicationStore",["execute"])),{startResize(e,t){let i=this.frameSize[t];this.drag.handle=t,this.drag.track.capture(e,((e,t)=>{this.onResize(i,t)})),document.addEventListener("pointerup",this.stopResize,{once:!0})},onResize(e,t){switch(this.drag.handle){default:case Oi.None:break;case Oi.Right:this.setRightFrameSize(e-t.deltaX);break}},stopResize(e){this.drag.handle=Oi.None,this.drag.track.release(e)},setRightFrameSize(e){let t=this.bodyWidth,i=this.minFrameSize[Oi.Right];this.frameSize[Oi.Right]=(0,u.uZ)(e,i,t)}}),created(){return(0,c.mG)(this,void 0,void 0,(function*(){let e;e=B.is_web_hosted?yield(yield fetch("./settings.json")).json():i(261),this.execute(new F(this.context,e));const t=document.querySelector("#report_pk"),r=(t.getAttribute("value"),document.querySelector("#finding_pk")),o=(r.getAttribute("value"),document.querySelector("#attackflow_pk")),s=o.getAttribute("value"),n=document.querySelector("#attackflow_afb");let a=n.getAttribute("value");"None"!=s?this.execute(yield H.fromFile(this.context,a)):this.execute(yield H.fromNew(this.context));let l=new URLSearchParams(window.location.search),c=l.get("src");if(c)try{this.execute(yield H.fromUrl(this.context,c))}catch(d){console.error(`Failed to load file from url: '${c}'`),console.error(d)}}))},mounted(){this.bodyWidth=this.body.clientWidth,this.bodyHeight=this.body.clientHeight,this.onResizeObserver=new ResizeObserver((()=>{this.bodyWidth=this.body.clientWidth,this.bodyHeight=this.body.clientHeight,this.setRightFrameSize(this.frameSize[Oi.Right])})),this.onResizeObserver.observe(this.body)},unmounted(){var e;null===(e=this.onResizeObserver)||void 0===e||e.disconnect()},components:{AppHotkeyBox:$e,AppTitleBar:Oe,BlockDiagram:Vt,AppFooterBar:Xt,EditorSidebar:Ti}});const Li=(0,ke.Z)(Ei,[["render",l]]);var Ai=Li;const Vi={file:{image_export:{padding:0}},edit:{clone_offset:[0,0]},view:{diagram:{display_grid:!0,display_shadows:!0,display_debug_mode:!1,render_high_quality:!0,disable_shadows_at:0}},hotkeys:{file:{new_file:"",open_file:"",save_file:"",save_image:"",save_select_image:"",publish_file:"",open_library:"",save_library:""},edit:{undo:"",redo:"",cut:"",copy:"",paste:"",delete:"",duplicate:"",select_all:""},layout:{selection_to_front:"",selection_to_back:"",bring_selection_forward:"",send_selection_backward:"",align_left:"",align_center:"",align_right:"",align_top:"",align_middle:"",align_bottom:"",group:"",ungroup:"",open_group:"",close_group:""},view:{toggle_grid:"",toggle_shadows:"",reset_view:"",zoom_in:"",zoom_out:"",fullscreen:"",jump_to_selection:"",jump_to_parents:"",jump_to_children:"",toggle_debug_view:""},select:{many:""}}},Ii=B.publisher?new B.publisher:void 0,Hi=I.createDummy();var Fi={namespaced:!0,state:{settings:Vi,clipboard:[],publisher:Ii,pages:new Map([[Hi.id,Hi]]),activePage:Hi},getters:{hasClipboardContents(e){return 0<e.clipboard.length},hasSelection(e){let t=[...e.activePage.page.getSubtree((e=>e.isSelected()))];return(e.activePage.trigger.value,t).length},getSelection(e){let t=[...e.activePage.page.getSubtree((e=>e.isSelected()))];return e.activePage.trigger.value,t},isValid(e){let t=e.activePage;return(e.activePage.trigger.value,t).isValid()},getValidationErrors(e){let t=e.activePage;return(e.activePage.trigger.value,t).getValidationErrors()},getValidationWarnings(e){let t=e.activePage;return(e.activePage.trigger.value,t).getValidationWarnings()}},mutations:{execute(e,t){if(t instanceof qe){if(t.page===qe.NullPage)return;let i=e.pages.get(t.page);if(!i)throw new Error(`'${t.page}' is not a page.`);i.execute(t)}else t.execute()}}},Ni={namespaced:!0,getters:{fileMenu(e,t,i){let r=i.ApplicationStore,o=[t.openFileMenu,t.saveFileMenu,r.publisher?t.publishFileMenu:null,t.PetereportFileMenu].filter(Boolean);return{text:"Attack Flow File",type:xe.Submenu,sections:o}},openFileMenu(e,t,i){let r=i.ApplicationStore,o=r.settings.hotkeys.file;return{id:"open_file_options",items:[{text:"New File",type:xe.Item,data:()=>H.fromNew(r),shortcut:o.new_file},{text:"Open File...",type:xe.Item,data:()=>H.fromFileSystem(r),shortcut:o.open_file}]}},PetereportFileMenu(e,t,i,r){let o=i.ApplicationStore,s=(o.settings.hotkeys.file,o.activePage.page);return{id:"save_petereport_options",items:[{text:"Save AttackFlow in Petereport and exit",type:xe.Item,data:()=>new Y(o,s.id)}]}},saveFileMenu(e,t,i,r){let o=i.ApplicationStore,s=o.settings.hotkeys.file,n=o.activePage.page;return{id:"save_file_options",items:[{text:"Save as AFB file",type:xe.Item,data:()=>new $(o,n.id),shortcut:s.save_file},{text:"Save as Image",type:xe.Item,data:()=>new W(o,n.id),shortcut:s.save_image},{text:"Save Selection as Image",type:xe.Item,data:()=>new q(o,n.id),shortcut:s.save_select_image,disabled:!r["ApplicationStore/hasSelection"]}]}},publishFileMenu(e,t,i,r){let o=i.ApplicationStore,s=o.settings.hotkeys.file,n=o.activePage.page;return{id:"publish_options",items:[{text:`Publish ${B.file_type_name}`,type:xe.Item,data:()=>new R(o,n.id),shortcut:s.publish_file,disabled:!r["ApplicationStore/isValid"]}]}},editMenu(e,t){return{text:"Edit",type:xe.Submenu,sections:[t.undoRedoMenu,t.clipboardMenu,t.deleteMenu,t.duplicateMenu,t.createMenu,t.selectAllMenu]}},undoRedoMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.edit;return{id:"undo_redo_options",items:[{text:"Undo",type:xe.Item,data:()=>new Dt(r,o.id),shortcut:s.undo,disabled:!r.activePage.canUndo()},{text:"Redo",type:xe.Item,data:()=>new ft(r,o.id),shortcut:s.redo,disabled:!r.activePage.canRedo()}]}},clipboardMenu(e,t,i,r){let o=i.ApplicationStore,s=o.activePage.page,n=o.settings.hotkeys.edit,a=o.clipboard.length,l=r["ApplicationStore/hasSelection"];return{id:"clipboard_options",items:[{text:"Cut",type:xe.Item,data:()=>new it(o,s),shortcut:n.cut,disabled:!l},{text:"Copy",type:xe.Item,data:()=>new E(o,s),shortcut:n.copy,disabled:!l},{text:"Paste",type:xe.Item,data:()=>new _t(o,s),shortcut:n.paste,disabled:!a}]}},deleteMenu(e,t,i,r){let o=i.ApplicationStore,s=o.activePage.page,n=o.settings.hotkeys.edit,a=r["ApplicationStore/hasSelection"];return{id:"delete_options",items:[{text:"Delete",type:xe.Item,data:()=>new tt(s),shortcut:n.delete,disabled:!a}]}},duplicateMenu(e,t,i,r){let o=i.ApplicationStore,s=o.activePage.page,n=o.settings.hotkeys.edit,a=r["ApplicationStore/hasSelection"];return{id:"duplicate_options",items:[{text:"Duplicate",type:xe.Item,data:()=>new st(o,s),shortcut:n.duplicate,disabled:!a}]}},selectAllMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.edit;return{id:"select_options",items:[{text:"Select All",type:xe.Item,data:()=>new bt(o),shortcut:s.select_all}]}},createMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=o.factory.getNamespace().get("@"),n=Ri("@",s,(e=>new Mt(r,o,e)));return{id:"create_options",items:[{text:"Create",type:xe.Submenu,sections:n.sections}]}},createAtMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.activePage.pointer.value.x,n=r.activePage.pointer.value.y,a=o.factory.getNamespace().get("@"),l=Ri("@",a,(e=>new Mt(r,o,e,s,n)));return{id:"create_options",items:[{text:"Create",type:xe.Submenu,sections:l.sections}]}},layoutMenu(e,t){return{text:"Layout",type:xe.Submenu,sections:[t.layeringMenu]}},layeringMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.layout;return{id:"layering_options",items:[{text:"To Front",type:xe.Item,data:()=>new mt(o,We.Top),shortcut:s.selection_to_front},{text:"To Back",type:xe.Item,data:()=>new mt(o,We.Bottom),shortcut:s.selection_to_back},{text:"Bring Forward",type:xe.Item,data:()=>new mt(o,We.OneAbove),shortcut:s.bring_selection_forward},{text:"Send Backward",type:xe.Item,data:()=>new mt(o,We.OneBelow),shortcut:s.send_selection_backward}]}},viewMenu(e,t){return{text:"View",type:xe.Submenu,sections:[t.diagramViewMenu,t.diagramRenderMenu,t.zoomMenu,t.jumpMenu,t.fullscreenMenu,t.developerViewMenu]}},diagramViewMenu(e,t,i){let r=i.ApplicationStore,o=r.settings.hotkeys.view,{display_grid:s,display_shadows:n}=r.settings.view.diagram;return{id:"diagram_view_options",items:[{text:"Grid",type:xe.Toggle,data:()=>new Q(r),shortcut:o.toggle_grid,value:s,keepMenuOpenOnSelect:!0},{text:"Shadows",type:xe.Toggle,data:()=>new J(r),shortcut:o.toggle_shadows,value:n,keepMenuOpenOnSelect:!0}]}},diagramRenderMenu(e,t,i){let r=i.ApplicationStore,o=r.settings.view.diagram.render_high_quality;return{id:"diagram_render_quality",items:[{text:"Rendering – High Quality",type:xe.Toggle,data:()=>new Z(r,!0),value:o,keepMenuOpenOnSelect:!0},{text:"Rendering – Fast",type:xe.Toggle,data:()=>new Z(r,!1),value:!o,keepMenuOpenOnSelect:!0}]}},zoomMenu(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.view;return{id:"zoom_options",items:[{text:"Reset View",type:xe.Item,data:()=>new vt(r,o),shortcut:s.reset_view},{text:"Zoom In",type:xe.Item,data:()=>new Bt(r,o,.25),shortcut:s.zoom_in},{text:"Zoom Out",type:xe.Item,data:()=>new Bt(r,o,-.25),shortcut:s.zoom_out}]}},jumpMenu(e,t,i,r){let o=i.ApplicationStore,s=o.activePage.page,n=o.settings.hotkeys.view,a=r["ApplicationStore/hasSelection"];return{id:"jump_options",items:[{text:"Zoom to Selection",type:xe.Item,data:()=>new ht(o,s),shortcut:n.jump_to_selection,disabled:!a},{text:"Jump to Parents",type:xe.Item,data:()=>new ut(o,s),shortcut:n.jump_to_parents,disabled:!a},{text:"Jump to Children",type:xe.Item,data:()=>new dt(o,s),shortcut:n.jump_to_children,disabled:!a}]}},fullscreenMenu(e,t,i){let r=i.ApplicationStore,o=r.settings.hotkeys.view;return{id:"fullscreen_options",items:[{text:"Fullscreen",type:xe.Item,data:()=>new X(r),shortcut:o.fullscreen}]}},developerViewMenu(e,t,i){let r=i.ApplicationStore,o=r.settings.hotkeys.view,{display_debug_mode:s}=r.settings.view.diagram;return{id:"developer_view_options",items:[{text:"Debug Mode",type:xe.Toggle,data:()=>new K(r),shortcut:o.toggle_debug_view,value:s,keepMenuOpenOnSelect:!0}]}},helpMenu(e,t,i){let r=i.ApplicationStore,o=B.menus.help_menu.help_links,s=o.map((e=>({text:e.text,type:xe.Item,data:()=>new N(r,e.url)})));return{text:"Help",type:xe.Submenu,sections:[{id:"help_links",items:s}]}}}};function Ri(e,t,i){let r={text:(0,u.Qs)(e),type:xe.Submenu,sections:[{id:"submenus",items:[]},{id:"options",items:[]}]};for(let[o,s]of t)"string"!==typeof s?r.sections[0].items.push(Ri(o,s,i)):r.sections[1].items.push({text:(0,u.Qs)(o),type:xe.Item,data:()=>i(s)});return r.sections=r.sections.filter((e=>0<e.items.length)),r}var zi={namespaced:!0,getters:{nativeHotkeys(){return[{shortcut:"Control+R",allowBrowserBehavior:!0},{shortcut:"Control+Shift+R",allowBrowserBehavior:!0}]},fileHotkeys(e,t,i,r){let o=i.ApplicationStore,s=o.activePage.page,n=o.settings.hotkeys.file,a=r["ApplicationStore/isValid"];return[{data:()=>H.fromNew(o),shortcut:n.new_file},{data:()=>H.fromFileSystem(o),shortcut:n.open_file},{data:()=>new $(o,s.id),shortcut:n.save_file},{data:()=>new W(o,s.id),shortcut:n.save_image},{data:()=>new q(o,s.id),shortcut:n.save_select_image},{data:()=>new R(o,s.id),shortcut:n.publish_file,disabled:!o.publisher||!a}]},editHotKeys(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.edit,n={delay:400,interval:50};return[{data:()=>new Dt(r,o.id),shortcut:s.undo,repeat:n},{data:()=>new ft(r,o.id),shortcut:s.redo,repeat:n},{data:()=>new it(r,o),shortcut:s.cut},{data:()=>new E(r,o),shortcut:s.copy},{data:()=>new _t(r,o),shortcut:s.paste},{data:()=>new tt(o),shortcut:s.delete},{data:()=>new st(r,o),shortcut:s.duplicate},{data:()=>new bt(o),shortcut:s.select_all}]},layoutHotkeys(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.layout;return[{data:()=>new mt(o,We.Top),shortcut:s.selection_to_front},{data:()=>new mt(o,We.OneBelow),shortcut:s.selection_to_back},{data:()=>new mt(o,We.OneAbove),shortcut:s.bring_selection_forward},{data:()=>new mt(o,We.Bottom),shortcut:s.send_selection_backward}]},viewHotkeys(e,t,i){let r=i.ApplicationStore,o=r.activePage.page,s=r.settings.hotkeys.view;return[{data:()=>new Q(r),shortcut:s.toggle_grid},{data:()=>new J(r),shortcut:s.toggle_shadows},{data:()=>new vt(r,o),shortcut:s.reset_view},{data:()=>new Bt(r,o,.25),shortcut:s.zoom_in},{data:()=>new Bt(r,o,-.25),shortcut:s.zoom_out},{data:()=>new ht(r,o),shortcut:s.jump_to_selection},{data:()=>new ut(r,o),shortcut:s.jump_to_parents},{data:()=>new dt(r,o),shortcut:s.jump_to_children},{data:()=>new X(r),shortcut:s.fullscreen},{data:()=>new K(r),shortcut:s.toggle_debug_view}]}}},Wi=(0,T.MT)({modules:{ApplicationStore:Fi,ContextMenuStore:Ni,HotkeyStore:zi}});(0,re.ri)(Ai).use(Wi).mount("#app")},261:function(e){e.exports=JSON.parse('{"file":{"image_export":{"padding":30}},"edit":{"clone_offset":[20,20]},"view":{"diagram":{"display_grid":true,"display_shadows":true,"display_debug_mode":false,"render_high_quality":true,"disable_shadows_at":0.7}},"hotkeys":{"file":{"new_file":"Control+N","open_file":"Control+O","save_file":"Control+S","save_image":"","save_select_image":"","publish_file":"","open_library":"","save_library":""},"edit":{"undo":"Control+Z","redo":"Control+Y","cut":"Control+X","copy":"Control+C","paste":"Control+V","delete":"Backspace","duplicate":"Control+D","select_all":"Control+A"},"layout":{"selection_to_front":"Control+Shift+F","selection_to_back":"Control+Shift+B","bring_selection_forward":"","send_selection_backward":"","align_left":"","align_center":"","align_right":"","align_top":"","align_middle":"","align_bottom":"","group":"Control+G","ungroup":"Control+Shift+U","open_group":"","close_group":""},"view":{"toggle_grid":"Control+Shift+G","toggle_shadows":"","reset_view":"Escape","zoom_in":"","zoom_out":"","fullscreen":"","jump_to_selection":"Shift+Z","jump_to_parents":"Shift+P","jump_to_children":"Shift+C","toggle_debug_view":""},"select":{"many":"Control"}}}')}},t={};function i(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,r,o,s){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],s=e[d][2];for(var a=!0,l=0;l<r.length;l++)(!1&s||n>=s)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(a=!1,s<n&&(n=s));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,o,s]}}(),function(){i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(t,r){return i.f[r](e,t),t}),[]))}}(),function(){i.u=function(e){return"js/"+e+".7271988a.js"}}(),function(){i.miniCssF=function(e){return"css/"+e+".624054c4.css"}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="attack-flow-builder:";i.l=function(r,o,s,n){if(e[r])e[r].push(o);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){a=u;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[o];var h=function(t,i){a.onerror=a.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(i)})),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/static/attack_flow_builder/"}(),function(){var e=function(e,t,i,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(s){if(o.onerror=o.onload=null,"load"===s.type)i();else{var n=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=n,l.request=a,o.parentNode.removeChild(o),r(l)}};return o.onerror=o.onload=s,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var i=document.getElementsByTagName("link"),r=0;r<i.length;r++){var o=i[r],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===e||s===t))return o}var n=document.getElementsByTagName("style");for(r=0;r<n.length;r++){o=n[r],s=o.getAttribute("data-href");if(s===e||s===t)return o}},r=function(r){return new Promise((function(o,s){var n=i.miniCssF(r),a=i.p+n;if(t(n,a))return o();e(r,a,o,s)}))},o={143:0};i.f.miniCss=function(e,t){var i={985:1};o[e]?t.push(o[e]):0!==o[e]&&i[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};i.f.j=function(t,r){var o=i.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var s=new Promise((function(i,r){o=e[t]=[i,r]}));r.push(o[2]=s);var n=i.p+i.u(t),a=new Error,l=function(r){if(i.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var s=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",a.name="ChunkLoadError",a.type=s,a.request=n,o[1](a)}};i.l(n,l,"chunk-"+t,t)}},i.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,s,n=r[0],a=r[1],l=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)var d=l(i)}for(t&&t(r);c<n.length;c++)s=n[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},r=self["webpackChunkattack_flow_builder"]=self["webpackChunkattack_flow_builder"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(581)}));r=i.O(r)})();
//# sourceMappingURL=app.fd39267e.js.map