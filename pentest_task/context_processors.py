# from .models import Notification

# def notifications_processor(request):
#     if request.user.is_authenticated:
#         notifications = Notification.objects.filter(user=request.user, is_read=False).order_by('-created_at')[:5]
#         count = notifications.count()
#         return {
#             'notif_unread': notifications,
#             'notif_count': count
#         }
#     return {}

from .models import Notification

def notifications(request):
    if request.user.is_authenticated:
        notif_unread = Notification.objects.filter(user=request.user, is_read=False).order_by('-created_at')
        notif_count = notif_unread.count()
    else:
        notif_unread = []
        notif_count = 0

    return {
        'notif_unread': notif_unread,
        'notif_count': notif_count,
    }
